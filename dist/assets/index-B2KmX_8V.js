const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pos-components-BLBMe5sX.js","assets/react-core-i1FDzZHP.js","assets/utility-libs-C6oKIWOz.js","assets/date-utils-DpdzE7my.js","assets/pdf-utils-CVj_c_h-.js","assets/react-core-OEN34m2J.css","assets/product-components-Cy8W9xav.js","assets/react-state-D-rUAZ-t.js","assets/report-components-C9yWHu8M.js","assets/purchase-components-PHSaAAl9.js"])))=>i.map(i=>d[i]);
import{r as h,u as ke,a as ie,s as V,j as e,T as de,F as w,R as te,C as I,b as re,A as mt,I as ne,c as fe,P as Is,B as pe,D as De,L as It,S as oe,E as Pt,d as qt,e as Jt,f as Z,g as kr,h as xr,i as Ps,M as Fr,k as ct,l as Ur,m as As,n as Ds,t as Tr,o as Es,p as $s,q as Ls,v as At,w as Ae,x as Rs,y as Ne,z as ce,G as Dt,H as Ms,J as Ir,K as ee,N as Yt,O as yr,Q as Ce,U as rt,V as rr,W as ge,X as Os,Y as it,Z as Bs}from"./react-core-i1FDzZHP.js";import{c as Ee,a as _s,t as z,b as H,p as S,d as Vr,f as Fs,e as Us,s as ot,g as Vs,h as zs,i as Hs}from"./react-state-D-rUAZ-t.js";import{h as dt,E as ut}from"./pdf-utils-CVj_c_h-.js";import{d as be}from"./date-utils-DpdzE7my.js";import"./utility-libs-C6oKIWOz.js";import"./index-B2KmX_8V.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();const qs="modulepreload",Js=function(t){return"/"+t},Pr={},Be=function(r,s,l){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),n=o?.nonce||o?.getAttribute("nonce");a=Promise.allSettled(s.map(m=>{if(m=Js(m),m in Pr)return;Pr[m]=!0;const b=m.endsWith(".css"),j=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${j}`))return;const c=document.createElement("link");if(c.rel=b?"stylesheet":qs,b||(c.as="script"),c.crossOrigin="",c.href=m,n&&c.setAttribute("nonce",n),document.head.appendChild(c),b)return new Promise((y,N)=>{c.addEventListener("load",y),c.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(o){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o}return a.then(o=>{for(const n of o||[])n.status==="rejected"&&i(n.reason);return r().catch(i)})},Ys={user:null,loading:!1,error:null,isAuthenticated:!1,sessionExpiredMessage:null},zr=Ee({name:"auth",initialState:Ys,reducers:{login(t){t.loading=!0,t.error=null,t.sessionExpiredMessage=null},logout(t){t.loading=!0,t.error=null},getCurrentUser(t){t.loading=!0,t.error=null},changePassword(t){t.loading=!0,t.error=null},loginSucceeded(t,r){t.loading=!1,t.user=r.payload.user,t.isAuthenticated=!0,t.error=null,t.sessionExpiredMessage=null},logoutSucceeded(t){t.loading=!1,t.user=null,t.isAuthenticated=!1,t.error=null},getCurrentUserSucceeded(t,r){t.loading=!1,t.user=r.payload,t.isAuthenticated=!0,t.error=null},changePasswordSucceeded(t){t.loading=!1,t.error=null},sessionExpired(t,r){t.loading=!1,t.user=null,t.isAuthenticated=!1,t.sessionExpiredMessage=r.payload||"Your session has expired. Please log in again."},failed(t,r){t.loading=!1,t.error=r.payload},clearAuthError(t){t.error=null,t.sessionExpiredMessage=null}}}),{login:Hr,logout:Kt,getCurrentUser:Qt,changePassword:qr,loginSucceeded:Ks,logoutSucceeded:Qs,getCurrentUserSucceeded:Gs,changePasswordSucceeded:Ws,sessionExpired:dr,failed:gr,clearAuthError:fr}=zr.actions,Xs=zr.reducer,Jr=h.createContext(null);function Zs({children:t}){const r=ke(),{user:s,isAuthenticated:l,loading:a,error:i}=ie(P=>P.auth),{usersList:o}=ie(P=>P.users),{auditList:n}=ie(P=>P.audit);h.useEffect(()=>{!l&&localStorage.getItem("vcare_token")&&r(Qt())},[r,l]),h.useEffect(()=>{i&&(V.error(i),r(fr()))},[i,r]);const m=async(P,D)=>{try{return r(Hr({username:P,password:D})),{success:!0}}catch(M){return{success:!1,error:M.message||"Invalid credentials"}}},b=()=>{try{return r(Kt()),{success:!0}}catch(P){return console.error("Logout error:",P),{success:!1,error:P.message}}},j=async(P,D)=>{try{return r(qr({currentPassword:P,newPassword:D})),{success:!0}}catch(M){return{success:!1,error:M.message}}},c=(P,D="view")=>s&&s.permissions&&s.permissions[P]?.[D]||!1,y=()=>{},N=async()=>{try{return n}catch(P){return console.error("Error fetching audit trail:",P),n}};return e.jsx(Jr.Provider,{value:{isAuthenticated:l,currentUser:s,users:o,auditTrail:n,loading:a,login:m,logout:b,changePassword:j,logAction:y,hasPermission:c,getAuditTrail:N},children:t})}function Ge(){const t=h.useContext(Jr);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function v({name:t,className:r="",size:s="text-base",...l}){return e.jsx("span",{className:`material-icons ${s} ${r}`,...l,children:t})}v.Small=({name:t,className:r="",...s})=>e.jsx(v,{name:t,size:"text-sm",className:r,...s});v.Medium=({name:t,className:r="",...s})=>e.jsx(v,{name:t,size:"text-base",className:r,...s});v.Large=({name:t,className:r="",...s})=>e.jsx(v,{name:t,size:"text-lg",className:r,...s});v.XLarge=({name:t,className:r="",...s})=>e.jsx(v,{name:t,size:"text-xl",className:r,...s});const{Title:sr,Text:Se}=de,ea=[{role:"Administrator",description:"Full system access",credentials:btoa(JSON.stringify({username:"admin",password:"admin123"}))},{role:"Manager",description:"Management access",credentials:btoa(JSON.stringify({username:"manager1",password:"manager123"}))},{role:"Cashier",description:"POS access only",credentials:btoa(JSON.stringify({username:"cashier1",password:"cashier123"}))}];function ta(){const{login:t}=Ge(),r=ke(),[s]=w.useForm(),[l,a]=h.useState({}),[i,o]=h.useState(0),{loading:n,error:m,sessionExpiredMessage:b}=ie(p=>p.auth);h.useEffect(()=>()=>{r(fr())},[r]);const j=p=>{if(!p)return 0;let k=0;return p.length>=8&&(k+=25),/[A-Z]/.test(p)&&(k+=25),/[a-z]/.test(p)&&(k+=25),/[0-9]/.test(p)&&(k+=12.5),/[^A-Za-z0-9]/.test(p)&&(k+=12.5),Math.min(k,100)},c=p=>{o(j(p.target.value))},y=async p=>{await t(p.username,p.password)},N=p=>{a(k=>({...k,[p]:!k[p]}))},P=p=>{try{const k=JSON.parse(atob(p));s.setFieldsValue(k),o(j(k.password))}catch(k){console.error("Error decoding credentials",k)}},D=()=>i<30?"red":i<70?"orange":"green",M=()=>b||(m?m.includes("network")||m.includes("connect")?"Network error. Please check your internet connection.":m.includes("401")||m.includes("credentials")||m.includes("Invalid")?"Invalid username or password. Please try again.":m:null);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-6xl",children:e.jsxs(te,{gutter:32,align:"middle",children:[e.jsx(I,{xs:24,lg:12,className:"text-center lg:text-left mb-8 lg:mb-0",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center lg:justify-start space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("img",{src:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).logoPreview?JSON.parse(localStorage.getItem("vcare_branding")).logoPreview:"/VCARELogo 1.png",alt:"VCare Logo",className:"w-10 h-10 object-contain"})}),e.jsxs("div",{children:[e.jsxs(sr,{level:1,className:"m-0 text-gray-900",children:[localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).businessName?JSON.parse(localStorage.getItem("vcare_branding")).businessName.split(" ")[0]:"VCare"," POS System"]}),e.jsx(Se,{type:"secondary",className:"text-lg",children:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).tagline?JSON.parse(localStorage.getItem("vcare_branding")).tagline:"Furniture Store Management System"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(sr,{level:3,className:"text-gray-700",children:"Welcome Back"}),e.jsx(Se,{type:"secondary",className:"text-base block",children:"Sign in to access your furniture store management dashboard. Manage inventory, process sales, and track your business performance."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm border",children:[e.jsx(v,{name:"inventory_2",className:"text-blue-500 text-2xl mb-2"}),e.jsx(Se,{strong:!0,className:"block",children:"Inventory"}),e.jsx(Se,{type:"secondary",className:"text-sm",children:"Manage Products"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm border",children:[e.jsx(v,{name:"point_of_sale",className:"text-green-500 text-2xl mb-2"}),e.jsx(Se,{strong:!0,className:"block",children:"Sales"}),e.jsx(Se,{type:"secondary",className:"text-sm",children:"Process Orders"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm border",children:[e.jsx(v,{name:"analytics",className:"text-purple-500 text-2xl mb-2"}),e.jsx(Se,{strong:!0,className:"block",children:"Reports"}),e.jsx(Se,{type:"secondary",className:"text-sm",children:"Track Performance"})]})]})]})}),e.jsx(I,{xs:24,lg:12,children:e.jsxs(re,{className:"shadow-xl border-0 bg-white/95 backdrop-blur",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(sr,{level:3,className:"text-gray-900 mb-2",children:"Sign In"}),e.jsx(Se,{type:"secondary",children:"Enter your credentials to access the system"})]}),M()&&e.jsx(mt,{message:b?"Session Expired":"Login Failed",description:M(),type:b?"warning":"error",showIcon:!0,className:"mb-4"}),e.jsxs(w,{form:s,layout:"vertical",onFinish:y,size:"large",children:[e.jsx(w.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please enter your username"}],children:e.jsx(ne,{prefix:e.jsx(v,{name:"person",className:"text-gray-400"}),placeholder:"Enter username",autoComplete:"username"})}),e.jsx(w.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter your password"}],children:e.jsx(ne.Password,{prefix:e.jsx(v,{name:"lock",className:"text-gray-400"}),placeholder:"Enter password",autoComplete:"current-password",onChange:c})}),i>0&&e.jsx("div",{className:"mb-4",children:e.jsx(fe,{title:i<30?"Weak password":i<70?"Medium strength password":"Strong password",children:e.jsx(Is,{percent:i,showInfo:!1,strokeColor:D(),size:"small"})})}),e.jsx(w.Item,{children:e.jsx(pe,{type:"primary",htmlType:"submit",loading:n,block:!0,size:"large",className:"bg-[#0E72BD] hover:bg-blue-700 h-12 text-lg font-semibold",children:"Sign In"})})]}),e.jsx(De,{children:"Demo Accounts"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Se,{type:"secondary",className:"text-sm block text-center mb-3",children:"Use these demo accounts to explore different access levels:"}),ea.map((p,k)=>e.jsx(re,{size:"small",className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>P(p.credentials),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Se,{strong:!0,className:"text-sm",children:p.role}),e.jsx("br",{}),e.jsx(Se,{type:"secondary",className:"text-xs",children:p.description})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{type:"text",size:"small",icon:l[k]?e.jsx(v,{name:"visibility_off"}):e.jsx(v,{name:"visibility"}),onClick:$=>{$.stopPropagation(),N(k)}}),l[k]&&e.jsx("div",{className:"text-right",children:(()=>{try{const{username:$,password:_}=JSON.parse(atob(p.credentials));return e.jsxs(e.Fragment,{children:[e.jsx(Se,{code:!0,className:"text-xs block",children:$}),e.jsx(Se,{code:!0,className:"text-xs block",children:_})]})}catch{return e.jsx(Se,{type:"danger",children:"Error loading credentials"})}})()})]})]})},k))]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(Se,{type:"secondary",className:"text-xs",children:["Â© ",new Date().getFullYear()," ",localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).businessName?JSON.parse(localStorage.getItem("vcare_branding")).businessName:"VCare Furniture Store",". All rights reserved."]})})]})})]})})})}const Ar=(t,r)=>{const s=new Map;return t.forEach(l=>{s.set(l.id,l)}),r.forEach(l=>{s.set(l.id,l)}),Array.from(s.values())},ra=t=>{const r=new Set;return t.filter(s=>r.has(s.id)?!1:(r.add(s.id),!0))},sa={notifications:[],stockAlerts:[],settings:{enableStockAlerts:!0,lowStockThreshold:10,criticalStockThreshold:5,stockCheckInterval:5*60*1e3},lastChecked:null,loading:!1,error:null},Yr=Ee({name:"notifications",initialState:sa,reducers:{checkStockLevels(t){t.loading=!0,t.error=null},checkStockLevelsSucceeded(t,r){t.loading=!1,t.stockAlerts=Ar(t.stockAlerts,r.payload.alerts),t.lastChecked=r.payload.timestamp},addNotification(t,r){const s={id:r.payload.id||`NOTIF-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:r.payload.timestamp||new Date().toISOString(),read:!1,...r.payload},l=t.notifications.findIndex(a=>a.id===s.id);l!==-1?t.notifications[l]=s:t.notifications=[s,...t.notifications.slice(0,49)],t.notifications=ra(t.notifications)},markNotificationRead(t,r){t.notifications=t.notifications.map(s=>s.id===r.payload?{...s,read:!0}:s)},markAllNotificationsRead(t){t.notifications=t.notifications.map(r=>({...r,read:!0}))},removeNotification(t,r){t.notifications=t.notifications.filter(s=>s.id!==r.payload)},clearNotifications(t){t.notifications=[]},clearStockAlerts(t){t.stockAlerts=[]},updateStockAlerts(t,r){t.stockAlerts=Ar(t.stockAlerts,r.payload),t.lastChecked=new Date().toISOString()},updateNotificationSettings(t,r){t.settings={...t.settings,...r.payload}},failed(t,r){t.loading=!1,t.error=r.payload},clearError(t){t.error=null}}}),{checkStockLevels:Tt,checkStockLevelsSucceeded:aa,addNotification:Kr,markNotificationRead:la,markAllNotificationsRead:na,removeNotification:ia,clearNotifications:oa,clearStockAlerts:ca,updateStockAlerts:dc,updateNotificationSettings:da,failed:ua,clearError:uc}=Yr.actions,ma=Yr.reducer;function jr(){const t=ke(),{notifications:r,stockAlerts:s,settings:l,lastChecked:a,loading:i,error:o}=ie(p=>p.notifications);ie(p=>p.products?.productsList||[]);const n=ie(p=>p.rawMaterials?.rawMaterialsList||[]),m=p=>{const k={id:`NOTIF-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),read:!1,showUINotification:!0,...p};t(Kr(k))},b=()=>{t(Tt())},j=p=>{t(la(p))},c=()=>{t(na())},y=()=>{t(oa()),V.success("All notifications cleared")},N=p=>{t(ia(p))},P=()=>{t(ca())},D=p=>{t(da(p))},M=(p,k=n)=>{const $=[],_=[];return!Array.isArray(p)||!Array.isArray(k)?{unavailableMaterials:$,lowMaterials:_}:(p.forEach(R=>{let J=[];if(R?.selectedColorId&&R?.selectedSize&&R?.product?.colors){const le=R.product.colors.find(Y=>Y.id===R.selectedColorId);if(le&&le.sizes){const Y=le.sizes.find(C=>C.name===R.selectedSize);Y&&Array.isArray(Y.rawMaterials)&&(J=Y.rawMaterials)}}else R?.product&&Array.isArray(R.product.rawMaterials)&&(J=R.product.rawMaterials);J.length>0&&J.forEach(le=>{const Y=k.find(C=>C.id===le.rawMaterialId);if(Y){const C=le.quantity*R.quantity;Y.stockQuantity<C&&(Y.stockQuantity===0?$.push({materialName:Y.name,productName:R.product.name,required:C,available:Y.stockQuantity,unit:Y.unit}):_.push({materialName:Y.name,productName:R.product.name,required:C,available:Y.stockQuantity,unit:Y.unit}))}})}),{unavailableMaterials:$,lowMaterials:_})};return{notifications:r,stockAlerts:s,settings:l,lastChecked:a,loading:i,error:o,enableStockAlerts:l.enableStockAlerts,lowStockThreshold:l.lowStockThreshold,criticalStockThreshold:l.criticalStockThreshold,enableLowStockWarnings:l.enableLowStockWarnings,addNotification:m,checkStockLevels:b,checkRawMaterialAvailability:M,markAsRead:j,markAllAsRead:c,clearAllNotifications:y,removeNotification:N,clearStockAlerts:P,updateSettings:D}}function A({icon:t,children:r,iconPosition:s="left",...l}){const a=t&&e.jsx(v,{name:t});return e.jsxs(pe,{icon:s==="left"?a:void 0,...l,children:[r,s==="right"&&a]})}A.Primary=t=>e.jsx(A,{type:"primary",...t});A.Secondary=t=>e.jsx(A,{...t});A.Text=t=>e.jsx(A,{type:"text",...t});A.Link=t=>e.jsx(A,{type:"link",...t});A.Danger=t=>e.jsx(A,{danger:!0,...t});const{Header:pa}=It,{Text:bt,Title:Dr}=de;function ha({collapsed:t,onCollapse:r,activeTab:s,style:l,onTabChange:a}){const i=ke(),{currentUser:o}=Ge(),{notifications:n,stockAlerts:m,markAsRead:b,clearAllNotifications:j,markAllAsRead:c,clearStockAlerts:y}=jr(),[N,P]=h.useState(!1),[D,M]=h.useState(!1),[p,k]=h.useState(new Set);h.useEffect(()=>{const E=new Set(m.map(se=>se.id));k(se=>new Set([...se].filter(ue=>E.has(ue))))},[m]);const $=()=>{i(Kt())},_=[{key:"profile",icon:e.jsx(v,{name:"person"}),label:"Profile Settings"},{key:"preferences",icon:e.jsx(v,{name:"tune"}),label:"Preferences"},{type:"divider"},{key:"help",icon:e.jsx(v,{name:"help_outline"}),label:"Help & Support"},{key:"logout",icon:e.jsx(v,{name:"logout"}),label:"Sign Out",danger:!0,onClick:$}],R=[...m.map(E=>({id:E.id,title:E.title,message:E.message,timestamp:E.timestamp,icon:E.type==="critical"?"error":"warning",type:E.type==="critical"?"error":"warning",read:p.has(E.id),navigateTo:E.navigateTo,isStockAlert:!0})),...n.map(E=>({...E,isStockAlert:!1}))].sort((E,se)=>new Date(se.timestamp)-new Date(E.timestamp)),J=R.filter(E=>!E.read).length,le=E=>{E.isStockAlert?k(se=>new Set([...se,E.id])):b(E.id),E.navigateTo&&a&&a(E.navigateTo),P(!1)},Y=()=>{j(),y(),k(new Set),P(!1)},C=()=>{c();const E=m.map(se=>se.id);k(se=>new Set([...se,...E]))},u=()=>{const E=[{title:"Navigation Menu",description:"Use this sidebar to navigate between different sections of the system.",target:()=>document.querySelector(".ant-layout-sider")},{title:"Notifications",description:"Check your notifications here for stock alerts and system updates.",target:()=>document.querySelector('[data-tour="notifications"]')},{title:"User Menu",description:"Access your profile settings and logout from here.",target:()=>document.querySelector('[data-tour="user-menu"]')}],se={pos:[{title:"Product Grid",description:"Browse and select products to add to your cart.",target:()=>document.querySelector('[data-tour="product-grid"]')},{title:"Shopping Cart",description:"Review selected items and proceed to checkout.",target:()=>document.querySelector('[data-tour="cart"]')}],products:[{title:"Product Management",description:"Add, edit, and manage your product inventory here.",target:()=>document.querySelector('[data-tour="product-table"]')},{title:"Add Product",description:"Click here to add new products to your inventory.",target:()=>document.querySelector('[data-tour="add-product"]')}],transactions:[{title:"Order History",description:"View all completed transactions and their details.",target:()=>document.querySelector('[data-tour="transaction-table"]')}],reports:[{title:"Analytics Dashboard",description:"Monitor your business performance with these key metrics.",target:()=>document.querySelector('[data-tour="stats-cards"]')},{title:"Export Reports",description:"Download detailed reports in CSV format.",target:()=>document.querySelector('[data-tour="export-reports"]')}]};return[...E,...se[s]||[]]},f=e.jsxs("div",{className:"w-80 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"p-3 border-b flex justify-between items-center",children:[e.jsx(Dr,{level:5,className:"m-0",children:"Notifications"}),e.jsxs(oe,{size:"small",children:[R.length>0&&J>0&&e.jsx(A.Text,{size:"small",onClick:C,children:"Mark All Read"}),e.jsx(A.Text,{size:"small",onClick:Y,disabled:R.length===0,children:"Clear All"})]})]}),R.length===0?e.jsx(Pt,{image:Pt.PRESENTED_IMAGE_SIMPLE,description:"No notifications",className:"py-8"}):e.jsx(qt,{dataSource:R,renderItem:E=>e.jsx(qt.Item,{className:`cursor-pointer hover:bg-gray-50 transition-colors ${E.read?"opacity-70":""}`,onClick:()=>le(E),children:e.jsxs("div",{className:"flex items-start p-2 w-full",children:[e.jsx("div",{className:`flex-shrink-0 mr-3 mt-1 text-${E.type==="error"?"red":E.type==="warning"?"orange":"blue"}-500`,children:e.jsx(v,{name:E.icon||"notifications"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(bt,{strong:!0,className:E.read?"text-gray-500":"text-gray-900",children:E.title}),!E.read&&e.jsx(Jt,{status:"processing",color:"blue"})]}),e.jsx(bt,{type:"secondary",className:"text-xs block",children:new Date(E.timestamp).toLocaleString()}),e.jsx(bt,{className:`text-sm block mt-1 ${E.read?"text-gray-500":"text-gray-700"}`,children:E.message}),E.navigateTo&&e.jsx(Z,{color:"blue",size:"small",className:"mt-1",children:"Click to view"})]})]})})})]}),K=()=>({pos:"Point of Sale",products:"Product Management","raw-materials":"Raw Materials",transactions:"Orders",reports:"Reports & Analytics",coupons:"Coupon Management",tax:"Tax Management","user-management":"User Management","audit-trail":"Audit Trail",settings:"Settings"})[s]||"VCare POS";return e.jsxs(e.Fragment,{children:[e.jsxs(pa,{style:l,className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx(fe,{title:t?"Expand Sidebar":"Collapse Sidebar",children:e.jsx(A.Text,{icon:t?"menu_open":"menu",onClick:()=>r(!t),className:"hover:bg-blue-50 transition-colors",size:"large"})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs(Dr,{level:4,className:"m-0 text-gray-900",children:[K(),s==="settings"&&e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"v1.0.0"})]})})]}),e.jsxs(oe,{size:"middle",className:"flex items-center",children:[e.jsx(fe,{title:"WiFi Connected",children:e.jsx(v,{name:"wifi",className:"text-green-500"})}),e.jsx(fe,{title:"Take a Tour",children:e.jsx(A.Text,{icon:"help_outline",onClick:()=>M(!0),className:"text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-all","data-tour":"help"})}),e.jsx(kr,{open:N,onOpenChange:P,dropdownRender:()=>f,placement:"bottomRight",trigger:["click"],children:e.jsx(Jt,{count:J,size:"small",offset:[-2,2],children:e.jsx(A.Text,{icon:"notifications",className:"text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-all","data-tour":"notifications"})})}),e.jsx(kr,{menu:{items:_},placement:"bottomRight",trigger:["click"],children:e.jsxs("div",{className:"flex items-center space-x-3 cursor-pointer","data-tour":"user-menu",children:[e.jsxs(xr,{size:40,style:{background:"linear-gradient(135deg, #0E72BD, #1890ff)"},children:[o?.firstName?.[0],o?.lastName?.[0]]}),e.jsxs("div",{className:"hidden sm:block text-left",children:[e.jsxs(bt,{strong:!0,className:"text-gray-900 block text-sm",children:[o?.firstName," ",o?.lastName]}),e.jsx(bt,{type:"secondary",className:"text-xs capitalize",children:o?.role})]})]})})]})]}),e.jsx(Ps,{open:D,onClose:()=>M(!1),steps:u(),indicatorsRender:(E,se)=>e.jsxs("span",{className:"text-blue-600",children:[E+1," / ",se]})})]})}const{Sider:mc}=It,{Text:Er,Title:xa}=de;function ya({activeTab:t,onTabChange:r,collapsed:s,onCollapse:l}){const{hasPermission:a}=Ge(),{stockAlerts:i}=jr(),o=i.filter(c=>c.category==="raw-material").length,n=i.filter(c=>c.category==="product").length,j=[{key:"pos",icon:e.jsx(v,{name:"restaurant"}),label:"Point of Sale",module:"pos"},{key:"products",icon:e.jsx(v,{name:"inventory_2"}),label:"Products",module:"products",badge:n>0?{count:n,color:"red"}:null},{key:"raw-materials",icon:e.jsx(v,{name:"category"}),label:"Raw Materials",module:"raw-materials",badge:o>0?{count:o,color:"red"}:null},{key:"transactions",icon:e.jsx(v,{name:"receipt_long"}),label:"Orders",module:"transactions"},{key:"reports",icon:e.jsx(v,{name:"analytics"}),label:"Reports",module:"reports"},{key:"coupons",icon:e.jsx(v,{name:"local_offer"}),label:"Coupons",module:"coupons"},{key:"tax",icon:e.jsx(v,{name:"receipt"}),label:"Tax Management",module:"tax"},{key:"purchase-orders",icon:e.jsx(v,{name:"receipt"}),label:"Purchase Orders",module:"purchase-orders"},{key:"user-management",icon:e.jsx(v,{name:"people"}),label:"User Management",module:"user-management"},{key:"audit-trail",icon:e.jsx(v,{name:"history"}),label:"Audit Trail",module:"audit-trail"},{key:"settings",icon:e.jsx(v,{name:"settings"}),label:"Settings",module:"settings"}].filter(c=>a(c.module,"view")).map(c=>({key:c.key,icon:c.icon,label:s?null:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"font-medium",children:c.label}),c.badge&&e.jsx(Jt,{count:c.badge.count,size:"small",style:{backgroundColor:c.badge.color}})]}),title:s?c.label:void 0}));return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:`${s?"p-4":"p-6"} border-b border-gray-200 transition-all duration-200`,children:e.jsxs("div",{className:`flex items-center ${s?"justify-center":"space-x-3"}`,children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("img",{src:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).logoPreview?JSON.parse(localStorage.getItem("vcare_branding")).logoPreview:"/VCARELogo 1.png",alt:"VCare Logo",className:"w-8 h-8 object-contain"})}),!s&&e.jsxs("div",{children:[e.jsx(xa,{level:4,className:"m-0 text-gray-900",children:"VCare POS"}),e.jsx(Er,{type:"secondary",className:"text-xs",children:"Furniture Store Management"})]})]})}),e.jsxs("div",{className:"flex-1 p-4",children:[!s&&e.jsx("div",{className:"mb-4",children:e.jsx(Er,{type:"secondary",className:"text-xs font-semibold uppercase tracking-wider",children:"Main Navigation"})}),e.jsx(Fr,{mode:"inline",selectedKeys:[t],onClick:({key:c})=>r(c),items:j,className:"border-none bg-transparent",inlineCollapsed:s,style:{fontSize:"14px"}})]})]})}const{Title:$r,Text:Lr}=de;function _e({children:t,module:r,action:s="view"}){const{isAuthenticated:l}=ie(i=>i.auth),{hasPermission:a}=Ge();return l?a(r,s)?t:e.jsx(re,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{name:"lock",className:"text-6xl text-gray-300 mb-4"}),e.jsx($r,{level:4,type:"secondary",children:"Access Denied"}),e.jsxs(Lr,{type:"secondary",children:["You do not have permission to ",s," ",r.replace("-"," "),"."]})]})}):e.jsx(re,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{name:"logout",className:"text-6xl text-gray-300 mb-4"}),e.jsx($r,{level:4,type:"secondary",children:"Authentication Required"}),e.jsx(Lr,{type:"secondary",children:"Please log in to access this page."})]})})}const ga={productsList:[],currentProduct:null,loading:!1,error:null},Qr=Ee({name:"products",initialState:ga,reducers:{fetchProducts(t){t.loading=!0,t.error=null},fetchProductById(t){t.loading=!0,t.error=null},addProduct(t){t.loading=!0,t.error=null},updateProduct(t){t.loading=!0,t.error=null},deleteProducts(t){t.loading=!0,t.error=null},updateProductStock(t){t.loading=!0,t.error=null},fetchProductsSucceeded(t,r){t.loading=!1,t.productsList=r.payload},fetchProductByIdSucceeded(t,r){t.loading=!1,t.currentProduct=r.payload},addProductSucceeded(t,r){t.loading=!1,t.productsList.push(r.payload)},updateProductSucceeded(t,r){t.loading=!1;const s=t.productsList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.productsList[s]=r.payload),t.currentProduct&&t.currentProduct.id===r.payload.id&&(t.currentProduct=r.payload)},deleteProductsSucceeded(t,r){t.loading=!1,t.productsList=t.productsList.filter(s=>s.id!==r.payload.productId)},updateProductStockSucceeded(t,r){t.loading=!1;const s=t.productsList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.productsList[s]={...t.productsList[s],stock:r.payload.stock,sizes:r.payload.sizes||t.productsList[s].sizes}),t.currentProduct&&t.currentProduct.id===r.payload.id&&(t.currentProduct={...t.currentProduct,stock:r.payload.stock,sizes:r.payload.sizes||t.currentProduct.sizes})},failed(t,r){t.loading=!1,t.error=r.payload},clearCurrentProduct(t){t.currentProduct=null}}}),{fetchProducts:br,fetchProductById:fa,addProduct:ja,updateProduct:ba,deleteProducts:va,updateProductStock:Sa,fetchProductsSucceeded:wa,fetchProductByIdSucceeded:Ca,addProductSucceeded:Na,updateProductSucceeded:ka,deleteProductsSucceeded:Ta,updateProductStockSucceeded:Ia,failed:at,clearCurrentProduct:pc}=Qr.actions,Pa=Qr.reducer,Aa={usersList:[],loading:!1,error:null},Gr=Ee({name:"users",initialState:Aa,reducers:{fetchUsers(t){t.loading=!0,t.error=null},addUser(t){t.loading=!0,t.error=null},updateUser(t){t.loading=!0,t.error=null},deleteUser(t){t.loading=!0,t.error=null},fetchUsersSucceeded(t,r){t.loading=!1,t.usersList=r.payload},addUserSucceeded(t,r){t.loading=!1,t.usersList.push(r.payload.userData)},updateUserSucceeded(t,r){t.loading=!1;const s=t.usersList.findIndex(l=>l.id===r.payload.userData.id);s!==-1&&(t.usersList[s]=r.payload.userData)},deleteUserSucceeded(t,r){t.loading=!1,t.usersList=t.usersList.filter(s=>s.id!==r.payload.userId)},failed(t,r){t.loading=!1,t.error=r.payload}}}),{fetchUsers:Wr,addUser:Xr,updateUser:vr,deleteUser:ur,fetchUsersSucceeded:Da,addUserSucceeded:Ea,updateUserSucceeded:$a,deleteUserSucceeded:La,failed:Et}=Gr.actions,Ra=Gr.reducer,Ma={categoriesList:[],loading:!1,error:null},Zr=Ee({name:"categories",initialState:Ma,reducers:{fetchCategories(t,r){t.loading=!0,t.error=null},addCategories(t,r){t.loading=!0,t.error=null},updateCategories(t,r){t.loading=!0,t.error=null},deleteCategories(t,r){t.loading=!0,t.error=null},fetchCategoriesSucceeded(t,r){t.loading=!1,t.categoriesList=r.payload},addCategoriesSucceeded(t,r){t.loading=!1,t.categoriesList.push(r.payload.categoryData)},updateCategoriesSucceeded(t,r){t.loading=!1,t.categoriesList=t.categoriesList.map(s=>s.id===r.payload.id?{...s,...r.payload.categoryData}:s)},deleteCategoriesSucceeded(t,r){t.loading=!1,t.categoriesList=t.categoriesList.filter(s=>s.id!==r.payload.categoryId)},failed(t,r){t.loading=!1,t.error=r.payload}}}),{fetchCategories:es,addCategories:Oa,updateCategories:Ba,deleteCategories:_a,fetchCategoriesSucceeded:Fa,addCategoriesSucceeded:Ua,updateCategoriesSucceeded:Va,deleteCategoriesSucceeded:za,failed:$t}=Zr.actions,Ha=Zr.reducer,qa={vendorsList:[],currentVendor:null,loading:!1,error:null},ts=Ee({name:"vendors",initialState:qa,reducers:{fetchVendors(t){t.loading=!0,t.error=null},fetchVendorById(t){t.loading=!0,t.error=null},addVendor(t){t.loading=!0,t.error=null},updateVendor(t){t.loading=!0,t.error=null},deleteVendor(t){t.loading=!0,t.error=null},fetchVendorsSucceeded(t,r){t.loading=!1,t.vendorsList=r.payload},fetchVendorByIdSucceeded(t,r){t.loading=!1,t.currentVendor=r.payload},addVendorSucceeded(t,r){t.loading=!1,t.vendorsList.push(r.payload)},updateVendorSucceeded(t,r){t.loading=!1;const s=t.vendorsList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.vendorsList[s]=r.payload),t.currentVendor&&t.currentVendor.id===r.payload.id&&(t.currentVendor=r.payload)},deleteVendorSucceeded(t,r){t.loading=!1,t.vendorsList=t.vendorsList.filter(s=>s.id!==r.payload.id)},failed(t,r){t.loading=!1,t.error=r.payload},clearCurrentVendor(t){t.currentVendor=null}}}),{fetchVendors:Ja,fetchVendorById:Ya,addVendor:Ka,updateVendor:Qa,deleteVendor:Ga,fetchVendorsSucceeded:Wa,fetchVendorByIdSucceeded:Xa,addVendorSucceeded:Za,updateVendorSucceeded:el,deleteVendorSucceeded:tl,failed:pt,clearCurrentVendor:hc}=ts.actions,rl=ts.reducer,sl={transactionsList:[],currentTransaction:null,loading:!1,error:null},rs=Ee({name:"transactions",initialState:sl,reducers:{fetchTransactions(t){t.loading=!0,t.error=null},fetchTransactionById(t){t.loading=!0,t.error=null},createTransaction(t){t.loading=!0,t.error=null},updateTransactionStatus(t){t.loading=!0,t.error=null},processRefund(t){t.loading=!0,t.error=null},restoreProductStock(t,r){},fetchTransactionsSucceeded(t,r){t.loading=!1,t.transactionsList=r.payload},fetchTransactionByIdSucceeded(t,r){t.loading=!1,t.currentTransaction=r.payload},createTransactionSucceeded(t,r){t.loading=!1,t.transactionsList.push(r.payload)},updateTransactionStatusSucceeded(t,r){t.loading=!1;const s=t.transactionsList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.transactionsList[s]={...t.transactionsList[s],status:r.payload.status}),t.currentTransaction&&t.currentTransaction.id===r.payload.id&&(t.currentTransaction.status=r.payload.status)},processRefundSucceeded(t,r){t.loading=!1;const s=t.transactionsList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.transactionsList[s]={...t.transactionsList[s],...r.payload}),t.currentTransaction&&t.currentTransaction.id===r.payload.id&&(t.currentTransaction={...t.currentTransaction,...r.payload})},failed(t,r){t.loading=!1,t.error=r.payload},clearCurrentTransaction(t){t.currentTransaction=null}}}),{fetchTransactions:ss,fetchTransactionById:al,createTransaction:ll,updateTransactionStatus:nl,processRefund:as,restoreProductStock:il,fetchTransactionsSucceeded:ol,fetchTransactionByIdSucceeded:cl,createTransactionSucceeded:dl,updateTransactionStatusSucceeded:ul,processRefundSucceeded:ml,failed:ht,clearCurrentTransaction:xc}=rs.actions,pl=rs.reducer,hl={couponsList:[],currentCoupon:null,loading:!1,error:null},ls=Ee({name:"coupons",initialState:hl,reducers:{fetchCoupons(t){t.loading=!0,t.error=null},fetchCouponById(t){t.loading=!0,t.error=null},addCoupon(t){t.loading=!0,t.error=null},updateCoupon(t){t.loading=!0,t.error=null},deleteCoupon(t){t.loading=!0,t.error=null},validateCoupon(t){t.loading=!0,t.error=null},fetchCouponsSucceeded(t,r){t.loading=!1,t.couponsList=r.payload},fetchCouponByIdSucceeded(t,r){t.loading=!1,t.currentCoupon=r.payload},addCouponSucceeded(t,r){t.loading=!1,t.couponsList.push(r.payload)},updateCouponSucceeded(t,r){t.loading=!1;const s=t.couponsList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.couponsList[s]=r.payload),t.currentCoupon&&t.currentCoupon.id===r.payload.id&&(t.currentCoupon=r.payload)},deleteCouponSucceeded(t,r){t.loading=!1,t.couponsList=t.couponsList.filter(s=>s.id!==r.payload.id)},validateCouponSucceeded(t,r){t.loading=!1},failed(t,r){t.loading=!1,t.error=r.payload},clearCurrentCoupon(t){t.currentCoupon=null}}}),{fetchCoupons:ns,fetchCouponById:xl,addCoupon:is,updateCoupon:mr,deleteCoupon:pr,validateCoupon:yl,fetchCouponsSucceeded:gl,fetchCouponByIdSucceeded:fl,addCouponSucceeded:jl,updateCouponSucceeded:bl,deleteCouponSucceeded:vl,validateCouponSucceeded:Sl,failed:lt,clearCurrentCoupon:yc}=ls.actions,wl=ls.reducer,Cl={taxesList:[],loading:!1,error:null},os=Ee({name:"taxes",initialState:Cl,reducers:{fetchTaxes(t){t.loading=!0,t.error=null},addTax(t){t.loading=!0,t.error=null},updateTax(t){t.loading=!0,t.error=null},deleteTax(t){t.loading=!0,t.error=null},fetchTaxesSucceeded(t,r){t.loading=!1,t.taxesList=r.payload},addTaxSucceeded(t,r){t.loading=!1,t.taxesList.push(r.payload)},updateTaxSucceeded(t,r){t.loading=!1;const s=t.taxesList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.taxesList[s]=r.payload)},deleteTaxSucceeded(t,r){t.loading=!1,t.taxesList=t.taxesList.filter(s=>s.id!==r.payload.id)},failed(t,r){t.loading=!1,t.error=r.payload}}}),{fetchTaxes:cs,addTax:ds,updateTax:kt,deleteTax:hr,fetchTaxesSucceeded:Nl,addTaxSucceeded:kl,updateTaxSucceeded:Tl,deleteTaxSucceeded:Il,failed:Lt}=os.actions,Pl=os.reducer,Al={purchaseOrdersList:[],currentPurchaseOrder:null,loading:!1,error:null},us=Ee({name:"purchaseOrders",initialState:Al,reducers:{fetchPurchaseOrders(t){t.loading=!0,t.error=null},fetchPurchaseOrderById(t){t.loading=!0,t.error=null},addPurchaseOrder(t){t.loading=!0,t.error=null},updatePurchaseOrder(t){t.loading=!0,t.error=null},deletePurchaseOrder(t){t.loading=!0,t.error=null},updatePurchaseOrderStatus(t){t.loading=!0,t.error=null},receiveGoods(t){t.loading=!0,t.error=null},fetchPurchaseOrdersSucceeded(t,r){t.loading=!1,t.purchaseOrdersList=r.payload},fetchPurchaseOrderByIdSucceeded(t,r){t.loading=!1,t.currentPurchaseOrder=r.payload},addPurchaseOrderSucceeded(t,r){t.loading=!1,t.purchaseOrdersList.push(r.payload)},updatePurchaseOrderSucceeded(t,r){t.loading=!1;const s=t.purchaseOrdersList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.purchaseOrdersList[s]=r.payload),t.currentPurchaseOrder&&t.currentPurchaseOrder.id===r.payload.id&&(t.currentPurchaseOrder=r.payload)},deletePurchaseOrderSucceeded(t,r){t.loading=!1,t.purchaseOrdersList=t.purchaseOrdersList.filter(s=>s.id!==r.payload.id)},updatePurchaseOrderStatusSucceeded(t,r){t.loading=!1;const s=t.purchaseOrdersList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.purchaseOrdersList[s]={...t.purchaseOrdersList[s],status:r.payload.status}),t.currentPurchaseOrder&&t.currentPurchaseOrder.id===r.payload.id&&(t.currentPurchaseOrder.status=r.payload.status)},receiveGoodsSucceeded(t,r){t.loading=!1;const s=t.purchaseOrdersList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.purchaseOrdersList[s]={...t.purchaseOrdersList[s],...r.payload}),t.currentPurchaseOrder&&t.currentPurchaseOrder.id===r.payload.id&&(t.currentPurchaseOrder={...t.currentPurchaseOrder,...r.payload})},failed(t,r){t.loading=!1,t.error=r.payload},clearCurrentPurchaseOrder(t){t.currentPurchaseOrder=null}}}),{fetchPurchaseOrders:Dl,fetchPurchaseOrderById:El,addPurchaseOrder:$l,updatePurchaseOrder:Ll,deletePurchaseOrder:Rl,updatePurchaseOrderStatus:Ml,receiveGoods:Ol,fetchPurchaseOrdersSucceeded:Bl,fetchPurchaseOrderByIdSucceeded:_l,addPurchaseOrderSucceeded:Fl,updatePurchaseOrderSucceeded:Ul,deletePurchaseOrderSucceeded:Vl,updatePurchaseOrderStatusSucceeded:zl,receiveGoodsSucceeded:Hl,failed:We,clearCurrentPurchaseOrder:gc}=us.actions,ql=us.reducer,Jl={rawMaterialsList:[],loading:!1,error:null},ms=Ee({name:"rawMaterials",initialState:Jl,reducers:{fetchRawMaterials(t,r){t.loading=!0,t.error=null},addRawMaterials(t,r){t.loading=!0,t.error=null},updateRawMaterials(t,r){t.loading=!0,t.error=null},deleteRawMaterials(t,r){t.loading=!0,t.error=null},updateStock(t){t.loading=!0,t.error=null},addRawMaterialsSucceeded(t,r){t.loading=!1,t.rawMaterialsList.push(r.payload.materialData)},updateRawMaterialsSucceeded(t,r){t.loading=!1,t.rawMaterialsList=t.rawMaterialsList.map(s=>s.id===r.payload.id?{...s,...r.payload.materialData}:s)},deleteRawMaterialsSucceeded(t,r){t.loading=!1,t.rawMaterialsList=t.rawMaterialsList.filter(s=>s.id!==r.payload.materialId)},fetchRawMaterialsSucceeded(t,r){t.loading=!1,t.rawMaterialsList=r.payload},updateStockSucceeded(t,r){t.loading=!1;const s=t.rawMaterialsList.findIndex(l=>l.id===r.payload.id);s!==-1&&(t.rawMaterialsList[s]={...t.rawMaterialsList[s],stockQuantity:r.payload.stockQuantity})},failed(t,r){t.loading=!1,t.error=r.payload}}}),{fetchRawMaterials:Sr,addRawMaterials:ps,updateRawMaterials:hs,deleteRawMaterials:xs,fetchRawMaterialsSucceeded:Yl,addRawMaterialsSucceeded:Kl,updateRawMaterialsSucceeded:Ql,deleteRawMaterialsSucceeded:Gl,updateStock:Wl,updateStockSucceeded:Xl,failed:xt}=ms.actions,Zl=ms.reducer,en={auditList:[],loading:!1,error:null},ys=Ee({name:"audit",initialState:en,reducers:{fetchAudit(t){t.loading=!0,t.error=null},fetchAuditById(t){t.loading=!0,t.error=null},fetchAuditByUser(t){t.loading=!0,t.error=null},fetchAuditByModule(t){t.loading=!0,t.error=null},fetchAuditSucceeded(t,r){t.loading=!1,t.auditList=r.payload},fetchAuditByIdSucceeded(t,r){t.loading=!1},fetchAuditByUserSucceeded(t,r){t.loading=!1,t.auditList=r.payload},fetchAuditByModuleSucceeded(t,r){t.loading=!1,t.auditList=r.payload},failed(t,r){t.loading=!1,t.error=r.payload}}}),{fetchAudit:gs,fetchAuditById:tn,fetchAuditByUser:rn,fetchAuditByModule:sn,fetchAuditSucceeded:an,fetchAuditByIdSucceeded:ln,fetchAuditByUserSucceeded:nn,fetchAuditByModuleSucceeded:on,failed:Rt}=ys.actions,cn=ys.reducer,Rr=[{key:"auth",selector:t=>t.auth.error,clear:fr},{key:"products",selector:t=>t.products.error,clear:at},{key:"users",selector:t=>t.users.error,clear:Et},{key:"categories",selector:t=>t.categories.error,clear:$t},{key:"vendors",selector:t=>t.vendors.error,clear:pt},{key:"transactions",selector:t=>t.transactions.error,clear:ht},{key:"coupons",selector:t=>t.coupons.error,clear:lt},{key:"taxes",selector:t=>t.taxes.error,clear:Lt},{key:"purchaseOrders",selector:t=>t.purchaseOrders.error,clear:We},{key:"rawMaterials",selector:t=>t.rawMaterials.error,clear:xt},{key:"audit",selector:t=>t.audit.error,clear:Rt}];function dn(){const t=ke(),r=Rr.map(({selector:i})=>ie(i)),s=h.useRef(r),l=ie(i=>i.auth.sessionExpiredMessage),a=h.useRef(l);return h.useEffect(()=>{r.forEach((i,o)=>{if(i&&s.current[o]!==i&&typeof i=="string"&&i.trim()!==""){ct.error({message:"Error",description:i,duration:3});const n=Rr[o].clear;n&&t(n(null))}}),s.current=r},[r,t]),h.useEffect(()=>{l&&l!==a.current&&typeof l=="string"&&l.trim()!==""&&ct.warning({message:"Session Expired",description:l,duration:5,placement:"top"}),a.current=l},[l]),null}function un(){const t=ie(s=>s.notifications.notifications),r=h.useRef(new Set);return h.useEffect(()=>{t.forEach(s=>{if(s.showUINotification&&!r.current.has(s.id)){r.current.add(s.id);const l={message:s.title,description:s.message,placement:"topRight",duration:s.persistent?0:4.5,onClick:s.onClick,key:s.id};s.type==="error"?ct.error(l):s.type==="warning"?ct.warning(l):s.type==="success"?ct.success(l):ct.info(l)}})},[t]),null}const{Text:mn,Paragraph:pn}=de;class hn extends Ur.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){this.setState({errorInfo:s}),console.error("Error caught by ErrorBoundary:",r,s),window.errorReporting&&window.errorReporting.captureException(r,{extra:s})}render(){if(this.state.hasError){const r=this.state.error?.message?.toLowerCase().includes("auth")||this.state.error?.message?.toLowerCase().includes("login")||this.state.error?.message?.toLowerCase().includes("permission")||this.state.error?.message?.toLowerCase().includes("unauthorized")||this.state.error?.message?.toLowerCase().includes("token");return e.jsx(As,{status:"error",title:r?"Authentication Error":"Something went wrong",subTitle:e.jsxs("div",{children:[e.jsx(pn,{children:r?"There was a problem with your authentication. This could be due to an expired session or insufficient permissions.":"We encountered an unexpected error. The development team has been notified."}),this.props.showErrorDetails&&e.jsx("div",{className:"mt-4 p-4 bg-gray-100 rounded text-left overflow-auto max-h-40",children:e.jsx(mn,{code:!0,children:this.state.error?.toString()})})]}),extra:[e.jsx(xn,{isAuthError:r,onReset:()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onReset?.()}},"actions")]})}return this.props.children}}function xn({isAuthError:t,onReset:r}){const s=ke(),l=()=>{s(Kt())};return e.jsxs("div",{className:"space-x-4",children:[t?e.jsx(pe,{type:"primary",onClick:l,icon:e.jsx(v,{name:"logout"}),children:"Log Out and Try Again"}):e.jsx(pe,{type:"primary",onClick:r,icon:e.jsx(v,{name:"refresh"}),children:"Try Again"}),e.jsx(pe,{onClick:()=>window.location.href="/",icon:e.jsx(v,{name:"home"}),children:"Go to Homepage"})]})}function yn({children:t,showErrorDetails:r=!1}){return e.jsx(hn,{showErrorDetails:r,children:t})}const O=(t,r=null)=>{try{const s=localStorage.getItem("vcare_branding");if(!s)return r;const a=JSON.parse(s)[t];return a&&typeof a=="object"?a.metaColor&&a.metaColor.originalInput?a.metaColor.originalInput:a.hex?a.hex:r:a||r}catch(s){return console.warn("Error parsing branding data:",s),r}},gn=h.lazy(()=>Be(()=>import("./pos-components-BLBMe5sX.js").then(t=>t.P),__vite__mapDeps([0,1,2,3,4,5])).then(t=>({default:t.ProductGrid}))),fn=h.lazy(()=>Be(()=>import("./pos-components-BLBMe5sX.js").then(t=>t.C),__vite__mapDeps([0,1,2,3,4,5])).then(t=>({default:t.Cart}))),jn=h.lazy(()=>Be(()=>import("./product-components-Cy8W9xav.js"),__vite__mapDeps([6,1,2,3,4,5,7])).then(t=>({default:t.ProductManagement}))),bn=h.lazy(()=>Be(()=>Promise.resolve().then(()=>jo),void 0).then(t=>({default:t.RawMaterialManagement}))),vn=h.lazy(()=>Be(()=>Promise.resolve().then(()=>wo),void 0).then(t=>({default:t.TransactionHistory}))),Sn=h.lazy(()=>Be(()=>import("./report-components-C9yWHu8M.js"),__vite__mapDeps([8,1,2,3,4,5,7])).then(t=>({default:t.ReportsOverview}))),wn=h.lazy(()=>Be(()=>Promise.resolve().then(()=>Vo),void 0).then(t=>({default:t.SettingsPanel}))),Cn=h.lazy(()=>Be(()=>Promise.resolve().then(()=>Jo),void 0).then(t=>({default:t.CouponManagement}))),Nn=h.lazy(()=>Be(()=>Promise.resolve().then(()=>Go),void 0).then(t=>({default:t.TaxManagement}))),kn=h.lazy(()=>Be(()=>Promise.resolve().then(()=>ec),void 0).then(t=>({default:t.UserManagement}))),Tn=h.lazy(()=>Be(()=>Promise.resolve().then(()=>sc),void 0).then(t=>({default:t.AuditTrail}))),In=h.lazy(()=>Be(()=>import("./purchase-components-PHSaAAl9.js"),__vite__mapDeps([9,1,2,3,4,5,7])).then(t=>({default:t.PurchaseOrderManagement}))),Re=()=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px"},children:e.jsx(Es,{size:"large",tip:"Loading..."})}),{Sider:Pn,Content:An}=It;function Dn(){const t=ke(),{isAuthenticated:r}=ie(s=>s.auth);return h.useEffect(()=>{const s=()=>{const a=localStorage.getItem("vcare_token");if(a&&r)try{const o=JSON.parse(atob(a.split(".")[1])).exp*1e3;Date.now()>o-3e5&&t(Qt())}catch(i){console.error("Error validating token:",i)}};s();const l=setInterval(s,5*60*1e3);return()=>clearInterval(l)},[t,r]),null}function En(){const{isAuthenticated:t}=ie(y=>y.auth),[r,s]=h.useState("pos"),[l,a]=h.useState(!0);if(!t)return e.jsx(ta,{});const i=()=>({pos:e.jsx(_e,{module:"pos",action:"view",children:e.jsxs("div",{className:"flex h-full gap-6",children:[e.jsx("div",{className:"flex-1","data-tour":"product-grid",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(gn,{collapsed:l})})}),e.jsx("div",{className:"w-96","data-tour":"cart",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(fn,{})})})]})}),products:e.jsx(_e,{module:"products",action:"view",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(jn,{})})}),"raw-materials":e.jsx(_e,{module:"raw-materials",action:"view",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(bn,{})})}),transactions:e.jsx(_e,{module:"transactions",action:"view",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(vn,{})})}),reports:e.jsx(_e,{module:"reports",action:"view",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(Sn,{})})}),coupons:e.jsx(_e,{module:"coupons",action:"view",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(Cn,{})})}),tax:e.jsx(_e,{module:"tax",action:"view",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(Nn,{})})}),"purchase-orders":e.jsx(_e,{module:"purchase-orders",action:"view",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(In,{})})}),"user-management":e.jsx(_e,{module:"user-management",action:"view",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(kn,{})})}),"audit-trail":e.jsx(_e,{module:"audit-trail",action:"view",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(Tn,{})})}),settings:e.jsx(_e,{module:"settings",action:"view",children:e.jsx(h.Suspense,{fallback:e.jsx(Re,{}),children:e.jsx(wn,{})})})})[r]||e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"material-icons text-6xl text-gray-300 mb-4",children:"error_outline"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600",children:"Page not found"})]})}),o=l?80:280,n=`calc(100% - ${o}px)`,m={minHeight:"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"},b={background:"#ffffff",borderRight:"1px solid #e5e7eb",boxShadow:"2px 0 8px rgba(0, 0, 0, 0.06)",position:"fixed",height:"100vh",left:0,top:0,bottom:0,zIndex:100,transition:"all 0.2s"},j={background:"#ffffff",borderBottom:"1px solid #e5e7eb",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",padding:"0 24px",position:"fixed",width:n,right:0,top:0,zIndex:50,transition:"all 0.2s"},c={padding:"24px",marginTop:"64px",marginBottom:"64px",marginLeft:`${o}px`,minHeight:"calc(100vh - 128px)",overflow:"auto",transition:"all 0.2s"};return e.jsxs(e.Fragment,{children:[e.jsx(Dn,{}),e.jsxs(It,{style:m,children:[e.jsx(Pn,{width:o,style:b,collapsible:!0,collapsed:l,onCollapse:a,trigger:null,children:e.jsx(ya,{activeTab:r,onTabChange:s,collapsed:l,onCollapse:a})}),e.jsxs(It,{children:[e.jsx(ha,{style:j,collapsed:l,onCollapse:a,activeTab:r,onTabChange:s}),e.jsx(An,{style:c,children:i()})]})]})]})}function $n(){const t=()=>{const r=ke(),{rawMaterialsList:s}=ie(i=>i.rawMaterials),{productsList:l}=ie(i=>i.products),{settings:a}=jr();return h.useEffect(()=>{localStorage.getItem("vcare_token")&&r(Qt())},[r]),h.useEffect(()=>{r(Tt());const i=setInterval(()=>{r(Tt())},a.stockCheckInterval);return()=>clearInterval(i)},[r,a.stockCheckInterval]),h.useEffect(()=>{(s.length>0||l.length>0)&&r(Tt())},[s,l,r]),e.jsxs(yn,{showErrorDetails:!1,children:[e.jsx(un,{}),e.jsx(En,{})]})};return e.jsx(Ds,{theme:{algorithm:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?Tr.darkAlgorithm:Tr.defaultAlgorithm,token:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryText:O("primaryTextColor","#ffffff"),borderRadius:8,colorBgContainer:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"#141414":"#ffffff",colorBgLayout:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"#000000":"#f8fafc",fontFamily:`"${O("fontFamily","Inter")}", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,fontSize:14,lineHeight:1.5,colorText:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"#ffffff":"#1f2937",colorTextSecondary:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"#a3a3a3":"#6b7280",boxShadow:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)",boxShadowSecondary:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.1)",colorSuccess:O("secondaryColor","#52c41a"),colorSuccessText:O("secondaryTextColor","#ffffff"),colorWarning:O("accentColor","#fa8c16"),colorWarningText:O("accentTextColor","#ffffff")},components:{Layout:{headerBg:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"#141414":"#ffffff",siderBg:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"#141414":"#ffffff",bodyBg:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"#000000":"#f8fafc",headerHeight:64,footerBg:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"#141414":"#ffffff"},Card:{borderRadiusLG:12,boxShadowTertiary:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"0 1px 3px rgba(0, 0, 0, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)",colorBgContainer:localStorage.getItem("vcare_branding")&&O("darkModeSupport")?"#141414":"#ffffff"},Button:{borderRadius:8,controlHeight:40,fontWeight:500,colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryHover:`${O("primaryColor","#0E72BD")}E6`,colorPrimaryActive:`${O("primaryColor","#0E72BD")}CC`,colorPrimaryTextHover:O("primaryTextColor","#ffffff"),colorPrimaryTextActive:O("primaryTextColor","#ffffff")},Input:{borderRadius:8,controlHeight:40,colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryHover:`${O("primaryColor","#0E72BD")}E6`},Select:{borderRadius:8,controlHeight:40,colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryHover:`${O("primaryColor","#0E72BD")}E6`},Table:{borderRadiusLG:12,headerBg:(()=>{const r=O("primaryColor","#0E72BD"),s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),a=parseInt(r.slice(5,7),16);return`rgba(${s}, ${l}, ${a}, 0.04)`})()},Modal:{borderRadiusLG:16},Menu:{itemBorderRadius:8,itemMarginInline:4,itemMarginBlock:2,colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryHover:`${O("primaryColor","#0E72BD")}E6`,colorItemBgSelected:(()=>{const r=O("primaryColor","#0E72BD"),s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),a=parseInt(r.slice(5,7),16);return`rgba(${s}, ${l}, ${a}, 0.1)`})()},Checkbox:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryBorder:O("primaryColor","#0E72BD")},Radio:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryHover:`${O("primaryColor","#0E72BD")}E6`},Switch:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryHover:`${O("primaryColor","#0E72BD")}E6`},Slider:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryBorder:O("primaryColor","#0E72BD")},Tabs:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryActive:`${O("primaryColor","#0E72BD")}CC`},Tag:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryBg:`${O("primaryColor","#0E72BD")}19`,colorPrimaryBorderHover:O("primaryColor","#0E72BD")},Progress:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryBg:`${O("primaryColor","#0E72BD")}19`},Pagination:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryHover:`${O("primaryColor","#0E72BD")}E6`,colorPrimaryBorder:O("primaryColor","#0E72BD")},DatePicker:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryHover:`${O("primaryColor","#0E72BD")}E6`,colorPrimaryBorder:O("primaryColor","#0E72BD")},TimePicker:{colorPrimary:O("primaryColor","#0E72BD"),colorPrimaryHover:`${O("primaryColor","#0E72BD")}E6`,colorPrimaryBorder:O("primaryColor","#0E72BD")},Tooltip:{colorBgDefault:O("primaryColor","#0E72BD"),colorTextLightSolid:"#ffffff"},Notification:{colorBgSuccess:O("secondaryColor","#52c41a"),colorBgInfo:O("primaryColor","#0E72BD"),colorBgWarning:O("accentColor","#fa8c16")},Message:{colorBgSuccess:O("secondaryColor","#52c41a"),colorBgInfo:O("primaryColor","#0E72BD"),colorBgWarning:O("accentColor","#fa8c16")}}},children:e.jsxs(Zs,{children:[e.jsx(dn,{}),e.jsx(t,{})]})})}const Ln={cart:[]},fs=Ee({name:"cart",initialState:Ln,reducers:{addToCart(t,r){const{product:s,quantity:l=1,selectedColorId:a,selectedSize:i,addons:o}=r.payload,n=t.cart.findIndex(m=>m.product.id===s.id&&m.selectedColorId===a&&m.selectedSize===i);n!==-1?t.cart[n].quantity+=l:t.cart.push({product:s,quantity:l,selectedColorId:a,selectedSize:i,addons:o||[]})},removeFromCart(t,r){const{productId:s,selectedColorId:l,selectedSize:a}=r.payload;t.cart=t.cart.filter(i=>!(i.product.id===s&&i.selectedColorId===l&&i.selectedSize===a))},updateQuantity(t,r){const{productId:s,selectedColorId:l,selectedSize:a,quantity:i}=r.payload,o=t.cart.find(n=>n.product.id===s&&n.selectedColorId===l&&n.selectedSize===a);o&&(o.quantity=i)},clearCart(t){t.cart=[]}}}),{addToCart:fc,removeFromCart:jc,updateQuantity:bc,clearCart:vc}=fs.actions,Rn=fs.reducer,Mn=_s({rawMaterials:Zl,products:Pa,transactions:pl,auth:Xs,coupons:wl,taxes:Pl,categories:Ha,users:Ra,audit:cn,purchaseOrders:ql,vendors:rl,cart:Rn,notifications:ma}),On="http://167.71.207.88:3000/api",Bn=5e4,Qe=(t,r=null,s=null)=>{const l=new Error(t);return l.statusCode=r,l.isApiError=!0,s&&(l.originalError=s),l},_n=()=>{localStorage.removeItem("vcare_token"),localStorage.removeItem("vcare_token_exp"),console.warn("Authentication failed - credentials cleared")};async function F(t,r={}){const s=localStorage.getItem("vcare_token");try{const l={"Content-Type":"application/json",...r.headers};s&&(l.Authorization=`Bearer ${s}`);const a=new AbortController,i=setTimeout(()=>a.abort(),Bn),o=await fetch(`${On}${t}`,{...r,headers:l,signal:a.signal});if(clearTimeout(i),o.status===401)throw _n(),Qe("Authentication failed. Please log in again.",401);const n=await o.json();if(!o.ok)throw console.error(`API request failed for ${t}:`,n),Qe(n.message||"Request failed",o.status,n);return n}catch(l){throw l.name==="AbortError"?Qe("Request timeout",408):l instanceof TypeError&&l.message==="Failed to fetch"?Qe("Network error - unable to connect to server",0):l.isApiError?l:(console.error(`API request error for ${t}:`,l),Qe(l.message||"Something went wrong",null,l))}}const Gt={login:async(t,r)=>{try{return await F("/auth/login",{method:"POST",body:JSON.stringify({username:t,password:r})})}catch(s){throw Qe("Login failed. Please check your credentials and try again.",s.statusCode,s)}},logout:async()=>{try{return await F("/auth/logout",{method:"POST"}),{success:!0}}catch(t){return console.error("API logout failed:",t),{success:!0}}},getCurrentUser:async()=>{try{return await F("/auth/me")}catch(t){throw Qe("Failed to get current user. Please log in again.",t.statusCode,t)}},changePassword:async(t,r)=>{try{return await F("/auth/change-password",{method:"PUT",body:JSON.stringify({currentPassword:t,newPassword:r})})}catch(s){throw Qe("Failed to change password. Please try again.",s.statusCode,s)}}},yt={getAll:async()=>F("/products"),getById:async t=>F(`/products/${t}`),create:async t=>F("/products",{method:"POST",body:JSON.stringify(t)}),update:async(t,r)=>F(`/products/${t}`,{method:"PUT",body:JSON.stringify(r)}),delete:async t=>F(`/products/${t}`,{method:"DELETE"}),updateStock:async(t,r,s,l)=>F(`/products/${t}/stock`,{method:"PUT",body:JSON.stringify({quantity:r,operation:s,selectedSize:l})})},Mt={getAll:async()=>F("/raw-materials"),getById:async t=>F(`/raw-materials/${t}`),create:async t=>F("/raw-materials",{method:"POST",body:JSON.stringify(t)}),update:async(t,r)=>F(`/raw-materials/${t}`,{method:"PUT",body:JSON.stringify(r)}),delete:async t=>F(`/raw-materials/${t}`,{method:"DELETE"}),updateStock:async(t,r,s)=>F(`/raw-materials/${t}/stock`,{method:"PUT",body:JSON.stringify({quantity:r,operation:s})})},Ot={getAll:async()=>F("/transactions"),getById:async t=>F(`/transactions/${t}`),create:async t=>F("/transactions",{method:"POST",body:JSON.stringify(t)}),updateStatus:async(t,r)=>F(`/transactions/${t}/status`,{method:"PUT",body:JSON.stringify({status:r})}),processRefund:async(t,r)=>F(`/transactions/${t}/refund`,{method:"POST",body:JSON.stringify(r)})},gt={getAll:async()=>F("/coupons"),getById:async t=>F(`/coupons/${t}`),create:async t=>F("/coupons",{method:"POST",body:JSON.stringify(t)}),update:async(t,r)=>F(`/coupons/${t}`,{method:"PUT",body:JSON.stringify(r)}),delete:async t=>F(`/coupons/${t}`,{method:"DELETE"}),validate:async(t,r)=>F(`/coupons/validate/${t}?amount=${r}`)},Wt={getAll:async()=>F("/taxes"),getById:async t=>F(`/taxes/${t}`),create:async t=>F("/taxes",{method:"POST",body:JSON.stringify(t)}),update:async(t,r)=>F(`/taxes/${t}`,{method:"PUT",body:JSON.stringify(r)}),delete:async t=>F(`/taxes/${t}`,{method:"DELETE"})},Xt={getAll:async()=>F("/categories"),getById:async t=>F(`/categories/${t}`),create:async t=>F("/categories",{method:"POST",body:JSON.stringify(t)}),update:async(t,r)=>F(`/categories/${t}`,{method:"PUT",body:JSON.stringify(r)}),delete:async t=>F(`/categories/${t}`,{method:"DELETE"})},Zt={getAll:async()=>F("/users"),getById:async t=>F(`/users/${t}`),create:async t=>F("/users",{method:"POST",body:JSON.stringify(t)}),update:async(t,r)=>F(`/users/${t}`,{method:"PUT",body:JSON.stringify(r)}),delete:async t=>F(`/users/${t}`,{method:"DELETE"})},er={getAll:async()=>F("/audit"),getById:async t=>F(`/audit/${t}`),getByUser:async t=>F(`/audit/user/${t}`),getByModule:async t=>F(`/audit/module/${t}`)},nt={getAll:async()=>F("/purchase-orders"),getById:async t=>F(`/purchase-orders/${t}`),create:async t=>F("/purchase-orders",{method:"POST",body:JSON.stringify(t)}),update:async(t,r)=>F(`/purchase-orders/${t}`,{method:"PUT",body:JSON.stringify(r)}),delete:async t=>F(`/purchase-orders/${t}`,{method:"DELETE"}),updateStatus:async(t,r,s)=>F(`/purchase-orders/${t}/status`,{method:"PUT",body:JSON.stringify({status:r,notes:s})}),receiveGoods:async(t,r)=>F(`/purchase-orders/${t}/receive`,{method:"POST",body:JSON.stringify(r)})},Bt={getAll:async()=>F("/vendors"),getById:async t=>F(`/vendors/${t}`),create:async t=>F("/vendors",{method:"POST",body:JSON.stringify(t)}),update:async(t,r)=>F(`/vendors/${t}`,{method:"PUT",body:JSON.stringify(r)}),delete:async t=>F(`/vendors/${t}`,{method:"DELETE"})};function*Fn(t){try{const r=yield H(Mt.getAll);yield S(Yl(r))}catch(r){yield S(xt(r.message))}}function*Un(t){try{const r=yield H(Mt.create,t.payload.materialData);yield S(Kl({materialData:r}))}catch(r){yield S(xt(r.message))}}function*Vn(t){try{const{payload:r}=t,s=yield H(Mt.update,r.materialData.id,r.materialData);yield S(Ql({id:r.materialData.id,materialData:s})),console.log("updateRawMaterials")}catch(r){console.log("error update raw meterial",r),yield S(xt(r.message))}}function*zn(t){try{const r=yield H(Mt.delete,t.payload.materialId);yield S(Gl({materialId:t.payload.materialId,message:r.message}))}catch(r){yield S(xt(r.message))}}function*Hn(t){try{const{id:r,quantity:s,operation:l}=t.payload,a=yield H(Mt.updateStock,r,s,l);yield S(Xl(a))}catch(r){yield S(xt(r.message))}}function*qn(){yield z(Sr.type,Fn),yield z(ps.type,Un),yield z(hs.type,Vn),yield z(xs.type,zn),yield z(Wl.type,Hn)}function*Jn(){try{const t=yield H(yt.getAll);yield S(wa(t))}catch(t){yield S(at(t.message))}}function*Yn(t){try{const r=yield H(yt.getById,t.payload.id);yield S(Ca(r))}catch(r){yield S(at(r.message))}}function*Kn(t){try{const r=yield H(yt.create,t.payload);yield S(Na(r))}catch(r){yield S(at(r.message))}}function*Qn(t){try{const r=yield H(yt.update,t.payload.id,t.payload);yield S(ka(r))}catch(r){yield S(at(r.message))}}function*Gn(t){try{yield H(yt.delete,t.payload.productId),yield S(Ta({productId:t.payload.productId}))}catch(r){yield S(at(r.message))}}function*Wn(t){try{const r=yield H(yt.updateStock,t.payload.id,t.payload.quantity,t.payload.operation,t.payload.selectedSize);yield S(Ia(r))}catch(r){yield S(at(r.message))}}function*Xn(){yield z(br.type,Jn),yield z(fa.type,Yn),yield z(ja.type,Kn),yield z(ba.type,Qn),yield z(va.type,Gn),yield z(Sa.type,Wn)}function*Zn(){try{const t=yield H(Ot.getAll);yield S(ol(t))}catch(t){yield S(ht(t.message))}}function*ei(t){try{const r=yield H(Ot.getById,t.payload.id);yield S(cl(r))}catch(r){yield S(ht(r.message))}}function*ti(t){try{const r=yield H(Ot.create,t.payload);yield S(dl(r)),yield Vr([S(br()),S(Sr())])}catch(r){yield S(ht(r.message))}}function*ri(t){try{const r=yield H(Ot.updateStatus,t.payload.id,t.payload.status);yield S(ul(r))}catch(r){yield S(ht(r.message))}}function*si(t){try{const r=yield H(Ot.processRefund,t.payload.id,t.payload.refundData);yield S(ml(r))}catch(r){yield S(ht(r.message))}}function*ai(){yield z(ss.type,Zn),yield z(al.type,ei),yield z(ll.type,ti),yield z(nl.type,ri),yield z(as.type,si)}function js(t){try{const r=t.split(".")[1];if(!r)return null;const s=r.replace(/-/g,"+").replace(/_/g,"/"),l=decodeURIComponent(atob(s).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(l)}catch(r){return console.error("Failed to decode token:",r),null}}function bs(t,r=300){if(!t)return!0;const s=js(t);if(!s||!s.exp)return!0;const l=s.exp*1e3;return Date.now()>l-r*1e3}function*li(t){try{const r=yield H(Gt.login,t.payload.username,t.payload.password);if(r.token){localStorage.setItem("vcare_token",r.token);const s=js(r.token);s&&s.exp&&localStorage.setItem("vcare_token_exp",s.exp)}yield S(Ks(r))}catch(r){yield S(gr(r.message||"Login failed. Please try again."))}}function*ni(){try{yield H(Gt.logout)}catch(t){console.error("Logout API error:",t)}finally{localStorage.removeItem("vcare_token"),localStorage.removeItem("vcare_token_exp"),yield S(Qs())}}function*ii(){try{const t=localStorage.getItem("vcare_token");if(!t||bs(t)){yield S(dr("Your session has expired. Please log in again."));return}const r=yield H(Gt.getCurrentUser);yield S(Gs(r))}catch(t){t.statusCode===401?(localStorage.removeItem("vcare_token"),localStorage.removeItem("vcare_token_exp"),yield S(dr("Session expired. Please log in again."))):yield S(gr(t.message||"Failed to get current user."))}}function*oi(t){try{yield H(Gt.changePassword,t.payload.currentPassword,t.payload.newPassword),yield S(Ws())}catch(r){yield S(gr(r.message||"Failed to change password."))}}function*ci(){for(;;){if(yield Us(6e4),!(yield ot(s=>s.auth.isAuthenticated)))continue;const r=localStorage.getItem("vcare_token");r&&bs(r)&&(yield S(dr("Your session has expired. Please log in again.")))}}function*di(){yield z(Hr.type,li),yield z(Kt.type,ni),yield z(Qt.type,ii),yield z(qr.type,oi),yield Fs(ci)}function*ui(){try{const t=yield H(gt.getAll);yield S(gl(t))}catch(t){yield S(lt(t.message))}}function*mi(t){try{const r=yield H(gt.getById,t.payload.id);yield S(fl(r))}catch(r){yield S(lt(r.message))}}function*pi(t){try{const r=yield H(gt.create,t.payload);yield S(jl(r))}catch(r){yield S(lt(r.message))}}function*hi(t){try{const r=yield H(gt.update,t.payload.id,t.payload);yield S(bl(r))}catch(r){yield S(lt(r.message))}}function*xi(t){try{yield H(gt.delete,t.payload.id),yield S(vl({id:t.payload.id}))}catch(r){yield S(lt(r.message))}}function*yi(t){try{const r=yield H(gt.validate,t.payload.code,t.payload.amount);yield S(Sl(r))}catch(r){yield S(lt(r.message))}}function*gi(){yield z(ns.type,ui),yield z(xl.type,mi),yield z(is.type,pi),yield z(mr.type,hi),yield z(pr.type,xi),yield z(yl.type,yi)}function*fi(){try{const t=yield H(Wt.getAll);yield S(Nl(t))}catch(t){yield S(Lt(t.message))}}function*ji(t){try{const r=yield H(Wt.create,t.payload);yield S(kl(r))}catch(r){yield S(Lt(r.message))}}function*bi(t){try{const r=yield H(Wt.update,t.payload.id,t.payload);yield S(Tl(r))}catch(r){yield S(Lt(r.message))}}function*vi(t){try{yield H(Wt.delete,t.payload),yield S(Il({id:t.payload}))}catch(r){yield S(Lt(r.message))}}function*Si(){yield z(cs.type,fi),yield z(ds.type,ji),yield z(kt.type,bi),yield z(hr.type,vi)}function*wi(t){try{const r=yield H(Xt.getAll);yield S(Fa(r))}catch(r){yield S($t(r.message))}}function*Ci(t){try{const r=yield H(Xt.create,t.payload.categoryData);yield S(Ua({categoryData:r}))}catch(r){yield S($t(r.message))}}function*Ni(t){try{const{payload:r}=t,s=yield H(Xt.update,r.categoryData.id,r.categoryData);yield S(Va({id:r.categoryData.id,categoryData:s}))}catch(r){yield S($t(r.message))}}function*ki(t){try{const r=yield H(Xt.delete,t.payload.categoryId);yield S(za({categoryId:t.payload.categoryId,message:r.message}))}catch(r){yield S($t(r.message))}}function*Ti(){yield z(es.type,wi),yield z(Oa.type,Ci),yield z(Ba.type,Ni),yield z(_a.type,ki)}function*Ii(){try{const t=yield H(Zt.getAll);yield S(Da(t))}catch(t){yield S(Et(t.message))}}function*Pi(t){try{const r=yield H(Zt.create,t.payload.userData);yield S(Ea({userData:r}))}catch(r){yield S(Et(r.message))}}function*Ai(t){try{const r=yield H(Zt.update,t.payload.id,t.payload.userData);yield S($a({userData:r}))}catch(r){yield S(Et(r.message))}}function*Di(t){try{yield H(Zt.delete,t.payload.userId),yield S(La({userId:t.payload.userId}))}catch(r){yield S(Et(r.message))}}function*Ei(){yield z(Wr.type,Ii),yield z(Xr.type,Pi),yield z(vr.type,Ai),yield z(ur.type,Di)}function*$i(){try{const t=yield H(er.getAll);yield S(an(t))}catch(t){yield S(Rt(t.message))}}function*Li(t){try{const r=yield H(er.getById,t.payload.id);yield S(ln(r))}catch(r){yield S(Rt(r.message))}}function*Ri(t){try{const r=yield H(er.getByUser,t.payload.userId);yield S(nn(r))}catch(r){yield S(Rt(r.message))}}function*Mi(t){try{const r=yield H(er.getByModule,t.payload.module);yield S(on(r))}catch(r){yield S(Rt(r.message))}}function*Oi(){yield z(gs.type,$i),yield z(tn.type,Li),yield z(rn.type,Ri),yield z(sn.type,Mi)}function*Bi(){try{const t=yield H(nt.getAll);yield S(Bl(t))}catch(t){yield S(We(t.message))}}function*_i(t){try{const r=yield H(nt.getById,t.payload.id);yield S(_l(r))}catch(r){yield S(We(r.message))}}function*Fi(t){try{const r=yield H(nt.create,t.payload);yield S(Fl(r))}catch(r){yield S(We(r.message))}}function*Ui(t){try{const r=yield H(nt.update,t.payload.id,t.payload);yield S(Ul(r))}catch(r){yield S(We(r.message))}}function*Vi(t){try{yield H(nt.delete,t.payload.id),yield S(Vl({id:t.payload.id}))}catch(r){yield S(We(r.message))}}function*zi(t){try{const r=yield H(nt.updateStatus,t.payload.id,t.payload.status,t.payload.notes);yield S(zl(r))}catch(r){yield S(We(r.message))}}function*Hi(t){try{const r=yield H(nt.receiveGoods,t.payload.id,t.payload.grnData);yield S(Hl(r))}catch(r){yield S(We(r.message))}}function*qi(){yield z(Dl.type,Bi),yield z(El.type,_i),yield z($l.type,Fi),yield z(Ll.type,Ui),yield z(Rl.type,Vi),yield z(Ml.type,zi),yield z(Ol.type,Hi)}function*Ji(){try{const t=yield H(Bt.getAll);yield S(Wa(t))}catch(t){yield S(pt(t.message))}}function*Yi(t){try{const r=yield H(Bt.getById,t.payload.id);yield S(Xa(r))}catch(r){yield S(pt(r.message))}}function*Ki(t){try{const r=yield H(Bt.create,t.payload);yield S(Za(r))}catch(r){yield S(pt(r.message))}}function*Qi(t){try{const r=yield H(Bt.update,t.payload.id,t.payload);yield S(el(r))}catch(r){yield S(pt(r.message))}}function*Gi(t){try{yield H(Bt.delete,t.payload.id),yield S(tl({id:t.payload.id}))}catch(r){yield S(pt(r.message))}}function*Wi(){yield z(Ja.type,Ji),yield z(Ya.type,Yi),yield z(Ka.type,Ki),yield z(Qa.type,Qi),yield z(Ga.type,Gi)}const Xi=t=>t.rawMaterials.rawMaterialsList,Zi=t=>t.products.productsList,eo=t=>t.notifications.settings,to=t=>t.notifications.stockAlerts,ro=t=>t.notifications.notifications;function*so(){try{const t=yield ot(Xi),r=yield ot(Zi),s=yield ot(eo),l=yield ot(to),a=yield ot(ro);if(!s.enableStockAlerts)return;const i=[],o=new Date().toISOString(),n=new Set(a.map(j=>j.id));Array.isArray(t)&&t.forEach(j=>{const c=`STOCK-${j.id}`;if(j.stockQuantity<=0){const y={id:c,type:"critical",category:"raw-material",title:"Raw Material Out of Stock",message:`${j.name} is completely out of stock`,materialId:j.id,materialName:j.name,currentStock:j.stockQuantity,minimumStock:j.minimumStock,timestamp:o,navigateTo:"raw-materials"};i.push(y)}else if(j.stockQuantity<=j.minimumStock){const y={id:c,type:"warning",category:"raw-material",title:"Low Stock Alert",message:`${j.name} is running low (${j.stockQuantity} ${j.unit} remaining)`,materialId:j.id,materialName:j.name,currentStock:j.stockQuantity,minimumStock:j.minimumStock,timestamp:o,navigateTo:"raw-materials"};i.push(y)}}),Array.isArray(r)&&r.forEach(j=>{const c=`STOCK-PROD-${j.id}`;if(j.stock<=0){const y={id:c,type:"critical",category:"product",title:"Product Out of Stock",message:`${j.name} is out of stock`,productId:j.id,productName:j.name,currentStock:j.stock,timestamp:o,navigateTo:"products"};i.push(y)}else if(j.stock<=s.criticalStockThreshold){const y={id:c,type:"warning",category:"product",title:"Low Product Stock",message:`${j.name} is running low (${j.stock} units remaining)`,productId:j.id,productName:j.name,currentStock:j.stock,timestamp:o,navigateTo:"products"};i.push(y)}});const b=i.filter(j=>j.type==="critical").filter(j=>{const c=l.find(y=>y.id===j.id);return!c||c.type!=="critical"});for(const j of b){const c=`NOTIFICATION-${j.id}`;if(!n.has(c)){const y={id:c,type:"error",title:j.title,message:j.message,icon:"warning",persistent:!0,category:"stock-alert",navigateTo:j.navigateTo,timestamp:o,showUINotification:!0};yield S(Kr(y))}}yield S(aa({alerts:i,timestamp:o}))}catch(t){console.error("Error checking stock levels:",t),yield S(ua(`Failed to check stock levels: ${t.message}`))}}function*ao(){yield Vs(Tt.type,so)}function*lo(){yield Vr([qn(),Xn(),ai(),di(),gi(),Si(),Ei(),Oi(),qi(),Wi(),Ti(),ao()])}const vs=zs(),no=[vs],io=Hs({reducer:Mn,middleware:t=>t({thunk:!1}).concat(...no)});vs.run(lo);const oo=()=>{const t=localStorage.getItem("vcare_branding");if(t){const r=JSON.parse(t);let s=document.getElementById("branding-styles");s||(s=document.createElement("style"),s.id="branding-styles",document.head.appendChild(s)),s.innerHTML=`
      :root {
        --primary-color: ${r.primaryColor||"#0E72BD"};
        --secondary-color: ${r.secondaryColor||"#52c41a"};
        --accent-color: ${r.accentColor||"#fa8c16"};
        --primary-color-rgb: ${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"};
        --font-family: ${r.fontFamily||"Inter"}, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
      }
      
      .ant-btn-primary {
        background-color: ${r.primaryColor||"#0E72BD"} !important;
        border-color: ${r.primaryColor||"#0E72BD"} !important;
        color: white !important;
      }
      
      .ant-btn-primary:hover {
        background-color: ${r.primaryColor||"#0E72BD"} !important;
        opacity: 0.85 !important;
        border-color: ${r.primaryColor||"#0E72BD"} !important;
      }
      
      /* Button hover states */
      .ant-btn:hover {
        border-color: ${r.primaryColor||"#0E72BD"} !important;
        color: ${r.primaryColor||"#0E72BD"} !important;
      }
      
      .ant-btn-default:hover {
        border-color: ${r.primaryColor||"#0E72BD"} !important;
        color: ${r.primaryColor||"#0E72BD"} !important;
      }
      
      /* Button focus states */
      .ant-btn:focus {
        border-color: ${r.primaryColor||"#0E72BD"} !important;
        color: ${r.primaryColor||"#0E72BD"} !important;
      }
      
      .text-blue-600, .text-[#0E72BD] {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }
      
      .bg-blue-600, .bg-[#0E72BD] {
        background-color: ${r.primaryColor||"#0E72BD"} !important;
      }
      
      .border-blue-600, .border-[#0E72BD] {
        border-color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-switch-checked {
        background-color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-checkbox-checked .ant-checkbox-inner {
        background-color: ${r.primaryColor||"#0E72BD"} !important;
        border-color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-pagination-item-active {
        border-color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-pagination-item-active a {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-slider-track {
        background-color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-slider-handle::after {
        box-shadow: 0 0 0 2px ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-btn-link {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-menu-light .ant-menu-submenu-selected >.ant-menu-submenu-title {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-radio-checked .ant-radio-inner {
        border-color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-radio-inner::after {
        background-color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-tabs-ink-bar {
        background-color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-select-item-option-selected:not(.ant-select-item-option-disabled) {
        background-color: rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.1) !important; 
      }

      .ant-select-focused .ant-select-selector {
        border-color: ${r.primaryColor||"#0E72BD"} !important;
        box-shadow: 0 0 0 2px rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.2) !important;
      }

      .ant-input:focus, 
      .ant-input-focused {
        border-color: ${r.primaryColor||"#0E72BD"} !important;
        box-shadow: 0 0 0 2px rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.2) !important;
      }

      .ant-input-affix-wrapper:focus,
      .ant-input-affix-wrapper-focused {
        border-color: ${r.primaryColor||"#0E72BD"} !important;
        box-shadow: 0 0 0 2px rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.2) !important;
      }

      .ant-picker-focused {
        border-color: ${r.primaryColor||"#0E72BD"} !important;
        box-shadow: 0 0 0 2px rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.2) !important;
      }

      .ant-picker-cell-in-view.ant-picker-cell-selected .ant-picker-cell-inner {
        background-color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-tag-blue {
        color: ${r.primaryColor||"#0E72BD"} !important;
        background: rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.1) !important;
        border-color: rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.3) !important;
      }

      .ant-progress-bg {
        background-color: ${r.primaryColor||"#0E72BD"} !important;
      }

      /* Table sorting */
      .ant-table-column-sorter-up.active, 
      .ant-table-column-sorter-down.active {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      /* Menu items */
      .ant-menu-item:hover {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-menu-item-selected {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-menu-submenu-title:hover {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-menu-submenu-selected > .ant-menu-submenu-title {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-menu-light .ant-menu-item:hover {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-menu-light .ant-menu-item-active {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-menu-light .ant-menu-submenu-active > .ant-menu-submenu-title {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-menu-light .ant-menu-item-selected {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-menu-light .ant-menu-item-selected {
        background-color: rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.1) !important;
      }

      /* Dropdown items */
      .ant-dropdown-menu-item-active {
        background-color: rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.1) !important;
      }

      .ant-dropdown-menu-item-active:hover {
        background-color: rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.2) !important;
      }

      .ant-dropdown-menu-submenu-title:hover {
        background-color: rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.1) !important;
      }

      .ant-dropdown-menu-submenu-active > .ant-dropdown-menu-submenu-title {
        color: ${r.primaryColor||"#0E72BD"} !important;
        background-color: rgba(${r.primaryColor?`${parseInt(r.primaryColor.slice(1,3),16)}, ${parseInt(r.primaryColor.slice(3,5),16)}, ${parseInt(r.primaryColor.slice(5,7),16)}`:"14, 114, 189"}, 0.1) !important;
      }

      .ant-dropdown-menu-submenu-selected > .ant-dropdown-menu-submenu-title {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-dropdown-menu-submenu-title:hover {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-dropdown-menu-title-content:hover {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-dropdown-menu-item:hover {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-dropdown-menu-item-selected {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-dropdown-menu-item-selected:hover {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-dropdown-menu-item-active {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }

      .ant-dropdown-menu-item-active:hover {
        color: ${r.primaryColor||"#0E72BD"} !important;
      }
      
      body {
        font-family: ${r.fontFamily||"Inter"}, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
      }
    `}};oo();$s(document.getElementById("root")).render(e.jsx(Ls,{store:io,children:e.jsx($n,{})}));const{Text:tt}=de;function Sc({product:t,onAddToCart:r,showDetails:s=!0,showPriceRange:l=!1,className:a="",...i}){const o=m=>{m.stopPropagation(),r?.(t)},n=()=>`LKR ${(t.price||0).toFixed(2)||"0.00"}`;return e.jsx(re,{hoverable:!0,className:`h-full cursor-pointer ${a}`,cover:e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx(At,{alt:t.name,src:t.image||"https://images.pexels.com/photos/586344/pexels-photo-586344.jpeg?auto=compress&cs=tinysrgb&w=300",className:"w-full h-full object-cover",preview:!1,style:{objectFit:"cover",aspectRatio:"4/3"}}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(Jt,{count:n(),style:{backgroundColor:"#0E72BD"}})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(Z,{color:"blue",children:t.category})}),t.hasColors&&e.jsx("div",{className:"absolute bottom-2 right-2",children:e.jsxs(Z,{color:"purple",size:"small",children:[t.colors?.length||0," Color",(t.colors?.length||0)!==1?"s":""]})}),t.isCustom&&e.jsx("div",{className:"absolute bottom-2 right-2",children:e.jsx(Z,{color:"purple",size:"small",children:"Custom"})}),t.stock<=5&&t.stock>0&&e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsx(Z,{color:"orange",children:"Low Stock"})}),t.stock===0&&e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsx(Z,{color:"red",children:"Out of Stock"})})]}),onClick:()=>onClick?.(t),bodyStyle:{padding:"16px"},...i,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(tt,{strong:!0,className:"text-base line-clamp-2 leading-tight block mb-1",children:t.name}),e.jsxs(tt,{type:"secondary",className:"text-sm block mb-1",children:["SKU: ",t.barcode||"N/A"]}),t.hasColors&&e.jsxs(tt,{type:"secondary",className:"text-xs block mb-1",children:[t.colors?.length||0," color variations available"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(tt,{strong:!0,className:"text-lg text-[#0E72BD]",children:n()}),e.jsxs(tt,{type:"secondary",className:"text-sm",children:["Stock: ",t.stock]})]})]}),s&&!t.isCustom&&e.jsxs("div",{className:"space-y-1",children:[t.material&&e.jsxs(tt,{type:"secondary",className:"text-xs block",children:[e.jsx(v,{name:"texture",size:"text-xs",className:"mr-1"}),t.material]}),t.color&&e.jsxs(tt,{type:"secondary",className:"text-xs block",children:[e.jsx(v,{name:"palette",size:"text-xs",className:"mr-1"}),t.color]})]}),e.jsx(pe,{type:"primary",icon:e.jsx(v,{name:"add_shopping_cart"}),size:"large",block:!0,onClick:o,disabled:t.stock===0,className:"bg-[#0E72BD] hover:bg-blue-700 font-semibold",children:t.stock===0?"Out of Stock":t.hasColors?"Select Color & Size":"Add to Cart"})]})})}function ft({type:t="default",rows:r=4,loading:s=!0,children:l,className:a=""}){return s?(()=>{switch(t){case"card":return e.jsx(re,{className:a,children:e.jsx(Ae,{active:!0,avatar:!0,paragraph:{rows:2}})});case"list":return e.jsx("div",{className:`space-y-4 ${a}`,children:Array.from({length:r},(o,n)=>e.jsx(re,{size:"small",children:e.jsx(Ae,{active:!0,avatar:!0,paragraph:{rows:1}})},n))});case"table":return e.jsx(re,{className:a,children:e.jsx(Ae,{active:!0,title:!0,paragraph:{rows:8}})});case"form":return e.jsxs("div",{className:`space-y-4 ${a}`,children:[e.jsx(Ae.Input,{active:!0,size:"large",block:!0}),e.jsx(Ae.Input,{active:!0,size:"large",block:!0}),e.jsx(Ae.Input,{active:!0,size:"large",block:!0}),e.jsx(Ae,{active:!0,paragraph:{rows:2}})]});case"product-grid":return e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 ${a}`,children:Array.from({length:8},(o,n)=>e.jsxs(re,{children:[e.jsx(Ae.Image,{active:!0,className:"w-full h-48"}),e.jsx("div",{className:"mt-4",children:e.jsx(Ae,{active:!0,paragraph:{rows:2}})})]},n))});case"stats":return e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 ${a}`,children:Array.from({length:4},(o,n)=>e.jsxs(re,{className:"text-center",children:[e.jsx(Ae.Avatar,{active:!0,size:64,shape:"circle"}),e.jsx("div",{className:"mt-4",children:e.jsx(Ae,{active:!0,paragraph:{rows:1}})})]},n))});default:return e.jsx("div",{className:a,children:e.jsx(Ae,{active:!0,paragraph:{rows:r}})})}})():l}const{Title:co,Text:uo}=de;function wr({icon:t="inbox",title:r="No Data",description:s="No data available at the moment",image:l,action:a,actionText:i="Add New",onAction:o,className:n="",size:m="default"}){const b=()=>{switch(m){case"small":return 60;case"large":return 120;default:return 80}},j=l||e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"flex items-center justify-center rounded-full bg-gray-100 text-gray-400 mb-4",style:{width:b(),height:b()},children:e.jsx(v,{name:t,size:m==="large"?"text-4xl":m==="small"?"text-xl":"text-2xl"})})});return e.jsx("div",{className:`text-center py-12 ${n}`,children:e.jsxs(Pt,{image:j,description:e.jsxs("div",{className:"space-y-2",children:[e.jsx(co,{level:m==="large"?3:m==="small"?5:4,type:"secondary",children:r}),e.jsx(uo,{type:"secondary",className:m==="large"?"text-lg":"text-sm",children:s})]}),children:[(a||o)&&e.jsx(A.Primary,{icon:"add",onClick:o,size:m==="large"?"large":"default",children:i}),a]})})}function wc({current:t=0,steps:r=[],status:s="process",direction:l="horizontal",size:a="default",errorMessage:i,className:o="",onChange:n,...m}){const b=c=>c<t?"finish":c===t?s:"wait",j=r.map((c,y)=>({title:c.title,description:c.description,status:b(y),icon:c.icon?e.jsx(v,{name:c.icon}):void 0}));return e.jsxs("div",{className:`space-y-4 ${o}`,children:[s==="error"&&i&&e.jsx(mt,{message:"Step Error",description:i,type:"error",showIcon:!0,className:"mb-4"}),e.jsx(Rs,{current:t,status:s,direction:l,size:a,items:j,onChange:n,...m})]})}const{Title:vt,Text:U}=de;function mo({open:t,onClose:r,transaction:s,type:l="detailed"}){const[a,i]=h.useState(!1);if(!s)return null;const o=()=>{window.print()},n=async()=>{i(!0);const c=document.getElementById("invoice-content");if(!c){console.error("Invoice content element not found"),i(!1);return}try{const y=await dt(c,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:c.scrollWidth,height:c.scrollHeight}),N=210,P=295,D=y.height*N/y.width;let M=D;const p=new ut("p","mm","a4");let k=0;for(p.addImage(y.toDataURL("image/png"),"PNG",0,k,N,D),M-=P;M>=0;)k=M-D,p.addPage(),p.addImage(y.toDataURL("image/png"),"PNG",0,k,N,D),M-=P;const $=p.output("blob"),_=URL.createObjectURL($);window.open(_,"_blank")}catch(y){console.error("Error generating PDF:",y),o()}finally{i(!1)}},m=async()=>{i(!0);const c=document.getElementById("invoice-content");if(!c){console.error("Invoice content element not found"),i(!1);return}try{const y=await dt(c,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:c.scrollWidth,height:c.scrollHeight}),N=210,P=295,D=y.height*N/y.width;let M=D;const p=new ut("p","mm","a4");let k=0;for(p.addImage(y.toDataURL("image/png"),"PNG",0,k,N,D),M-=P;M>=0;)k=M-D,p.addPage(),p.addImage(y.toDataURL("image/png"),"PNG",0,k,N,D),M-=P;const $=`${l==="detailed"?"invoice":"labels"}-${s.id}.pdf`;p.save($)}catch(y){console.error("Error generating PDF:",y),o()}finally{i(!1)}},b=()=>e.jsxs("div",{id:"invoice-content",className:"p-8 bg-white",style:{fontFamily:"Arial, sans-serif"},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-xl flex items-center justify-center",children:e.jsx("img",{src:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).logoPreview?JSON.parse(localStorage.getItem("vcare_branding")).logoPreview:"/VCARELogo 1.png",alt:"VCare Logo",className:"w-10 h-10 object-contain"})}),e.jsxs("div",{children:[e.jsx(vt,{level:2,className:"m-0 text-blue-600",children:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).businessName?JSON.parse(localStorage.getItem("vcare_branding")).businessName:"VCare Furniture Store"}),e.jsx(U,{type:"secondary",children:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).tagline?JSON.parse(localStorage.getItem("vcare_branding")).tagline:"Premium Furniture Solutions"})]})]}),e.jsx(De,{}),e.jsx(vt,{level:3,className:"text-gray-800",children:"INVOICE"})]}),e.jsxs(te,{gutter:32,className:"mb-6",children:[e.jsx(I,{span:12,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{strong:!0,children:"Invoice Number:"}),e.jsx(U,{className:"block",children:s.id}),e.jsx(U,{strong:!0,children:"Date:"}),e.jsx(U,{className:"block",children:new Date(s.timestamp).toLocaleDateString()}),e.jsx(U,{strong:!0,children:"Time:"}),e.jsx(U,{className:"block",children:new Date(s.timestamp).toLocaleTimeString()}),e.jsx(U,{strong:!0,children:"Cashier:"}),e.jsx(U,{className:"block",children:s.cashier}),s.salesperson&&e.jsxs(e.Fragment,{children:[e.jsx(U,{strong:!0,children:"Sales Person:"}),e.jsx(U,{className:"block",children:s.salesperson})]})]})}),e.jsx(I,{span:12,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{strong:!0,children:"Bill To:"}),e.jsxs("div",{className:"border-l-4 border-blue-600 pl-4",children:[e.jsx(U,{className:"block font-semibold",children:s.customerName||"Walk-in Customer"}),s.customerPhone&&e.jsx(U,{className:"block",children:s.customerPhone}),s.customerEmail&&e.jsx(U,{className:"block",children:s.customerEmail}),s.customerAddress&&e.jsx(U,{className:"block",children:s.customerAddress})]})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(vt,{level:4,className:"mb-4",children:"Items Purchased"}),e.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"border border-gray-300 p-3 text-left",children:"Item"}),e.jsx("th",{className:"border border-gray-300 p-3 text-left",children:"SKU"}),e.jsx("th",{className:"border border-gray-300 p-3 text-center",children:"Qty"}),e.jsx("th",{className:"border border-gray-300 p-3 text-right",children:"Unit Price"}),e.jsx("th",{className:"border border-gray-300 p-3 text-right",children:"Total"})]})}),e.jsx("tbody",{children:s.items.map((c,y)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-300 p-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(At,{src:c.product.image||"https://images.pexels.com/photos/586344/pexels-photo-586344.jpeg?auto=compress&cs=tinysrgb&w=100",alt:c.product.name,width:50,height:50,className:"object-cover rounded",preview:!1,style:{aspectRatio:"1/1",objectFit:"cover"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx(U,{strong:!0,className:"block",children:c.product.name}),c.selectedVariant&&e.jsxs(U,{type:"secondary",className:"text-sm",children:["Variant: ",c.selectedVariant]}),c.selectedSize&&e.jsxs(U,{type:"secondary",className:"text-sm",children:["Size: ",c.selectedSize]}),e.jsxs(U,{type:"secondary",className:"text-sm",children:["SKU: ",c.product.barcode," | Qty: ",c.quantity]})]})]})}),e.jsx("td",{className:"border border-gray-300 p-3",children:e.jsx(U,{code:!0,children:c.product.barcode})}),e.jsx("td",{className:"border border-gray-300 p-3 text-center",children:c.quantity}),e.jsxs("td",{className:"border border-gray-300 p-3 text-right",children:["LKR ",c.product.price.toFixed(2)]}),e.jsxs("td",{className:"border border-gray-300 p-3 text-right",children:["LKR ",(c.product.price*c.quantity).toFixed(2)]})]},y))})]})]}),e.jsxs(te,{gutter:32,children:[e.jsx(I,{span:12,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{strong:!0,children:"Payment Information:"}),e.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[e.jsxs(U,{className:"block",children:["Method: ",s.paymentMethod.toUpperCase()]}),e.jsx(U,{className:"block",children:"Status: PAID"}),s.appliedCoupon&&e.jsxs(U,{className:"block",children:["Coupon: ",s.appliedCoupon]})]})]})}),e.jsx(I,{span:12,children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{children:"Subtotal:"}),e.jsxs(U,{children:["LKR ",s.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{children:"Tax:"}),e.jsxs(U,{children:["LKR ",s.totalTax.toFixed(2)]})]}),s.discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx(U,{children:"Discount:"}),e.jsxs(U,{children:["-LKR ",s.discount.toFixed(2)]})]}),e.jsx(De,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(vt,{level:4,className:"m-0",children:"Total:"}),e.jsxs(vt,{level:4,className:"m-0 text-blue-600",children:["LKR ",s.total.toFixed(2)]})]})]})})]}),s.notes&&e.jsxs("div",{className:"mt-6",children:[e.jsx(U,{strong:!0,children:"Order Notes:"}),e.jsx("div",{className:"mt-2 p-3 bg-gray-50 border rounded",children:e.jsx(U,{children:s.notes})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t text-center",children:[e.jsx(U,{type:"secondary",className:"text-sm",children:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).receiptFooter?JSON.parse(localStorage.getItem("vcare_branding")).receiptFooter:"Thank you for your business! For any questions, please contact us."}),e.jsx("br",{}),e.jsxs(U,{type:"secondary",className:"text-sm",children:[localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).businessName?JSON.parse(localStorage.getItem("vcare_branding")).businessName:"VCare Furniture Store"," |",localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).address?JSON.parse(localStorage.getItem("vcare_branding")).address:"123 Main Street, City, State 12345"," |",localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).phoneNumber?JSON.parse(localStorage.getItem("vcare_branding")).phoneNumber:"(555) 123-4567"]})]})]}),j=()=>e.jsx("div",{id:"invoice-content",className:"p-4 bg-white max-w-md mx-auto",children:s.items.map((c,y)=>Array.from({length:c.quantity},(N,P)=>e.jsxs("div",{className:"border-2 border-dashed border-gray-400 p-4 mb-4 page-break-after",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded mx-auto mb-2 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"VC"})}),e.jsx(U,{strong:!0,className:"text-lg",children:"VCare Furniture"})]}),e.jsx(De,{className:"my-2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{children:e.jsx(U,{strong:!0,className:"text-base",children:c.product.name})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{type:"secondary",children:"SKU:"}),e.jsx(U,{code:!0,children:c.product.barcode})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{type:"secondary",children:"Category:"}),e.jsx(U,{children:c.product.category})]}),c.product.material&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{type:"secondary",children:"Material:"}),e.jsx(U,{children:c.product.material})]}),c.product.color&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{type:"secondary",children:"Color:"}),e.jsx(U,{children:c.product.color})]}),c.product.dimensions&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{type:"secondary",children:"Size:"}),e.jsxs(U,{className:"text-xs",children:[c.product.dimensions.length,"Ã",c.product.dimensions.width,"Ã",c.product.dimensions.height," ",c.product.dimensions.unit]})]})]}),e.jsx(De,{className:"my-2"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{type:"secondary",className:"text-xs",children:"Order:"}),e.jsx(U,{className:"text-xs",children:s.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{type:"secondary",className:"text-xs",children:"Customer:"}),e.jsx(U,{className:"text-xs",children:s.customerName||"Walk-in"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{type:"secondary",className:"text-xs",children:"Date:"}),e.jsx(U,{className:"text-xs",children:new Date(s.timestamp).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{type:"secondary",className:"text-xs",children:"Item:"}),e.jsxs(U,{className:"text-xs",children:[P+1," of ",c.quantity]})]})]}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 mx-auto flex items-center justify-center border",children:e.jsx(U,{type:"secondary",className:"text-xs",children:"QR"})}),e.jsx(U,{type:"secondary",className:"text-xs mt-1",children:"Scan for details"})]})]},`${y}-${P}`)))});return e.jsx(Ne,{title:e.jsxs(oe,{children:[e.jsx(v,{name:l==="detailed"?"receipt_long":"label",className:"text-blue-600"}),e.jsx("span",{children:l==="detailed"?"Invoice":"Item Labels"})]}),open:t,onCancel:r,width:l==="detailed"?900:600,footer:[e.jsx(A,{onClick:r,children:"Close"},"close"),e.jsx(A,{icon:"visibility",onClick:n,loading:a,children:"View PDF"},"view"),e.jsx(A,{icon:"download",onClick:m,loading:a,children:"Download PDF"},"download"),e.jsx(A.Primary,{icon:"print",onClick:o,children:"Print"},"print")],className:"invoice-modal",children:e.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:l==="detailed"?b():j()})})}const{Title:Cc,Text:po}=de;function ho({open:t,onClose:r,transaction:s}){const[l,a]=h.useState(!1);if(!s)return null;const i=()=>{window.print()},o=async()=>{a(!0);const c=document.getElementById("inventory-labels-content");if(!c){console.error("Inventory labels content element not found"),a(!1);return}try{const y=await dt(c,{scale:3,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:c.scrollWidth,height:c.scrollHeight}),N=210,P=297,D=y.height*N/y.width;let M=D;const p=new ut("p","mm","a4");let k=0;for(p.addImage(y.toDataURL("image/png"),"PNG",0,k,N,D),M-=P;M>=0;)k=M-D,p.addPage(),p.addImage(y.toDataURL("image/png"),"PNG",0,k,N,D),M-=P;const $=p.output("blob"),_=URL.createObjectURL($);window.open(_,"_blank")}catch(y){console.error("Error generating PDF:",y),i()}finally{a(!1)}},n=async()=>{a(!0);const c=document.getElementById("inventory-labels-content");if(!c){console.error("Inventory labels content element not found"),a(!1);return}try{const y=await dt(c,{scale:3,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:c.scrollWidth,height:c.scrollHeight}),N=210,P=297,D=y.height*N/y.width;let M=D;const p=new ut("p","mm","a4");let k=0;for(p.addImage(y.toDataURL("image/png"),"PNG",0,k,N,D),M-=P;M>=0;)k=M-D,p.addPage(),p.addImage(y.toDataURL("image/png"),"PNG",0,k,N,D),M-=P;const $=`inventory-labels-${s.id}.pdf`;p.save($)}catch(y){console.error("Error generating PDF:",y),i()}finally{a(!1)}},m=c=>{const y={0:"0001101",1:"0011001",2:"0010011",3:"0111101",4:"0100011",5:"0110001",6:"0101111",7:"0111011",8:"0110111",9:"0001011",A:"0100001",B:"0110001",C:"0001001",D:"0101001",E:"0011001",F:"0111001",G:"0001101",H:"0010001",I:"0001001",J:"0010001",K:"0100001",L:"0110001",M:"0001101",N:"0010011",O:"0001011",P:"0010001",Q:"0100001",R:"0001001",S:"0010001",T:"0001001",U:"0100001",V:"0110001",W:"0001101",X:"0010011",Y:"0001011",Z:"0010001","-":"0010001"};let N="101";for(let P of c.toUpperCase())N+=y[P]||"0001001";return N+="101",N},b=c=>{const N=m(c).split("").map((P,D)=>e.jsx("div",{style:{width:"0.8px",height:"20px",backgroundColor:P==="1"?"#000":"#fff",display:"inline-block"}},D));return e.jsx("div",{className:"flex justify-center items-center bg-white",children:e.jsx("div",{style:{fontSize:0,lineHeight:0},children:N})})},j=()=>e.jsx("div",{id:"inventory-labels-content",className:"bg-white",style:{fontFamily:"Arial, sans-serif",padding:"5mm"},children:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"2mm",width:"200mm",minHeight:"287mm"},children:s.items.map((c,y)=>Array.from({length:c.quantity},(N,P)=>e.jsxs("div",{className:"inventory-label border border-gray-800 bg-white flex flex-col",style:{width:"48mm",height:"45mm",padding:"2mm",pageBreakInside:"avoid",fontSize:"8px",lineHeight:"1.2"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 pb-1 border-b border-gray-400",children:[e.jsx("div",{children:e.jsx("span",{style:{fontWeight:"bold",fontSize:"9px"},children:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).businessName?JSON.parse(localStorage.getItem("vcare_branding")).businessName.substring(0,15):"VCare Furniture"})}),e.jsx("div",{style:{width:"12px",height:"12px",backgroundColor:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).primaryColor?JSON.parse(localStorage.getItem("vcare_branding")).primaryColor:"#2563eb",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{color:"white",fontWeight:"bold",fontSize:"6px"},children:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).businessName?JSON.parse(localStorage.getItem("vcare_branding")).businessName.substring(0,2).toUpperCase():"VC"})})]}),e.jsx("div",{className:"mb-2 text-center flex-1",children:e.jsx("div",{style:{fontWeight:"bold",fontSize:"9px",lineHeight:"1.1",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:c.product.name})}),e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("div",{style:{fontSize:"6px",color:"#666",marginBottom:"1px"},children:"SKU:"}),e.jsx("div",{style:{fontWeight:"bold",fontFamily:"monospace",fontSize:"8px"},children:c.product.barcode||"N/A"})]}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("div",{style:{maxWidth:"100%",overflow:"hidden"},children:b(c.product.barcode||"NOBARCODE")}),e.jsx("div",{className:"text-center",style:{marginTop:"1px"},children:e.jsx("span",{style:{fontFamily:"monospace",fontSize:"6px"},children:c.product.barcode||"N/A"})})]})]},`${y}-${P}`)))})});return e.jsx(Ne,{title:e.jsxs(oe,{children:[e.jsx(v,{name:"label",className:"text-blue-600"}),e.jsx("span",{children:"Inventory Labels"})]}),open:t,onCancel:r,width:1e3,footer:[e.jsx(A,{onClick:r,children:"Close"},"close"),e.jsx(A,{icon:"visibility",onClick:o,loading:l,children:"View PDF"},"view"),e.jsx(A,{icon:"download",onClick:n,loading:l,children:"Download PDF"},"download"),e.jsx(A.Primary,{icon:"print",onClick:i,children:"Print Labels"},"print")],className:"inventory-labels-modal",destroyOnClose:!0,children:e.jsxs("div",{className:"max-h-[70vh] overflow-y-auto",children:[e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs(po,{className:"text-sm",children:[e.jsx(v,{name:"info",className:"mr-2 text-blue-600"}),e.jsx("strong",{children:"Inventory Labels:"})," Optimized for A4 printing with 24 labels per page (4Ã6 grid). Each item will have ",s?.items?.reduce((c,y)=>c+y.quantity,0)," labels generated (one for each quantity ordered). Perfect size for sticking to inventory items."]})}),j()]})})}function Nc({placeholder:t="Search...",className:r="w-64",onSearch:s,...l}){return e.jsx(ne,{placeholder:t,prefix:e.jsx(v,{name:"search",className:"text-gray-400"}),className:r,allowClear:!0,onChange:a=>s?.(a.target.value),...l})}const{Title:He,Text:q}=de;function kc({open:t,onClose:r,product:s}){const[l,a]=h.useState(!1);if(!s)return null;const i=()=>{window.print()},o=async()=>{a(!0);const m=document.getElementById("product-sheet-content");if(!m){console.error("Product sheet content element not found"),a(!1);return}try{const b=await dt(m,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:m.scrollWidth,height:m.scrollHeight}),j=210,c=295,y=b.height*j/b.width;let N=y;const P=new ut("p","mm","a4");let D=0;for(P.addImage(b.toDataURL("image/png"),"PNG",0,D,j,y),N-=c;N>=0;)D=N-y,P.addPage(),P.addImage(b.toDataURL("image/png"),"PNG",0,D,j,y),N-=c;const M=P.output("blob"),p=URL.createObjectURL(M);window.open(p,"_blank")}catch(b){console.error("Error generating PDF:",b),i()}finally{a(!1)}},n=async()=>{a(!0);const m=document.getElementById("product-sheet-content");if(!m){console.error("Product sheet content element not found"),a(!1);return}try{const b=await dt(m,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:m.scrollWidth,height:m.scrollHeight}),j=210,c=295,y=b.height*j/b.width;let N=y;const P=new ut("p","mm","a4");let D=0;for(P.addImage(b.toDataURL("image/png"),"PNG",0,D,j,y),N-=c;N>=0;)D=N-y,P.addPage(),P.addImage(b.toDataURL("image/png"),"PNG",0,D,j,y),N-=c;const M=`product-details-${s.name.replace(/\s+/g,"-").toLowerCase()}.pdf`;P.save(M)}catch(b){console.error("Error generating PDF:",b),i()}finally{a(!1)}};return e.jsx(Ne,{title:e.jsxs(oe,{children:[e.jsx(v,{name:"description",className:"text-blue-600"}),e.jsx("span",{children:"Product Details Sheet"})]}),open:t,onCancel:r,width:800,footer:[e.jsx(A,{onClick:r,children:"Close"},"close"),e.jsx(A,{icon:"visibility",onClick:o,loading:l,children:"View PDF"},"view"),e.jsx(A,{icon:"download",onClick:n,loading:l,children:"Download PDF"},"download"),e.jsx(A.Primary,{icon:"print",onClick:i,children:"Print"},"print")],className:"invoice-modal",children:e.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{id:"product-sheet-content",className:"p-8 bg-white",style:{fontFamily:"Arial, sans-serif"},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-xl flex items-center justify-center",children:e.jsx("img",{src:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).logoPreview?JSON.parse(localStorage.getItem("vcare_branding")).logoPreview:"/VCARELogo 1.png",alt:"VCare Logo",className:"w-10 h-10 object-contain"})}),e.jsxs("div",{children:[e.jsx(He,{level:2,className:"m-0 text-blue-600",children:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).businessName?JSON.parse(localStorage.getItem("vcare_branding")).businessName:"VCare Furniture Store"}),e.jsx(q,{type:"secondary",children:localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).tagline?JSON.parse(localStorage.getItem("vcare_branding")).tagline:"Premium Furniture Solutions"})]})]}),e.jsx(De,{}),e.jsx(He,{level:3,className:"text-gray-800",children:"PRODUCT SPECIFICATION SHEET"})]}),e.jsxs(te,{gutter:32,className:"mb-8",children:[e.jsx(I,{span:10,children:e.jsx("div",{className:"text-center",children:e.jsx(At,{src:s.image||"https://images.pexels.com/photos/586344/pexels-photo-586344.jpeg?auto=compress&cs=tinysrgb&w=400",alt:s.name,width:"100%",height:250,className:"object-cover rounded-lg border",preview:!1,style:{aspectRatio:"4/3",objectFit:"cover"}})})}),e.jsx(I,{span:14,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(He,{level:3,className:"m-0 text-blue-600",children:s.name}),e.jsx(q,{type:"secondary",className:"text-lg",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{strong:!0,className:"block text-gray-600",children:"Product Code:"}),e.jsx(q,{code:!0,className:"text-lg",children:s.barcode||"N/A"})]}),e.jsxs("div",{children:[e.jsx(q,{strong:!0,className:"block text-gray-600",children:"Category:"}),e.jsx(q,{className:"text-lg",children:s.category})]}),e.jsxs("div",{children:[e.jsx(q,{strong:!0,className:"block text-gray-600",children:"Price:"}),e.jsxs(q,{className:"text-xl font-bold text-blue-600",children:["LKR ",(s.price||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx(q,{strong:!0,className:"block text-gray-600",children:"Stock Available:"}),e.jsxs(q,{className:"text-lg",children:[s.stock," units"]})]})]})]})})]}),s.hasSizes&&s.sizes&&s.sizes.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs(He,{level:4,className:"mb-4 text-blue-600",children:[e.jsx(v,{name:"straighten",className:"mr-2"}),"Available Sizes"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.sizes.map((m,b)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx(q,{strong:!0,className:"text-lg",children:m.name}),e.jsxs(q,{className:"text-lg font-bold text-blue-600",children:["LKR ",m.price.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(q,{type:"secondary",children:"Stock:"}),e.jsxs(q,{children:[m.stock," units"]})]}),m.dimensions&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx(q,{type:"secondary",children:"Dimensions:"}),e.jsxs(q,{children:[m.dimensions.length,"Ã",m.dimensions.width,"Ã",m.dimensions.height," ",m.dimensions.unit]})]}),m.weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx(q,{type:"secondary",children:"Weight:"}),e.jsxs(q,{children:[m.weight," kg"]})]})]})]},b))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs(He,{level:4,className:"mb-4 text-blue-600",children:[e.jsx(v,{name:"info",className:"mr-2"}),"Detailed Specifications"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs(He,{level:5,className:"mb-3 text-gray-700",children:[e.jsx(v,{name:"straighten",className:"mr-2"}),"Physical Specifications"]}),e.jsxs("div",{className:"space-y-3",children:[s.material&&e.jsxs("div",{className:"flex justify-between border-b pb-2",children:[e.jsx(q,{strong:!0,children:"Material:"}),e.jsx(q,{children:s.material})]}),s.color&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx(q,{strong:!0,children:"Color:"}),e.jsx(q,{children:s.color})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(q,{strong:!0,children:"Available Sizes:"}),e.jsx(q,{children:s.colors?.reduce((m,b)=>m+(b.sizes?.length||0),0)||0})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs(He,{level:5,className:"mb-3 text-gray-700",children:[e.jsx(v,{name:"star",className:"mr-2"}),"Product Features"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"check_circle",className:"text-green-500",size:"text-sm"}),e.jsx(q,{children:"Premium Quality Construction"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"check_circle",className:"text-green-500",size:"text-sm"}),e.jsx(q,{children:"Durable and Long-lasting"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"check_circle",className:"text-green-500",size:"text-sm"}),e.jsx(q,{children:"Easy Assembly Instructions"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"check_circle",className:"text-green-500",size:"text-sm"}),e.jsx(q,{children:"1 Year Warranty Included"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"check_circle",className:"text-green-500",size:"text-sm"}),e.jsx(q,{children:"Professional Delivery Available"})]})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs(He,{level:4,className:"mb-4 text-blue-600",children:[e.jsx(v,{name:"cleaning_services",className:"mr-2"}),"Care & Maintenance Instructions"]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{strong:!0,className:"block mb-2",children:"Daily Care:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Dust regularly with a soft, dry cloth"}),e.jsx("li",{children:"Avoid direct sunlight exposure"}),e.jsx("li",{children:"Keep away from heat sources"}),e.jsx("li",{children:"Use coasters for drinks and placemats for dining"})]})]}),e.jsxs("div",{children:[e.jsx(q,{strong:!0,className:"block mb-2",children:"Deep Cleaning:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Use mild soap solution for cleaning"}),e.jsx("li",{children:"Wipe dry immediately after cleaning"}),e.jsx("li",{children:"Apply furniture polish monthly"}),e.jsx("li",{children:"Check and tighten screws periodically"})]})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs(He,{level:4,className:"mb-4 text-blue-600",children:[e.jsx(v,{name:"build",className:"mr-2"}),"Assembly Information"]}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx(q,{strong:!0,className:"block mb-2",children:"Assembly Required:"}),e.jsx(q,{children:"Yes - Detailed instructions included"}),e.jsx(q,{strong:!0,className:"block mb-2 mt-3",children:"Estimated Time:"}),e.jsx(q,{children:"30-60 minutes"}),e.jsx(q,{strong:!0,className:"block mb-2 mt-3",children:"Tools Required:"}),e.jsx(q,{children:"Phillips screwdriver, Allen wrench (included)"})]})}),e.jsx(I,{span:12,children:e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx(q,{strong:!0,className:"block mb-2",children:"Professional Assembly:"}),e.jsx(q,{children:"Available for additional LKR 5,000"}),e.jsx(q,{strong:!0,className:"block mb-2 mt-3",children:"Delivery Options:"}),e.jsx(q,{children:"Standard delivery, White glove service"}),e.jsx(q,{strong:!0,className:"block mb-2 mt-3",children:"Return Policy:"}),e.jsx(q,{children:"30-day return policy applies"})]})})]})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs(te,{gutter:32,children:[e.jsx(I,{span:16,children:e.jsxs("div",{children:[e.jsx(q,{strong:!0,className:"block mb-2",children:"Additional Information:"}),e.jsx(q,{type:"secondary",children:"For more details, assembly videos, and customer reviews, scan the QR code or visit our website at www.vcarefurniture.com"}),e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsxs(q,{type:"secondary",className:"block",children:[e.jsx(v,{name:"phone",className:"mr-2"}),"Customer Service: (555) 123-4567"]}),e.jsxs(q,{type:"secondary",className:"block",children:[e.jsx(v,{name:"email",className:"mr-2"}),"Email: support@vcarefurniture.com"]}),e.jsxs(q,{type:"secondary",className:"block",children:[e.jsx(v,{name:"schedule",className:"mr-2"}),"Hours: Mon-Sat 9AM-7PM, Sun 11AM-5PM"]})]})]})}),e.jsx(I,{span:8,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-200 mx-auto flex items-center justify-center border rounded",children:e.jsx(q,{type:"secondary",children:"QR CODE"})}),e.jsx(q,{type:"secondary",className:"text-xs mt-2 block",children:"Scan for product details"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs(q,{type:"secondary",className:"text-xs",children:["Generated on: ",new Date().toLocaleDateString()]})})]})})]})}),e.jsxs("div",{className:"mt-8 pt-6 border-t text-center",children:[e.jsxs(q,{type:"secondary",className:"text-sm",children:[localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).businessName?JSON.parse(localStorage.getItem("vcare_branding")).businessName:"VCare Furniture Store"," - Your trusted partner for premium furniture solutions"]}),e.jsx("br",{}),e.jsxs(q,{type:"secondary",className:"text-sm",children:[localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).address?JSON.parse(localStorage.getItem("vcare_branding")).address:"123 Main Street, City, State 12345"," |",localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).website?JSON.parse(localStorage.getItem("vcare_branding")).website:"www.vcarefurniture.com"]})]})]})})})}function xo({title:t,open:r,onCancel:s,onSubmit:l,form:a,children:i,width:o=600,submitText:n="Submit",cancelText:m="Cancel",loading:b=!1,...j}){const c=()=>{a.validateFields().then(y=>{l?.(y)}).catch(y=>{console.log("Validate Failed:",y)})};return e.jsx(Ne,{title:t,open:r,onCancel:s,width:o,footer:[e.jsx(A,{onClick:s,children:m},"cancel"),e.jsx(A.Primary,{onClick:c,loading:b,children:n},"submit")],destroyOnClose:!0,...j,children:e.jsx(w,{form:a,layout:"vertical",className:"mt-4",children:i})})}const{Title:Ke,Text:xe}=de;function jt({open:t,onClose:r,title:s,icon:l,data:a,type:i="generic",actions:o=[]}){if(!a)return null;const n=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(At,{src:a.image||"https://images.pexels.com/photos/586344/pexels-photo-586344.jpeg?auto=compress&cs=tinysrgb&w=300",alt:a.name,width:200,height:150,className:"object-cover rounded-lg",preview:!1,style:{aspectRatio:"4/3",objectFit:"cover"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Ke,{level:3,className:"mb-2",children:a.name}),e.jsx(xe,{type:"secondary",className:"text-base block mb-4",children:a.description||"No description available"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(xe,{strong:!0,className:"text-2xl text-blue-600",children:["LKR ",(a.price||0).toFixed(2)]}),e.jsxs(Z,{color:a.stock>10?"green":a.stock>0?"orange":"red",children:[a.stock," in stock"]})]}),a.isVariation&&e.jsxs("div",{children:[e.jsxs(Z,{color:"purple",children:["Variation: ",a.variantName]}),e.jsxs(xe,{type:"secondary",className:"ml-2",children:["Part of: ",a.parentProductName]})]})]})]})]}),e.jsxs(ce,{bordered:!0,column:2,size:"small",children:[e.jsx(ce.Item,{label:"SKU",children:e.jsx(xe,{code:!0,children:a.barcode||"N/A"})}),e.jsx(ce.Item,{label:"Category",children:e.jsx(Z,{color:"blue",children:a.category})}),e.jsx(ce.Item,{label:"Weight",children:a.weight?`${a.weight} kg`:"N/A"}),e.jsx(ce.Item,{label:"Material",children:a.material||"N/A"}),e.jsx(ce.Item,{label:"Color",children:a.color||"N/A"}),a.rawMaterials&&a.rawMaterials.length>0&&e.jsx(ce.Item,{label:"Raw Materials",span:2,children:e.jsx("div",{className:"space-y-1",children:a.rawMaterials.map((y,N)=>e.jsxs(Z,{className:"mb-1",children:[y.name||`Material ${N+1}`,": ",y.quantity," units"]},N))})})]})]}),m=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ke,{level:4,className:"mb-1",children:["Order #",a.id]}),e.jsx(xe,{type:"secondary",children:new Date(a.timestamp).toLocaleString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(Ke,{level:3,className:"mb-0 text-blue-600",children:["LKR ",a.total.toFixed(2)]}),e.jsx(Z,{color:"green",children:"PAID"})]})]})}),e.jsxs(ce,{bordered:!0,column:2,size:"small",children:[e.jsx(ce.Item,{label:"Customer",children:a.customerName||"Walk-in Customer"}),e.jsx(ce.Item,{label:"Phone",children:a.customerPhone||"N/A"}),e.jsx(ce.Item,{label:"Email",children:a.customerEmail||"N/A"}),e.jsx(ce.Item,{label:"Cashier",children:a.cashier}),a.salesperson&&e.jsx(ce.Item,{label:"Sales Person",children:a.salesperson}),e.jsx(ce.Item,{label:"Payment Method",children:e.jsx(Z,{color:"blue",children:a.paymentMethod.toUpperCase()})}),e.jsx(ce.Item,{label:"Status",children:e.jsx(Z,{color:"green",children:(a.status||"completed").toUpperCase()})}),a.appliedCoupon&&e.jsx(ce.Item,{label:"Applied Coupon",children:e.jsx(Z,{color:"orange",children:a.appliedCoupon})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(Ke,{level:5,className:"mb-4",children:"Items Purchased"}),e.jsx("div",{className:"space-y-3",children:a.items.map((y,N)=>e.jsx("div",{className:"border rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(At,{src:y.product.image||"https://images.pexels.com/photos/586344/pexels-photo-586344.jpeg?auto=compress&cs=tinysrgb&w=100",alt:y.product.name,width:50,height:50,className:"object-cover rounded",preview:!1,style:{aspectRatio:"1/1",objectFit:"cover"}}),e.jsxs("div",{className:"flex-1",children:[e.jsx(xe,{strong:!0,className:"block",children:y.product.name}),e.jsxs(xe,{type:"secondary",className:"text-sm",children:["SKU: ",y.product.barcode," | Qty: ",y.quantity]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(xe,{strong:!0,className:"text-blue-600",children:["LKR ",(y.product.price*y.quantity).toFixed(2)]}),e.jsx("br",{}),e.jsxs(xe,{type:"secondary",className:"text-sm",children:["LKR ",y.product.price.toFixed(2)," each"]})]})]})},N))})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx(Ke,{level:5,className:"mb-3",children:"Financial Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(xe,{children:"Subtotal:"}),e.jsxs(xe,{children:["LKR ",a.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(xe,{children:"Tax:"}),e.jsxs(xe,{children:["LKR ",a.totalTax.toFixed(2)]})]}),a.discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx(xe,{children:"Discount:"}),e.jsxs(xe,{children:["-LKR ",a.discount.toFixed(2)]})]}),e.jsx(De,{className:"my-2"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(xe,{strong:!0,className:"text-lg",children:"Total:"}),e.jsxs(xe,{strong:!0,className:"text-lg text-blue-600",children:["LKR ",a.total.toFixed(2)]})]})]})]}),a.notes&&e.jsxs("div",{children:[e.jsx(Ke,{level:5,children:"Order Notes"}),e.jsx("div",{className:"bg-blue-50 p-3 rounded border",children:e.jsx(xe,{children:a.notes})})]})]}),b=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center text-white text-xl font-bold",children:[a.firstName?.[0],a.lastName?.[0]]}),e.jsxs("div",{children:[e.jsxs(Ke,{level:3,className:"mb-1",children:[a.firstName," ",a.lastName]}),e.jsxs(xe,{type:"secondary",className:"text-lg",children:["@",a.username]})]})]}),e.jsxs(ce,{bordered:!0,column:2,size:"small",children:[e.jsx(ce.Item,{label:"Email",children:a.email}),e.jsx(ce.Item,{label:"Role",children:e.jsx(Z,{color:"blue",className:"capitalize",children:a.role})}),e.jsx(ce.Item,{label:"Status",children:e.jsx(Z,{color:a.isActive?"green":"red",children:a.isActive?"Active":"Inactive"})}),e.jsx(ce.Item,{label:"Created",children:new Date(a.createdAt).toLocaleDateString()}),e.jsx(ce.Item,{label:"Last Login",children:a.lastLogin?new Date(a.lastLogin).toLocaleString():"Never"})]}),e.jsxs("div",{children:[e.jsx(Ke,{level:5,className:"mb-3",children:"Permissions"}),e.jsx("div",{className:"space-y-3",children:Object.entries(a.permissions||{}).map(([y,N])=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(xe,{strong:!0,className:"capitalize",children:y.replace("-"," ")}),e.jsx(Z,{color:N.view?"green":"red",children:N.view?"Access Granted":"No Access"})]}),N.view&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(Z,{size:"small",color:N.view?"blue":"default",children:["View: ",N.view?"Yes":"No"]}),e.jsxs(Z,{size:"small",color:N.edit?"orange":"default",children:["Edit: ",N.edit?"Yes":"No"]}),e.jsxs(Z,{size:"small",color:N.delete?"red":"default",children:["Delete: ",N.delete?"Yes":"No"]})]})]},y))})]})]}),j=()=>e.jsx("div",{className:"space-y-4",children:e.jsx(ce,{bordered:!0,column:2,size:"small",children:Object.entries(a).map(([y,N])=>typeof N=="object"||y==="id"?null:e.jsx(ce.Item,{label:y.charAt(0).toUpperCase()+y.slice(1),children:String(N)},y))})}),c=()=>{switch(i){case"product":return n();case"transaction":return m();case"user":return b();default:return j()}};return e.jsx(Ne,{title:e.jsxs(oe,{children:[l&&e.jsx(v,{name:l,className:"text-blue-600"}),e.jsx("span",{children:s})]}),open:t,onCancel:r,width:800,footer:[e.jsx(A,{onClick:r,children:"Close"},"close"),...o],destroyOnClose:!0,children:e.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:c()})})}const{Search:yo}=ne,{Option:ar}=ee,{RangePicker:Tc}=Yt,{Text:qe}=de;function st({title:t,icon:r,subtitle:s,columns:l=[],dataSource:a=[],loading:i=!1,rowKey:o="id",onRow:n,extra:m,showSearch:b=!0,showFilters:j=!0,showColumnConfig:c=!0,searchPlaceholder:y="Search...",searchFields:N=[],filterFields:P=[],defaultPageSize:D=10,scroll:M={x:1e3},emptyDescription:p="No data available",emptyImage:k,defaultSortField:$=null,defaultSortOrder:_="descend",rowSelection:R=null,onDelete:J=null,...le}){const Y=h.useMemo(()=>l.filter(B=>B&&typeof B=="object"&&B.key&&B.title),[l]),[C,u]=h.useState(""),[f,K]=h.useState(!1),[E,se]=h.useState(Y.map(B=>B.key)),[ue,Te]=h.useState(()=>{const B={};return Y.forEach(ae=>{ae.key==="actions"?B[ae.key]="right":B[ae.key]=ae.fixed||!1}),B}),[Ve,$e]=h.useState({}),[T,x]=h.useState(()=>$?{field:$,order:_}:{}),[W]=w.useForm(),[Q,me]=h.useState([]),[ze,d]=h.useState({}),[g,L]=h.useState([]),G=h.useMemo(()=>Y.filter(B=>E.includes(B.key)).map(B=>({...B,fixed:ue[B.key]||!1,sorter:B.sorter!==!1?B.sorter||((ae,je)=>{const we=B.dataIndex?ae[B.dataIndex]:"",Ie=B.dataIndex?je[B.dataIndex]:"";return typeof we=="number"&&typeof Ie=="number"?we-Ie:we instanceof Date&&Ie instanceof Date?we.getTime()-Ie.getTime():String(we).localeCompare(String(Ie))}):!1,defaultSortOrder:B.key===$?_:void 0,filterable:B.filterable!==!1,...B.filterable!==!1&&!B.filterDropdown&&{filterDropdown:({setSelectedKeys:ae,selectedKeys:je,confirm:we,clearFilters:Ie})=>e.jsxs("div",{className:"p-3 w-64",children:[e.jsx(ne,{placeholder:`Search ${B.title}`,value:je[0],onChange:_t=>ae(_t.target.value?[_t.target.value]:[]),onPressEnter:()=>we(),className:"mb-2 block"}),e.jsxs(oe,{children:[e.jsx(pe,{type:"primary",onClick:()=>we(),icon:e.jsx(v,{name:"search"}),size:"small",children:"Search"}),e.jsx(pe,{onClick:()=>Ie(),size:"small",children:"Reset"})]})]}),filterIcon:ae=>e.jsx(v,{name:"filter_list",className:ae?"text-blue-600":"text-gray-400"}),onFilter:B.onFilter||((ae,je)=>{const we=B.dataIndex;if(!we)return!0;let Ie;return Array.isArray(we)?Ie=we.reduce((_t,Ts)=>_t?.[Ts],je):Ie=je[we],Ie?.toString()?.toLowerCase()?.includes(ae.toLowerCase())})}})),[Y,E,ue,$,_]),he=h.useMemo(()=>C?a.filter(B=>N.length>0?N.some(ae=>(Array.isArray(ae)?ae.reduce((we,Ie)=>we?.[Ie],B):B[ae])?.toString()?.toLowerCase()?.includes(C.toLowerCase())):Object.values(B).some(ae=>ae?.toString()?.toLowerCase()?.includes(C.toLowerCase()))):a,[a,C,N]),Le=(B,ae,je)=>{$e(ae),x(je)},et=B=>{L(B)},tr=()=>{J&&g.length>0&&Ne.confirm({title:`Delete ${g.length} selected item(s)?`,content:"This action cannot be undone.",okText:"Delete",okType:"danger",cancelText:"Cancel",onOk:()=>{J(g),L([])}})},Cr=B=>{me(B),W.setFieldsValue({visibleColumns:B})},Ss=(B,ae)=>{const je={...ze,[B]:ae};d(je),W.setFieldsValue({fixedColumns:je})},ws=()=>{const B=Y.map(je=>je.key),ae={};Y.forEach(je=>{je.key==="actions"?ae[je.key]="right":ae[je.key]=je.fixed||!1}),me(B),d(ae),W.setFieldsValue({visibleColumns:B,fixedColumns:ae})},Cs=()=>{try{const B=W.getFieldsValue();if(!B.visibleColumns||B.visibleColumns.length===0){V.error("At least one column must be visible");return}se(B.visibleColumns),Te(B.fixedColumns||{}),K(!1),V.success("Table configuration updated successfully")}catch{V.error("Failed to update table configuration")}},Ns=()=>{me([...E]),d({...ue}),W.setFieldsValue({visibleColumns:[...E],fixedColumns:{...ue}}),K(!0)},Nr=()=>{me([]),d({}),W.resetFields(),K(!1)},ks=R?{...R,selectedRowKeys:g,onChange:et}:null;return i?e.jsxs(re,{children:[(t||r)&&e.jsxs("div",{className:"flex items-center mb-4",children:[r&&e.jsx(v,{name:r,className:"text-[#0E72BD] mr-2",size:"text-xl"}),e.jsx(qe,{strong:!0,className:"text-lg",children:t})]}),e.jsx(Ae,{active:!0,paragraph:{rows:8}})]}):e.jsxs(e.Fragment,{children:[e.jsxs(re,{className:"overflow-x-auto",children:[(t||r||m||b||c)&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[(t||r)&&e.jsxs("div",{className:"flex items-center",children:[r&&e.jsx(v,{name:r,className:"text-[#0E72BD] mr-2",size:"text-xl"}),e.jsxs("div",{children:[t&&e.jsx(qe,{strong:!0,className:"text-lg",children:t}),s&&e.jsx(qe,{type:"secondary",className:"text-sm block",children:s})]})]}),e.jsxs(oe,{children:[b&&e.jsx(yo,{placeholder:y,value:C,onChange:B=>u(B.target.value),onSearch:u,className:"w-64",allowClear:!0}),g.length>0&&J&&e.jsx(Dt,{title:`Delete ${g.length} selected item(s)?`,onConfirm:tr,okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},children:e.jsxs(A,{danger:!0,icon:"delete",disabled:!0,children:["Delete Selected (",g.length,")"]})}),c&&e.jsx(fe,{title:"Configure Columns",children:e.jsx(A,{icon:"settings",onClick:Ns})}),m]})]}),e.jsx(Ms,{columns:G,dataSource:he,rowKey:o,onRow:n,onChange:Le,scroll:M,rowSelection:ks,pagination:{pageSize:D,showSizeChanger:!0,showQuickJumper:!0,showTotal:(B,ae)=>`${ae[0]}-${ae[1]} of ${B} items`,pageSizeOptions:["10","20","50","100"]},locale:{emptyText:e.jsx(Pt,{image:k||Pt.PRESENTED_IMAGE_SIMPLE,description:p})},...le})]}),e.jsx(Ne,{title:e.jsxs(oe,{children:[e.jsx(v,{name:"settings",className:"text-blue-600"}),e.jsx("span",{children:"Configure Table Columns"})]}),open:f,onCancel:Nr,width:600,footer:[e.jsx(A,{onClick:ws,children:"Reset to Default"},"reset"),e.jsx(A,{onClick:Nr,children:"Cancel"},"cancel"),e.jsx(A.Primary,{onClick:Cs,children:"Apply Changes"},"apply")],destroyOnClose:!0,children:e.jsx(w,{form:W,layout:"vertical",preserve:!1,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(qe,{strong:!0,className:"text-base",children:"Column Visibility"}),e.jsx(qe,{type:"secondary",className:"block mb-3",children:"Select which columns to display in the table"}),e.jsx(w.Item,{name:"visibleColumns",children:e.jsx(Ir.Group,{className:"w-full",value:Q,onChange:Cr,children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Y.map(B=>e.jsx(Ir,{value:B.key,children:B.title},B.key))})})})]}),e.jsx(De,{}),e.jsxs("div",{children:[e.jsx(qe,{strong:!0,className:"text-base",children:"Fixed Columns"}),e.jsx(qe,{type:"secondary",className:"block mb-3",children:"Pin columns to the left or right side of the table"}),e.jsx("div",{className:"space-y-3",children:Y.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsx(qe,{children:B.title}),e.jsxs(ee,{value:ze[B.key]||"none",onChange:ae=>Ss(B.key,ae==="none"?!1:ae),className:"w-32",size:"small",children:[e.jsx(ar,{value:"none",children:"Not Fixed"}),e.jsx(ar,{value:"left",children:"Fix Left"}),e.jsx(ar,{value:"right",children:"Fix Right"})]})]},B.key))})]}),e.jsx(De,{}),e.jsx("div",{className:"bg-blue-50 p-3 rounded",children:e.jsxs(qe,{className:"text-sm",children:[e.jsx(v,{name:"info",className:"mr-2 text-blue-600"}),e.jsx("strong",{children:"Tips:"})," Fixed columns will remain visible when scrolling horizontally. The Actions column is fixed to the right by default for better usability."]})})]})})})]})}const{Title:Ic,Text:Je}=de,{Option:Me}=ee,{TextArea:go}=ne;function fo(){const t=ke(),[r,s]=h.useState(""),[l,a]=h.useState(!1),[i,o]=h.useState(null),[n,m]=h.useState("All"),[b,j]=h.useState(null),[c,y]=h.useState(!1),[N,P]=h.useState(!1),[D]=w.useForm(),[M,p]=h.useState([]),{rawMaterialsList:k,error:$}=ie(x=>x.rawMaterials),[_,R]=h.useState("materials");h.useEffect(()=>{t(Sr())},[t]);const J=["All",...new Set(k.map(x=>x.category))],le=k.filter(x=>{const W=x.name.toLowerCase().includes(r.toLowerCase())||x.category.toLowerCase().includes(r.toLowerCase())||x.supplier?.toLowerCase().includes(r.toLowerCase()),Q=n==="All"||x.category===n;return W&&Q}),Y=k.filter(x=>x.stockQuantity<=x.minimumStock),C=k.filter(x=>x.stockQuantity===0),u=k.filter(x=>x.stockQuantity>x.minimumStock&&x.stockQuantity<=x.minimumStock*2),f=async x=>{try{P(!0);const W={id:i?.id||`RM-${Date.now()}`,name:x.name,category:x.category,unit:x.unit,stockQuantity:x.stockQuantity,unitPrice:x.unitPrice,supplier:x.supplier,minimumStock:x.minimumStock,description:x.description};i?(t(hs({materialData:W})),V.success("Raw material updated successfully")):(t(ps({materialData:W})),V.success("Raw material added successfully")),a(!1),o(null),D.resetFields()}catch{V.error("Please fill in all required fields")}finally{P(!1)}},K=x=>{o(x),D.setFieldsValue(x),a(!0)},E=x=>{t(xs({materialId:x}))},se=x=>{x.forEach(W=>{dispatch({type:"DELETE_RAW_MATERIAL",payload:W})}),V.success(`${x.length} materials deleted successfully`),p([])},ue=x=>{j(x),y(!0)},Te=[{title:"Material",dataIndex:"name",key:"name",fixed:"left",width:200,render:x=>e.jsx(Je,{strong:!0,children:x}),sorter:(x,W)=>x.name.localeCompare(W.name)},{title:"Category",dataIndex:"category",key:"category",width:120,render:x=>e.jsx(Z,{color:"blue",children:x}),filters:J.filter(x=>x!=="All").map(x=>({text:x,value:x})),onFilter:(x,W)=>W.category===x},{title:"Stock",key:"stock",width:120,render:x=>e.jsxs("div",{children:[e.jsxs(Je,{strong:!0,children:[x.stockQuantity," ",x.unit]}),x.stockQuantity<=x.minimumStock&&e.jsx(Z,{color:x.stockQuantity===0?"red":"orange",className:"ml-2",children:x.stockQuantity===0?"Out of Stock":"Low Stock"})]}),sorter:(x,W)=>x.stockQuantity-W.stockQuantity},{title:"Min. Stock",dataIndex:"minimumStock",key:"minimumStock",width:120,render:(x,W)=>e.jsxs(Je,{children:[x," ",W.unit]})},{title:"Unit Price",dataIndex:"unitPrice",key:"unitPrice",width:120,render:x=>e.jsxs(Je,{strong:!0,children:["LKR ",x.toFixed(2)]}),sorter:(x,W)=>x.unitPrice-W.unitPrice},{title:"Supplier",dataIndex:"supplier",key:"supplier",width:150,sorter:(x,W)=>(x.supplier||"").localeCompare(W.supplier||"")},{title:"Actions",key:"actions",fixed:"right",width:120,render:x=>e.jsxs(oe,{children:[e.jsx(fe,{title:"Edit",children:e.jsx(A.Text,{icon:"edit",onClick:W=>{W.stopPropagation(),K(x)},className:"text-blue-600"})}),e.jsx(fe,{title:"Delete",children:e.jsx(Dt,{title:"Delete this material?",onConfirm:W=>{W?.stopPropagation(),E(x.id)},okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},children:e.jsx(A.Text,{icon:"delete",danger:!0,onClick:W=>W.stopPropagation()})})})]})}];if(N)return e.jsx(ft,{type:"table"});const Ve=()=>e.jsxs("div",{className:"space-y-4",children:[Y.length>0&&e.jsx(mt,{message:"Low Stock Alert",description:e.jsxs("div",{children:[e.jsxs(Je,{children:[Y.length," material(s) are running low on stock:"]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:Y.map(x=>e.jsxs(Z,{color:"red",className:"mb-1",children:[x.name," (",x.stockQuantity," ",x.unit," left)"]},x.id))})]}),type:"warning",icon:e.jsx(v,{name:"warning"}),showIcon:!0}),e.jsx(st,{title:"Raw Materials",icon:"category",columns:Te,dataSource:le,rowKey:"id",onRow:x=>({onClick:()=>ue(x),className:"cursor-pointer hover:bg-blue-50"}),rowSelection:{type:"checkbox",onChange:x=>p(x)},onDelete:se,searchFields:["name","category","supplier"],searchPlaceholder:"Search raw materials...",extra:e.jsxs(oe,{children:[e.jsx(ee,{value:n,onChange:m,className:"w-40",children:J.map(x=>e.jsx(Me,{value:x,children:x},x))}),e.jsx(A.Primary,{icon:"add",onClick:()=>a(!0),children:"Add Material"})]}),emptyDescription:"No raw materials found",emptyImage:e.jsx(v,{name:"category",className:"text-6xl text-gray-300"})})]}),$e=()=>{const x=[{title:"Material",dataIndex:"name",key:"name",fixed:"left",width:200,render:(Q,me)=>e.jsxs("div",{children:[e.jsx(Je,{strong:!0,children:Q}),e.jsx("br",{}),e.jsx(Je,{type:"secondary",className:"text-xs",children:me.category})]}),sorter:(Q,me)=>Q.name.localeCompare(me.name)},{title:"Current Stock",key:"stock",width:150,render:Q=>{const me=Math.min(Q.stockQuantity/(Q.minimumStock*3)*100,100),ze=Q.stockQuantity===0,d=Q.stockQuantity<=Q.minimumStock,g=Q.stockQuantity<=Q.minimumStock*2;let L="green",G="In Stock";return ze?(L="red",G="Out of Stock"):d?(L="orange",G="Low Stock"):g&&(L="yellow",G="Almost Low"),e.jsxs("div",{children:[e.jsxs(Je,{strong:!0,className:`text-${L==="red"?"red":L==="orange"?"orange":L==="yellow"?"yellow":"green"}-600`,children:[Q.stockQuantity," ",Q.unit]}),e.jsx("br",{}),e.jsx(Z,{color:L,size:"small",children:G}),e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${ze?"bg-red-500":d?"bg-orange-500":g?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.max(me,5)}%`}})}),e.jsxs(Je,{type:"secondary",className:"text-xs",children:["Min: ",Q.minimumStock," ",Q.unit]})]})]})},sorter:(Q,me)=>Q.stockQuantity-me.stockQuantity},{title:"Supplier",dataIndex:"supplier",key:"supplier",width:150,sorter:(Q,me)=>(Q.supplier||"").localeCompare(me.supplier||"")},{title:"Actions",key:"actions",fixed:"right",width:120,render:Q=>e.jsxs(oe,{children:[e.jsx(fe,{title:"Edit",children:e.jsx(A.Text,{icon:"edit",onClick:me=>{me.stopPropagation(),K(Q)},className:"text-blue-600"})}),e.jsx(fe,{title:"Restock",children:e.jsx(A.Text,{icon:"add_shopping_cart",onClick:me=>{me.stopPropagation(),V.info("Restock feature coming soon")},className:"text-green-600"})})]})}],W=[...C.map(Q=>({...Q,alertType:"out-of-stock"})),...k.filter(Q=>Q.stockQuantity<=Q.minimumStock&&Q.stockQuantity>0).map(Q=>({...Q,alertType:"low-stock"})),...u.map(Q=>({...Q,alertType:"almost-low"}))];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(te,{gutter:16,className:"mb-6",children:[e.jsx(I,{span:8,children:e.jsxs(re,{size:"small",className:"text-center border-red-200 bg-red-50",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:C.length}),e.jsx("div",{className:"text-sm text-red-500",children:"Out of Stock"})]})}),e.jsx(I,{span:8,children:e.jsxs(re,{size:"small",className:"text-center border-orange-200 bg-orange-50",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:k.filter(Q=>Q.stockQuantity<=Q.minimumStock&&Q.stockQuantity>0).length}),e.jsx("div",{className:"text-sm text-orange-500",children:"Low Stock"})]})}),e.jsx(I,{span:8,children:e.jsxs(re,{size:"small",className:"text-center border-yellow-200 bg-yellow-50",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:u.length}),e.jsx("div",{className:"text-sm text-yellow-500",children:"Almost Low"})]})})]}),W.length===0?e.jsx(re,{children:e.jsx(wr,{icon:"check_circle",title:"All Materials Well Stocked",description:"No stock alerts at this time. All raw materials have adequate inventory levels."})}):e.jsx(st,{title:"Raw Material Stock Alerts",icon:"warning",subtitle:`${W.length} materials need attention`,columns:x,dataSource:W,rowKey:"id",onRow:Q=>({onClick:()=>ue(Q),className:`cursor-pointer hover:bg-blue-50 ${Q.alertType==="out-of-stock"?"bg-red-50":Q.alertType==="low-stock"?"bg-orange-50":"bg-yellow-50"}`}),searchFields:["name","category","supplier"],searchPlaceholder:"Search materials with stock issues...",showSearch:!0,extra:e.jsx(A.Primary,{icon:"add",onClick:()=>a(!0),children:"Add Material"}),emptyDescription:"No stock alerts",emptyImage:e.jsx(v,{name:"check_circle",className:"text-6xl text-green-300"})})]})},T=[{key:"materials",label:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"category"}),e.jsx("span",{children:"Raw Materials"})]}),children:Ve()},{key:"stock-alerts",label:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"warning"}),e.jsx("span",{children:"Stock Alerts"}),C.length+Y.length+u.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 ml-1",children:C.length+Y.length+u.length})]}),children:$e()}];return e.jsxs(e.Fragment,{children:[e.jsx(re,{children:e.jsx(yr,{activeKey:_,onChange:R,items:T})}),e.jsx(Ne,{title:i?"Edit Raw Material":"Add New Raw Material",open:l,onCancel:()=>{a(!1),o(null),D.resetFields()},footer:null,width:700,destroyOnClose:!0,children:e.jsxs(w,{form:D,layout:"vertical",onFinish:f,className:"mt-4",children:[e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"name",label:"Material Name",rules:[{required:!0,message:"Please enter material name"}],children:e.jsx(ne,{placeholder:"Enter material name"})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"category",label:"Category",rules:[{required:!0,message:"Please select category"}],children:e.jsxs(ee,{placeholder:"Select category",children:[e.jsx(Me,{value:"Wood",children:"Wood"}),e.jsx(Me,{value:"Hardware",children:"Hardware"}),e.jsx(Me,{value:"Upholstery",children:"Upholstery"}),e.jsx(Me,{value:"Finishing",children:"Finishing"}),e.jsx(Me,{value:"Metal",children:"Metal"}),e.jsx(Me,{value:"Fabric",children:"Fabric"})]})})})]}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"unit",label:"Unit",rules:[{required:!0,message:"Please select unit"}],children:e.jsxs(ee,{placeholder:"Select unit",children:[e.jsx(Me,{value:"sq ft",children:"Square Feet"}),e.jsx(Me,{value:"pieces",children:"Pieces"}),e.jsx(Me,{value:"kg",children:"Kilograms"}),e.jsx(Me,{value:"liters",children:"Liters"}),e.jsx(Me,{value:"meters",children:"Meters"})]})})}),e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"unitPrice",label:"Unit Price (LKR)",rules:[{required:!1,message:"Please enter unit price"}],children:e.jsx(Ce,{min:0,step:100,placeholder:"0.00",className:"w-full",formatter:x=>`LKR ${x}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:x=>x.replace(/LKR\s?|(,*)/g,"")})})}),e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"supplier",label:"Supplier",children:e.jsx(ne,{placeholder:"Enter supplier name"})})})]}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"stockQuantity",label:"Current Stock",rules:[{required:!0,message:"Please enter stock quantity"}],children:e.jsx(Ce,{min:0,placeholder:"0",className:"w-full"})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"minimumStock",label:"Minimum Stock Level",rules:[{required:!0,message:"Please enter minimum stock"}],children:e.jsx(Ce,{min:0,placeholder:"0",className:"w-full"})})})]}),e.jsx(w.Item,{name:"description",label:"Description",children:e.jsx(go,{rows:3,placeholder:"Enter description"})}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx(A,{onClick:()=>a(!1),children:"Cancel"}),e.jsxs(A.Primary,{htmlType:"submit",loading:N,children:[i?"Update":"Add"," Material"]})]})]})}),e.jsx(jt,{open:c,onClose:()=>{y(!1),j(null)},title:`Raw Material Details - ${b?.name}`,icon:"category",data:b,type:"rawMaterial",actions:[e.jsx(A,{icon:"edit",onClick:()=>{y(!1),K(b)},children:"Edit Material"},"edit")]})]})}const jo=Object.freeze(Object.defineProperty({__proto__:null,RawMaterialManagement:fo},Symbol.toStringTag,{value:"Module"})),{Title:Mr,Text:ye}=de,{Option:Fe}=ee,{TextArea:bo}=ne;function vo({open:t,onClose:r,transaction:s,onRefund:l}){const[a]=w.useForm(),[i,o]=h.useState(!1),[n,m]=h.useState("full"),[b,j]=h.useState([]),[c,y]=h.useState({});if(!s)return null;const N=async p=>{try{o(!0);let k=0,$=[];n==="full"?(k=s.total,$=s.items.map(R=>({...R,refundQuantity:R.quantity,refundAmount:R.product.price*R.quantity}))):n==="partial"?(k=p.partialAmount,$=[]):n==="items"&&($=b.map(R=>{const J=s.items.find(Y=>Y.product.id===R),le=c[R]||J.quantity;return{...J,refundQuantity:le,refundAmount:J.product.price*le}}),k=$.reduce((R,J)=>R+J.refundAmount,0));const _={id:`REFUND-${Date.now()}`,transactionId:s.id,refundType:n,refundAmount:k,refundItems:$,reason:p.reason,notes:p.notes,refundMethod:p.refundMethod,processedBy:"Current User",timestamp:new Date,status:"processed"};await l(_),V.success("Refund processed successfully"),r(),a.resetFields(),m("full"),j([]),y({})}catch{V.error("Failed to process refund")}finally{o(!1)}},P=(p,k)=>{if(k)j([...b,p]);else{j(b.filter(_=>_!==p));const $={...c};delete $[p],y($)}},D=(p,k)=>{y({...c,[p]:k})},M=()=>b.reduce((p,k)=>{const $=s.items.find(R=>R.product.id===k),_=c[k]||$.quantity;return p+$.product.price*_},0);return e.jsx(Ne,{title:e.jsxs(oe,{children:[e.jsx(v,{name:"undo",className:"text-orange-600"}),e.jsxs("span",{children:["Process Refund - ",s.id]})]}),open:t,onCancel:r,width:800,footer:null,destroyOnClose:!0,children:e.jsxs(w,{form:a,layout:"vertical",onFinish:N,className:"mt-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsx(Mr,{level:5,className:"mb-3",children:"Transaction Summary"}),e.jsxs(te,{gutter:16,children:[e.jsxs(I,{span:6,children:[e.jsx(ye,{type:"secondary",children:"Date:"}),e.jsx("br",{}),e.jsx(ye,{strong:!0,children:new Date(s.timestamp).toLocaleDateString()})]}),e.jsxs(I,{span:6,children:[e.jsx(ye,{type:"secondary",children:"Customer:"}),e.jsx("br",{}),e.jsx(ye,{strong:!0,children:s.customerName||"Walk-in Customer"})]}),e.jsxs(I,{span:6,children:[e.jsx(ye,{type:"secondary",children:"Payment Method:"}),e.jsx("br",{}),e.jsx(Z,{color:"blue",children:s.paymentMethod.toUpperCase()})]}),e.jsxs(I,{span:6,children:[e.jsx(ye,{type:"secondary",children:"Total Amount:"}),e.jsx("br",{}),e.jsxs(ye,{strong:!0,className:"text-blue-600 text-lg",children:["$",s.total.toFixed(2)]})]})]})]}),e.jsx(w.Item,{name:"refundType",label:"Refund Type",rules:[{required:!0,message:"Please select refund type"}],initialValue:"full",children:e.jsx(rt.Group,{value:n,onChange:p=>m(p.target.value),children:e.jsxs(oe,{direction:"vertical",className:"w-full",children:[e.jsx(rt,{value:"full",children:e.jsxs("div",{children:[e.jsx(ye,{strong:!0,children:"Full Refund"}),e.jsx("br",{}),e.jsxs(ye,{type:"secondary",className:"text-sm",children:["Refund the entire transaction amount ($",s.total.toFixed(2),")"]})]})}),e.jsx(rt,{value:"partial",children:e.jsxs("div",{children:[e.jsx(ye,{strong:!0,children:"Partial Amount Refund"}),e.jsx("br",{}),e.jsx(ye,{type:"secondary",className:"text-sm",children:"Refund a specific amount less than the total"})]})}),e.jsx(rt,{value:"items",children:e.jsxs("div",{children:[e.jsx(ye,{strong:!0,children:"Specific Items Refund"}),e.jsx("br",{}),e.jsx(ye,{type:"secondary",className:"text-sm",children:"Refund specific items from the transaction"})]})})]})})}),n==="partial"&&e.jsx(w.Item,{name:"partialAmount",label:"Refund Amount",rules:[{required:!0,message:"Please enter refund amount"},{type:"number",min:.01,max:s.total,message:`Amount must be between $0.01 and $${s.total.toFixed(2)}`}],children:e.jsx(Ce,{min:.01,max:s.total,step:.01,placeholder:"0.00",className:"w-full",prefix:"$"})}),n==="items"&&e.jsxs("div",{className:"mb-6",children:[e.jsx(Mr,{level:5,className:"mb-3",children:"Select Items to Refund"}),e.jsx(qt,{dataSource:s.items,renderItem:(p,k)=>{const $=b.includes(p.product.id),_=p.quantity,R=c[p.product.id]||_;return e.jsx(qt.Item,{className:"border rounded-lg p-3 mb-2",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:J=>P(p.product.id,J.target.checked),className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx(ye,{strong:!0,children:p.product.name}),e.jsx("br",{}),e.jsxs(ye,{type:"secondary",className:"text-sm",children:["SKU: ",p.product.barcode," | Original Qty: ",p.quantity]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs(ye,{strong:!0,className:"text-blue-600",children:["$",p.product.price.toFixed(2)," each"]})})]}),$&&e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"text-sm",children:"Refund Quantity:"}),e.jsx(Ce,{min:1,max:_,value:R,onChange:J=>D(p.product.id,J),size:"small",className:"w-20"})]}),e.jsxs(ye,{strong:!0,className:"text-green-600",children:["Refund: $",(p.product.price*R).toFixed(2)]})]})]})})}}),b.length>0&&e.jsx("div",{className:"bg-green-50 p-3 rounded-lg mt-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(ye,{strong:!0,children:"Total Items Refund:"}),e.jsxs(ye,{strong:!0,className:"text-green-600 text-lg",children:["$",M().toFixed(2)]})]})})]}),e.jsx(w.Item,{name:"reason",label:"Refund Reason",rules:[{required:!0,message:"Please select a reason"}],children:e.jsxs(ee,{placeholder:"Select refund reason",children:[e.jsx(Fe,{value:"defective",children:"Defective Product"}),e.jsx(Fe,{value:"wrong-item",children:"Wrong Item Delivered"}),e.jsx(Fe,{value:"customer-request",children:"Customer Request"}),e.jsx(Fe,{value:"damaged-shipping",children:"Damaged During Shipping"}),e.jsx(Fe,{value:"not-as-described",children:"Not as Described"}),e.jsx(Fe,{value:"duplicate-order",children:"Duplicate Order"}),e.jsx(Fe,{value:"other",children:"Other"})]})}),e.jsx(w.Item,{name:"refundMethod",label:"Refund Method",rules:[{required:!0,message:"Please select refund method"}],initialValue:s.paymentMethod,children:e.jsxs(ee,{children:[e.jsx(Fe,{value:"original",children:"Original Payment Method"}),e.jsx(Fe,{value:"cash",children:"Cash"}),e.jsx(Fe,{value:"store-credit",children:"Store Credit"}),e.jsx(Fe,{value:"bank-transfer",children:"Bank Transfer"})]})}),e.jsx(w.Item,{name:"notes",label:"Additional Notes",children:e.jsx(bo,{rows:3,placeholder:"Enter any additional notes about this refund..."})}),e.jsx(mt,{message:"Refund Processing",description:"This action will process the refund and update inventory levels. This action cannot be undone.",type:"warning",showIcon:!0,className:"mb-4"}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(A,{onClick:r,children:"Cancel"}),e.jsx(A.Primary,{htmlType:"submit",loading:i,icon:"undo",danger:!0,children:"Process Refund"})]})]})})}const{Title:Pc,Text:Ft}=de,{Option:Ut}=ee;function So(){const t=ke(),{logAction:r}=Ge(),[s,l]=h.useState(""),[a,i]=h.useState("all"),[o,n]=h.useState(null),[m,b]=h.useState(!1),[j,c]=h.useState(!1),[y,N]=h.useState(!1),[P,D]=h.useState(!1),[M,p]=h.useState("detailed"),[k,$]=h.useState([]),{transactionsList:_,loading:R,error:J}=ie(g=>g.transactions);h.useEffect(()=>{t(ss())},[t]);const Y=[..._].sort((g,L)=>new Date(L.timestamp)-new Date(g.timestamp)).filter(g=>{const L=g.id.toLowerCase().includes(s.toLowerCase())||g.customerName?.toLowerCase().includes(s.toLowerCase())||g.cashier?.toLowerCase().includes(s.toLowerCase())||g.salesperson?.toLowerCase().includes(s.toLowerCase());if(a==="today"){const G=new Date,he=new Date(g.timestamp);return L&&he.toDateString()===G.toDateString()}else if(a==="week"){const G=new Date;G.setDate(G.getDate()-7);const he=new Date(g.timestamp);return L&&he>=G}else if(a==="month"){const G=new Date;G.setMonth(G.getMonth()-1);const he=new Date(g.timestamp);return L&&he>=G}return L}),C=Y.reduce((g,L)=>g+L.total,0),u=Y.length,f=u>0?C/u:0,K=g=>{n(g),b(!0)},E=g=>{n(g),b(!0)},se=(g,L="detailed")=>{n(g),p(L),c(!0)},ue=g=>{n(g),N(!0)},Te=g=>{n(g),D(!0)},Ve=()=>{b(!1),n(null)},$e=()=>{c(!1)},T=()=>{N(!1)},x=()=>{D(!1)},W=async g=>{try{const L={...o,refunds:[...o.refunds||[],g],status:g.refundType==="full"?"refunded":"partially-refunded"};t(as({transactionId:o.id,refundData:g,updatedTransaction:L})),g.refundItems&&g.refundItems.length>0&&g.refundItems.forEach(G=>{t(il({productId:G.product.id,quantity:G.refundQuantity}))}),r&&r("CREATE","transactions",`Processed ${g.refundType} refund for transaction ${o.id}`,{transactionId:o.id,refundId:g.id,refundAmount:g.refundAmount,refundType:g.refundType}),V.success("Refund processed successfully")}catch(L){throw V.error("Failed to process refund"),L}},Q=g=>{switch(g){case"cash":return"payments";case"card":return"credit_card";case"digital":return"smartphone";default:return"payment"}},me=(g,L)=>{if(L&&L.length>0){const G=L.reduce((Le,et)=>Le+et.refundAmount,0),he=Y.find(Le=>Le.refunds===L);if(he&&G>=he.total)return"red";if(G>0)return"orange"}switch(g){case"completed":return"green";case"pending":return"orange";case"cancelled":return"red";case"refunded":return"red";case"partially-refunded":return"orange";default:return"blue"}},ze=(g,L)=>{if(L&&L.length>0){const G=L.reduce((Le,et)=>Le+et.refundAmount,0),he=Y.find(Le=>Le.refunds===L);if(he&&G>=he.total)return"REFUNDED";if(G>0)return"PARTIAL REFUND"}return(g||"completed").toUpperCase()},d=[{title:"Order ID",dataIndex:"id",key:"id",fixed:"left",width:150,render:g=>e.jsx(Ft,{code:!0,children:g}),sorter:(g,L)=>g.id.localeCompare(L.id)},{title:"Date",dataIndex:"timestamp",key:"timestamp",width:120,sorter:(g,L)=>new Date(L.timestamp)-new Date(g.timestamp),defaultSortOrder:"ascend",render:g=>e.jsx(Ft,{children:new Date(g).toLocaleDateString()})},{title:"Customer",key:"customer",width:150,render:g=>e.jsxs("div",{children:[e.jsx(Ft,{children:g.customerName||"Walk-in Customer"}),g.items.some(L=>L.selectedVariant)&&e.jsx(Z,{color:"blue",className:"ml-1",children:"Has Variants"})]})},{title:"Items",dataIndex:"items",key:"items",width:80,render:g=>e.jsx(Z,{color:"blue",children:g.length}),sorter:(g,L)=>g.items.length-L.items.length},{title:"Total",dataIndex:"total",key:"total",width:120,sorter:(g,L)=>g.total-L.total,render:g=>e.jsxs(Ft,{strong:!0,className:"text-blue-600",children:["LKR ",g.toFixed(2)]})},{title:"Payment",dataIndex:"paymentMethod",key:"paymentMethod",width:100,render:g=>e.jsx(Z,{icon:e.jsx(v,{name:Q(g)}),color:"green",children:g.toUpperCase()}),filters:[{text:"Card",value:"card"},{text:"Cash",value:"cash"},{text:"Digital",value:"digital"}],onFilter:(g,L)=>L.paymentMethod===g},{title:"Status",key:"status",width:120,render:g=>e.jsx(Z,{color:me(g.status,g.refunds),children:ze(g.status,g.refunds)}),filters:[{text:"Completed",value:"completed"},{text:"Refunded",value:"refunded"},{text:"Partially Refunded",value:"partially-refunded"}],onFilter:(g,L)=>L.status===g},{title:"Actions",key:"actions",fixed:"right",width:100,render:g=>e.jsxs(oe,{children:[e.jsx(fe,{title:"View Details",children:e.jsx(A.Text,{icon:"visibility",onClick:L=>{L.stopPropagation(),K(g)},className:"text-blue-600"})}),e.jsx(fe,{title:"Print Invoice",children:e.jsx(A.Text,{icon:"receipt_long",onClick:L=>{L.stopPropagation(),se(g,"detailed")},className:"text-gray-600"})}),g.status!=="refunded"&&e.jsx(fe,{title:"Process Refund",children:e.jsx(A.Text,{icon:"undo",onClick:L=>{L.stopPropagation(),Te(g)},className:"text-red-600"})})]})}];return R?e.jsx(ft,{type:"table"}):e.jsxs(oe,{direction:"vertical",size:"large",className:"w-full",children:[e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:8,children:e.jsx(re,{children:e.jsx(rr,{title:"Total Revenue",value:C,precision:2,prefix:"LKR ",valueStyle:{color:"#0E72BD"}})})}),e.jsx(I,{span:8,children:e.jsx(re,{children:e.jsx(rr,{title:"Total Orders",value:u,valueStyle:{color:"#52c41a"}})})}),e.jsx(I,{span:8,children:e.jsx(re,{children:e.jsx(rr,{title:"Average Order Value",value:f,precision:2,prefix:"LKR ",valueStyle:{color:"#fa8c16"}})})})]}),e.jsx(st,{title:"Orders",icon:"receipt_long",columns:d,dataSource:Y,rowKey:"id",rowSelection:{type:"checkbox",onChange:g=>$(g)},onRow:g=>({onClick:()=>E(g),className:"cursor-pointer hover:bg-blue-50"}),searchFields:["id","customerName","cashier","salesperson"],searchPlaceholder:"Search orders...",extra:e.jsxs(ee,{value:a,onChange:i,className:"w-32",children:[e.jsx(Ut,{value:"all",children:"All Time"}),e.jsx(Ut,{value:"today",children:"Today"}),e.jsx(Ut,{value:"week",children:"This Week"}),e.jsx(Ut,{value:"month",children:"This Month"})]}),emptyDescription:"No orders found",emptyImage:e.jsx(v,{name:"receipt_long",className:"text-6xl text-gray-300"})}),e.jsx(jt,{open:m,onClose:Ve,title:`Order Details - ${o?.id}`,icon:"receipt_long",data:o,type:"transaction",actions:[o?.status!=="refunded"&&e.jsx(A,{icon:"undo",danger:!0,onClick:()=>{b(!1),Te(o)},children:"Process Refund"},"refund"),e.jsx(A,{icon:"label",onClick:()=>{b(!1),ue(o)},children:"Print Inventory Labels"},"inventory-labels"),e.jsx(A.Primary,{icon:"receipt_long",onClick:()=>{b(!1),se(o,"detailed")},children:"View Invoice"},"invoice")].filter(Boolean)}),e.jsx(mo,{open:j,onClose:$e,transaction:o,type:M}),e.jsx(ho,{open:y,onClose:T,transaction:o}),e.jsx(vo,{open:P,onClose:x,transaction:o,onRefund:W})]})}const wo=Object.freeze(Object.defineProperty({__proto__:null,TransactionHistory:So},Symbol.toStringTag,{value:"Module"})),{Text:lr}=de;function Ac({type:t="warning",title:r,materials:s=[],products:l=[],onViewDetails:a,onDismiss:i,className:o=""}){const n=()=>{switch(t){case"error":return"error";case"info":return"info";default:return"warning"}},m=()=>{switch(t){case"error":return"error";case"info":return"info";default:return"warning"}};return s.length+l.length===0?null:e.jsx(mt,{type:n(),showIcon:!0,icon:e.jsx(v,{name:m()}),className:`mb-4 ${o}`,message:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(lr,{strong:!0,children:r}),e.jsxs(oe,{children:[a&&e.jsx(A.Text,{size:"small",onClick:a,className:"text-blue-600",children:"View Details"}),i&&e.jsx(A.Text,{size:"small",icon:"close",onClick:i})]})]}),description:e.jsxs("div",{className:"space-y-3",children:[s.length>0&&e.jsxs("div",{children:[e.jsxs(lr,{strong:!0,className:"block mb-2",children:["Raw Materials (",s.length,"):"]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.slice(0,5).map(j=>e.jsxs(Z,{color:"red",className:"mb-1",children:[j.name," (",j.stockQuantity," ",j.unit," left)"]},j.id)),s.length>5&&e.jsxs(Z,{className:"mb-1",children:["+",s.length-5," more"]})]})]}),l.length>0&&e.jsxs("div",{children:[s.length>0&&e.jsx(De,{className:"my-2"}),e.jsxs(lr,{strong:!0,className:"block mb-2",children:["Products (",l.length,"):"]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.slice(0,5).map(j=>e.jsxs(Z,{color:"orange",className:"mb-1",children:[j.name," (",j.stock," units left)"]},j.id)),l.length>5&&e.jsxs(Z,{className:"mb-1",children:["+",l.length-5," more"]})]})]})]})})}function Xe(t,r){if(!t||t.length===0)return"";const s=r.map(a=>`"${a.label}"`).join(","),l=t.map(a=>r.map(i=>{let o="";return i.key.includes(".")?o=i.key.split(".").reduce((m,b)=>m?.[b],a):o=a[i.key],i.type==="date"&&o?o=be(o).format("YYYY-MM-DD HH:mm:ss"):i.type==="currency"&&typeof o=="number"?o=o.toFixed(2):i.type==="array"&&Array.isArray(o)?o=o.map(n=>typeof n=="object"?n.name||n.id:n).join("; "):typeof o=="object"&&o!==null?o=JSON.stringify(o):o==null&&(o=""),`"${String(o).replace(/"/g,'""')}"`}).join(","));return[s,...l].join(`
`)}function Ze(t,r){const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");if(l.download!==void 0){const a=URL.createObjectURL(s);l.setAttribute("href",a),l.setAttribute("download",r),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}const Co=[{key:"id",label:"Product ID",type:"text"},{key:"name",label:"Product Name",type:"text"},{key:"category",label:"Category",type:"text"},{key:"barcode",label:"SKU/Barcode",type:"text"},{key:"price",label:"Price",type:"currency"},{key:"stock",label:"Stock",type:"number"},{key:"description",label:"Description",type:"text"},{key:"material",label:"Material",type:"text"},{key:"color",label:"Color",type:"text"},{key:"hasVariations",label:"Has Variations",type:"boolean"},{key:"isVariation",label:"Is Variation",type:"boolean"},{key:"variationName",label:"Variation Name",type:"text"},{key:"parentProductName",label:"Parent Product",type:"text"},{key:"totalSizes",label:"Total Sizes",type:"number"},{key:"totalColors",label:"Total Colors",type:"number"}],No=[{key:"id",label:"Material ID",type:"text"},{key:"name",label:"Material Name",type:"text"},{key:"category",label:"Category",type:"text"},{key:"unit",label:"Unit",type:"text"},{key:"stockQuantity",label:"Stock Quantity",type:"number"},{key:"minimumStock",label:"Minimum Stock",type:"number"},{key:"unitPrice",label:"Unit Price",type:"currency"},{key:"supplier",label:"Supplier",type:"text"},{key:"description",label:"Description",type:"text"}],ko=[{key:"id",label:"Transaction ID",type:"text"},{key:"timestamp",label:"Date & Time",type:"date"},{key:"customerName",label:"Customer Name",type:"text"},{key:"customerPhone",label:"Customer Phone",type:"text"},{key:"customerEmail",label:"Customer Email",type:"text"},{key:"customerAddress",label:"Customer Address",type:"text"},{key:"cashier",label:"Cashier",type:"text"},{key:"salesperson",label:"Sales Person",type:"text"},{key:"paymentMethod",label:"Payment Method",type:"text"},{key:"subtotal",label:"Subtotal",type:"currency"},{key:"categoryTaxTotal",label:"Category Tax",type:"currency"},{key:"fullBillTaxTotal",label:"Full Bill Tax",type:"currency"},{key:"totalTax",label:"Total Tax",type:"currency"},{key:"discount",label:"Discount",type:"currency"},{key:"total",label:"Total Amount",type:"currency"},{key:"appliedCoupon",label:"Applied Coupon",type:"text"},{key:"status",label:"Status",type:"text"},{key:"notes",label:"Notes",type:"text"},{key:"itemCount",label:"Number of Items",type:"number"},{key:"totalQuantity",label:"Total Quantity",type:"number"}],To=[{key:"transactionId",label:"Transaction ID",type:"text"},{key:"transactionDate",label:"Transaction Date",type:"date"},{key:"customerName",label:"Customer Name",type:"text"},{key:"productId",label:"Product ID",type:"text"},{key:"productName",label:"Product Name",type:"text"},{key:"productSKU",label:"Product SKU",type:"text"},{key:"productCategory",label:"Product Category",type:"text"},{key:"quantity",label:"Quantity",type:"number"},{key:"unitPrice",label:"Unit Price",type:"currency"},{key:"totalPrice",label:"Total Price",type:"currency"},{key:"cashier",label:"Cashier",type:"text"},{key:"salesperson",label:"Sales Person",type:"text"}],Io=[{key:"id",label:"Coupon ID",type:"text"},{key:"code",label:"Coupon Code",type:"text"},{key:"description",label:"Description",type:"text"},{key:"discountType",label:"Discount Type",type:"text"},{key:"discountPercent",label:"Discount Percentage",type:"number"},{key:"discountAmount",label:"Discount Amount",type:"currency"},{key:"minimumAmount",label:"Minimum Amount",type:"currency"},{key:"maxDiscount",label:"Maximum Discount",type:"currency"},{key:"usageLimit",label:"Usage Limit",type:"number"},{key:"usedCount",label:"Used Count",type:"number"},{key:"validFrom",label:"Valid From",type:"date"},{key:"validTo",label:"Valid To",type:"date"},{key:"isActive",label:"Is Active",type:"boolean"},{key:"applicableCategories",label:"Applicable Categories",type:"array"},{key:"createdAt",label:"Created At",type:"date"}],Po=[{key:"id",label:"User ID",type:"text"},{key:"username",label:"Username",type:"text"},{key:"firstName",label:"First Name",type:"text"},{key:"lastName",label:"Last Name",type:"text"},{key:"email",label:"Email",type:"text"},{key:"role",label:"Role",type:"text"},{key:"isActive",label:"Is Active",type:"boolean"},{key:"createdAt",label:"Created At",type:"date"},{key:"lastLogin",label:"Last Login",type:"date"}],Ao=[{key:"id",label:"Audit ID",type:"text"},{key:"timestamp",label:"Timestamp",type:"date"},{key:"userId",label:"User ID",type:"text"},{key:"userName",label:"User Name",type:"text"},{key:"action",label:"Action",type:"text"},{key:"module",label:"Module",type:"text"},{key:"description",label:"Description",type:"text"},{key:"ipAddress",label:"IP Address",type:"text"},{key:"details",label:"Details",type:"object"}];function Do(t,r={}){let s=[...t];r.category&&r.category!=="all"&&(s=s.filter(o=>o.category===r.category)),r.hasVariations!==void 0&&(s=s.filter(o=>o.hasVariations===r.hasVariations)),r.lowStock&&(s=s.filter(o=>o.stock<=10)),r.outOfStock&&(s=s.filter(o=>o.stock===0)),r.priceRange&&(s=s.filter(o=>o.price>=r.priceRange.min&&o.price<=r.priceRange.max));const l=s.map(o=>({...o,itemCount:o.items?.length||0,totalQuantity:o.items?.reduce((n,m)=>n+m.quantity,0)||0})),a=Xe(l,Co),i=`products-export-${be().format("YYYY-MM-DD-HHmm")}.csv`;Ze(a,i)}function Eo(t,r={}){let s=[...t];r.category&&r.category!=="all"&&(s=s.filter(i=>i.category===r.category)),r.lowStock&&(s=s.filter(i=>i.stockQuantity<=i.minimumStock)),r.outOfStock&&(s=s.filter(i=>i.stockQuantity===0)),r.supplier&&(s=s.filter(i=>i.supplier?.toLowerCase().includes(r.supplier.toLowerCase())));const l=Xe(s,No),a=`raw-materials-export-${be().format("YYYY-MM-DD-HHmm")}.csv`;Ze(l,a)}function $o(t,r={}){let s=[...t];if(r.dateRange&&r.dateRange.length===2){const[o,n]=r.dateRange;s=s.filter(m=>{const b=be(m.timestamp);return b.isAfter(o.startOf("day"))&&b.isBefore(n.endOf("day"))})}r.paymentMethod&&r.paymentMethod!=="all"&&(s=s.filter(o=>o.paymentMethod===r.paymentMethod)),r.status&&r.status!=="all"&&(s=s.filter(o=>o.status===r.status)),r.cashier&&(s=s.filter(o=>o.cashier?.toLowerCase().includes(r.cashier.toLowerCase()))),r.salesperson&&(s=s.filter(o=>o.salesperson?.toLowerCase().includes(r.salesperson.toLowerCase()))),r.minAmount&&(s=s.filter(o=>o.total>=r.minAmount)),r.maxAmount&&(s=s.filter(o=>o.total<=r.maxAmount));const l=s.map(o=>({...o,itemCount:o.items?.length||0,totalQuantity:o.items?.reduce((n,m)=>n+m.quantity,0)||0})),a=Xe(l,ko),i=`transactions-export-${be().format("YYYY-MM-DD-HHmm")}.csv`;Ze(a,i)}function Lo(t,r={}){let s=[...t];if(r.dateRange&&r.dateRange.length===2){const[n,m]=r.dateRange;s=s.filter(b=>{const j=be(b.timestamp);return j.isAfter(n.startOf("day"))&&j.isBefore(m.endOf("day"))})}const l=[];s.forEach(n=>{n.items.forEach(m=>{l.push({transactionId:n.id,transactionDate:n.timestamp,customerName:n.customerName||"Walk-in Customer",productId:m.product.id,productName:m.product.name,productSKU:m.product.barcode,productCategory:m.product.category,quantity:m.quantity,unitPrice:m.product.price,totalPrice:m.product.price*m.quantity,cashier:n.cashier,salesperson:n.salesperson})})});let a=l;r.productCategory&&r.productCategory!=="all"&&(a=a.filter(n=>n.productCategory===r.productCategory)),r.productName&&(a=a.filter(n=>n.productName.toLowerCase().includes(r.productName.toLowerCase())));const i=Xe(a,To),o=`transaction-items-export-${be().format("YYYY-MM-DD-HHmm")}.csv`;Ze(i,o)}function Ro(t,r={}){let s=[...t];if(r.isActive!==void 0&&(s=s.filter(i=>i.isActive===r.isActive)),r.discountType&&r.discountType!=="all"&&(s=s.filter(i=>i.discountType===r.discountType)),r.expired){const i=new Date;s=s.filter(o=>o.validTo&&new Date(o.validTo)<i)}r.usedUp&&(s=s.filter(i=>i.usageLimit&&i.usedCount>=i.usageLimit));const l=Xe(s,Io),a=`coupons-export-${be().format("YYYY-MM-DD-HHmm")}.csv`;Ze(l,a)}function Mo(t,r={}){let s=[...t];if(r.role&&r.role!=="all"&&(s=s.filter(i=>i.role===r.role)),r.isActive!==void 0&&(s=s.filter(i=>i.isActive===r.isActive)),r.recentLogin){const i=be().subtract(30,"days");s=s.filter(o=>o.lastLogin&&be(o.lastLogin).isAfter(i))}const l=Xe(s,Po),a=`users-export-${be().format("YYYY-MM-DD-HHmm")}.csv`;Ze(l,a)}function Oo(t,r={}){let s=[...t];if(r.dateRange&&r.dateRange.length===2){const[i,o]=r.dateRange;s=s.filter(n=>{const m=be(n.timestamp);return m.isAfter(i.startOf("day"))&&m.isBefore(o.endOf("day"))})}r.action&&r.action!=="all"&&(s=s.filter(i=>i.action===r.action)),r.module&&r.module!=="all"&&(s=s.filter(i=>i.module===r.module)),r.userId&&(s=s.filter(i=>i.userId===r.userId));const l=Xe(s,Ao),a=`audit-trail-export-${be().format("YYYY-MM-DD-HHmm")}.csv`;Ze(l,a)}function Bo(t,r={}){const{products:s,rawMaterials:l,transactions:a,coupons:i,users:o}=t,n=[{reportDate:be().format("YYYY-MM-DD HH:mm:ss"),totalProducts:s.length,totalRawMaterials:l.length,totalTransactions:a.length,totalRevenue:a.reduce((c,y)=>c+y.total,0),totalCoupons:i.length,activeCoupons:i.filter(c=>c.isActive).length,totalUsers:o.length,activeUsers:o.filter(c=>c.isActive).length,lowStockProducts:s.filter(c=>c.stock<=10).length,outOfStockProducts:s.filter(c=>c.stock===0).length,lowStockMaterials:l.filter(c=>c.stockQuantity<=c.minimumStock).length,outOfStockMaterials:l.filter(c=>c.stockQuantity===0).length}],b=Xe(n,[{key:"reportDate",label:"Report Date",type:"text"},{key:"totalProducts",label:"Total Products",type:"number"},{key:"totalRawMaterials",label:"Total Raw Materials",type:"number"},{key:"totalTransactions",label:"Total Transactions",type:"number"},{key:"totalRevenue",label:"Total Revenue",type:"currency"},{key:"totalCoupons",label:"Total Coupons",type:"number"},{key:"activeCoupons",label:"Active Coupons",type:"number"},{key:"totalUsers",label:"Total Users",type:"number"},{key:"activeUsers",label:"Active Users",type:"number"},{key:"lowStockProducts",label:"Low Stock Products",type:"number"},{key:"outOfStockProducts",label:"Out of Stock Products",type:"number"},{key:"lowStockMaterials",label:"Low Stock Materials",type:"number"},{key:"outOfStockMaterials",label:"Out of Stock Materials",type:"number"}]),j=`comprehensive-report-${be().format("YYYY-MM-DD-HHmm")}.csv`;Ze(b,j)}const{Title:Or,Text:Ue}=de,{Option:X}=ee,{RangePicker:nr}=Yt;function Dc({open:t,onClose:r,dataType:s="products",data:l={},title:a="Export Data"}){const[i]=w.useForm(),[o,n]=h.useState(!1),[m,b]=h.useState("filtered"),j=async()=>{try{n(!0);const J={...i.getFieldsValue()};switch(J.dateRange&&(J.dateRange=J.dateRange.map(le=>be(le))),s){case"products":Do(l.products||[],J);break;case"raw-materials":Eo(l.rawMaterials||[],J);break;case"transactions":$o(l.transactions||[],J);break;case"transaction-items":Lo(l.transactions||[],J);break;case"coupons":Ro(l.coupons||[],J);break;case"users":Mo(l.users||[],J);break;case"audit-trail":Oo(l.auditTrail||[],J);break;case"comprehensive":Bo(l,J);break;default:throw new Error("Unknown data type")}V.success("Export completed successfully!"),r()}catch(R){console.error("Export error:",R),V.error("Export failed. Please try again.")}finally{n(!1)}},c=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"category",label:"Category",children:e.jsxs(ee,{placeholder:"All categories",allowClear:!0,children:[e.jsx(X,{value:"all",children:"All Categories"}),l.categories?.map(R=>e.jsx(X,{value:R.name,children:R.name},R.id))]})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"hasVariations",label:"Product Type",children:e.jsxs(ee,{placeholder:"All types",allowClear:!0,children:[e.jsx(X,{value:!0,children:"Products with Variations"}),e.jsx(X,{value:!1,children:"Single Products"})]})})})]}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"priceRange",label:"Price Range",children:e.jsxs(ne.Group,{compact:!0,children:[e.jsx(w.Item,{name:["priceRange","min"],noStyle:!0,children:e.jsx(Ce,{placeholder:"Min price",style:{width:"50%"}})}),e.jsx(w.Item,{name:["priceRange","max"],noStyle:!0,children:e.jsx(Ce,{placeholder:"Max price",style:{width:"50%"}})})]})})}),e.jsx(I,{span:12,children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(w.Item,{name:"lowStock",valuePropName:"checked",children:[e.jsx(ge,{})," ",e.jsx(Ue,{children:"Low Stock Only (â¤10 units)"})]}),e.jsxs(w.Item,{name:"outOfStock",valuePropName:"checked",children:[e.jsx(ge,{})," ",e.jsx(Ue,{children:"Out of Stock Only"})]})]})})]})]}),y=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"category",label:"Category",children:e.jsxs(ee,{placeholder:"All categories",allowClear:!0,children:[e.jsx(X,{value:"all",children:"All Categories"}),e.jsx(X,{value:"Wood",children:"Wood"}),e.jsx(X,{value:"Hardware",children:"Hardware"}),e.jsx(X,{value:"Upholstery",children:"Upholstery"}),e.jsx(X,{value:"Finishing",children:"Finishing"}),e.jsx(X,{value:"Metal",children:"Metal"}),e.jsx(X,{value:"Fabric",children:"Fabric"})]})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"supplier",label:"Supplier",children:e.jsx(ne,{placeholder:"Filter by supplier name"})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(w.Item,{name:"lowStock",valuePropName:"checked",children:[e.jsx(ge,{})," ",e.jsx(Ue,{children:"Low Stock Only"})]}),e.jsxs(w.Item,{name:"outOfStock",valuePropName:"checked",children:[e.jsx(ge,{})," ",e.jsx(Ue,{children:"Out of Stock Only"})]})]})]}),N=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(w.Item,{name:"dateRange",label:"Date Range",children:e.jsx(nr,{className:"w-full",format:"YYYY-MM-DD",placeholder:["Start Date","End Date"]})}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"paymentMethod",label:"Payment Method",children:e.jsxs(ee,{placeholder:"All methods",allowClear:!0,children:[e.jsx(X,{value:"all",children:"All Methods"}),e.jsx(X,{value:"cash",children:"Cash"}),e.jsx(X,{value:"card",children:"Card"}),e.jsx(X,{value:"digital",children:"Digital"})]})})}),e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"status",label:"Status",children:e.jsxs(ee,{placeholder:"All statuses",allowClear:!0,children:[e.jsx(X,{value:"all",children:"All Statuses"}),e.jsx(X,{value:"completed",children:"Completed"}),e.jsx(X,{value:"pending",children:"Pending"}),e.jsx(X,{value:"cancelled",children:"Cancelled"})]})})}),e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"cashier",label:"Cashier",children:e.jsx(ne,{placeholder:"Filter by cashier"})})})]}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"minAmount",label:"Minimum Amount",children:e.jsx(Ce,{placeholder:"0.00",className:"w-full",prefix:"$",min:0,step:.01})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"maxAmount",label:"Maximum Amount",children:e.jsx(Ce,{placeholder:"No limit",className:"w-full",prefix:"$",min:0,step:.01})})})]})]}),P=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(w.Item,{name:"dateRange",label:"Date Range",children:e.jsx(nr,{className:"w-full",format:"YYYY-MM-DD",placeholder:["Start Date","End Date"]})}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"productCategory",label:"Product Category",children:e.jsxs(ee,{placeholder:"All categories",allowClear:!0,children:[e.jsx(X,{value:"all",children:"All Categories"}),l.categories?.map(R=>e.jsx(X,{value:R.name,children:R.name},R.id))]})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"productName",label:"Product Name",children:e.jsx(ne,{placeholder:"Filter by product name"})})})]})]}),D=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"discountType",label:"Discount Type",children:e.jsxs(ee,{placeholder:"All types",allowClear:!0,children:[e.jsx(X,{value:"all",children:"All Types"}),e.jsx(X,{value:"percentage",children:"Percentage"}),e.jsx(X,{value:"fixed",children:"Fixed Amount"})]})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"isActive",label:"Status",children:e.jsxs(ee,{placeholder:"All statuses",allowClear:!0,children:[e.jsx(X,{value:!0,children:"Active"}),e.jsx(X,{value:!1,children:"Inactive"})]})})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(w.Item,{name:"expired",valuePropName:"checked",children:[e.jsx(ge,{})," ",e.jsx(Ue,{children:"Expired Coupons Only"})]}),e.jsxs(w.Item,{name:"usedUp",valuePropName:"checked",children:[e.jsx(ge,{})," ",e.jsx(Ue,{children:"Used Up Coupons Only"})]})]})]}),M=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"role",label:"Role",children:e.jsxs(ee,{placeholder:"All roles",allowClear:!0,children:[e.jsx(X,{value:"all",children:"All Roles"}),e.jsx(X,{value:"admin",children:"Administrator"}),e.jsx(X,{value:"manager",children:"Manager"}),e.jsx(X,{value:"cashier",children:"Cashier"})]})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"isActive",label:"Status",children:e.jsxs(ee,{placeholder:"All statuses",allowClear:!0,children:[e.jsx(X,{value:!0,children:"Active"}),e.jsx(X,{value:!1,children:"Inactive"})]})})})]}),e.jsxs(w.Item,{name:"recentLogin",valuePropName:"checked",children:[e.jsx(ge,{})," ",e.jsx(Ue,{children:"Users with Recent Login (Last 30 days)"})]})]}),p=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(w.Item,{name:"dateRange",label:"Date Range",children:e.jsx(nr,{className:"w-full",format:"YYYY-MM-DD",placeholder:["Start Date","End Date"]})}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"action",label:"Action",children:e.jsxs(ee,{placeholder:"All actions",allowClear:!0,children:[e.jsx(X,{value:"all",children:"All Actions"}),e.jsx(X,{value:"CREATE",children:"Create"}),e.jsx(X,{value:"UPDATE",children:"Update"}),e.jsx(X,{value:"DELETE",children:"Delete"}),e.jsx(X,{value:"LOGIN",children:"Login"}),e.jsx(X,{value:"LOGOUT",children:"Logout"})]})})}),e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"module",label:"Module",children:e.jsxs(ee,{placeholder:"All modules",allowClear:!0,children:[e.jsx(X,{value:"all",children:"All Modules"}),e.jsx(X,{value:"products",children:"Products"}),e.jsx(X,{value:"raw-materials",children:"Raw Materials"}),e.jsx(X,{value:"transactions",children:"Transactions"}),e.jsx(X,{value:"user-management",children:"User Management"}),e.jsx(X,{value:"authentication",children:"Authentication"})]})})}),e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"userId",label:"User ID",children:e.jsx(ne,{placeholder:"Filter by user ID"})})})]})]}),k=()=>{switch(s){case"products":return c();case"raw-materials":return y();case"transactions":return N();case"transaction-items":return P();case"coupons":return D();case"users":return M();case"audit-trail":return p();case"comprehensive":return e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{name:"analytics",className:"text-4xl text-blue-600 mb-4"}),e.jsx(Or,{level:4,children:"Comprehensive Report"}),e.jsx(Ue,{type:"secondary",children:"This will export a summary report with key metrics from all modules."})]});default:return null}},$=()=>({products:"Products","raw-materials":"Raw Materials",transactions:"Transactions","transaction-items":"Transaction Items",coupons:"Coupons",users:"Users","audit-trail":"Audit Trail",comprehensive:"Comprehensive Report"})[s]||"Data",_=()=>({products:l.products?.length||0,"raw-materials":l.rawMaterials?.length||0,transactions:l.transactions?.length||0,"transaction-items":l.transactions?.reduce((J,le)=>J+le.items.length,0)||0,coupons:l.coupons?.length||0,users:l.users?.length||0,"audit-trail":l.auditTrail?.length||0,comprehensive:"All Data"})[s]||0;return e.jsx(Ne,{title:e.jsxs(oe,{children:[e.jsx(v,{name:"download",className:"text-blue-600"}),e.jsxs("span",{children:["Export ",$()]})]}),open:t,onCancel:r,width:700,footer:[e.jsx(A,{onClick:r,children:"Cancel"},"cancel"),e.jsx(A.Primary,{onClick:j,loading:o,icon:"download",children:"Export CSV"},"export")],destroyOnClose:!0,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(re,{size:"small",className:"bg-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ue,{strong:!0,children:["Export Type: ",$()]}),e.jsx("br",{}),e.jsxs(Ue,{type:"secondary",children:["Total Records: ",_()]})]}),e.jsx(v,{name:"table_chart",className:"text-blue-600 text-2xl"})]})}),e.jsxs("div",{children:[e.jsx(Or,{level:5,className:"mb-4",children:"Export Filters"}),e.jsx(w,{form:i,layout:"vertical",preserve:!1,children:k()})]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs(Ue,{className:"text-sm",children:[e.jsx(v,{name:"info",className:"mr-2 text-blue-600"}),e.jsx("strong",{children:"Export Format:"})," The data will be exported as a CSV file that can be opened in Excel, Google Sheets, or any spreadsheet application. All filters will be applied to reduce the exported data to only what you need."]})})]})})}const{Title:Br,Text:ve}=de,{TextArea:Vt}=ne,{Option:St}=ee;function _o(){const[t]=w.useForm(),[r,s]=h.useState(!1),[l,a]=h.useState(null),[i,o]=h.useState("/VCARELogo 1.png"),[n,m]=h.useState("#0E72BD"),[b,j]=h.useState("#52c41a"),[c,y]=h.useState("#ffffff"),[N,P]=h.useState("#ffffff"),[D,M]=h.useState("#fa8c16"),[p,k]=h.useState("#ffffff"),[$,_]=h.useState("Inter"),[R,J]=h.useState(!1),[le,Y]=h.useState(null),[C,u]=h.useState(!1),[f,K]=h.useState(localStorage.getItem("vcare_branding")&&JSON.parse(localStorage.getItem("vcare_branding")).darkModeSupport||!1),[E,se]=h.useState(),[ue,Te]=h.useState(null),Ve=d=>{let g=document.getElementById("branding-styles");g||(g=document.createElement("style"),g.id="branding-styles",document.head.appendChild(g)),g.innerHTML=`
      :root {
        --primary-color: ${d.primaryColor||n};
        --secondary-color: ${d.secondaryColor||b};
        --primary-text-color: ${d.primaryTextColor||c};
        --secondary-text-color: ${d.secondaryTextColor||N};
        --accent-color: ${d.accentColor||D};
        --accent-text-color: ${d.accentTextColor||p};
        --primary-color-rgb: ${d.primaryColor?`${parseInt(d.primaryColor.slice(1,3),16)}, ${parseInt(d.primaryColor.slice(3,5),16)}, ${parseInt(d.primaryColor.slice(5,7),16)}`:`${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}`};
        --font-family: ${d.fontFamily||$}, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        --dark-mode: ${d.darkModeSupport?"true":"false"};
      }
      
      .ant-btn-primary {
        background-color: ${d.primaryColor||n} !important;
        border-color: ${d.primaryColor||n} !important;
        color: ${d.primaryTextColor||c} !important;
      }
      
      .text-blue-600, .text-[#0E72BD] {
        color: ${d.primaryColor||n} !important;
      }
      
      .bg-blue-600, .bg-[#0E72BD] {
        background-color: ${d.primaryColor||n} !important;
      }
      
      .border-blue-600, .border-[#0E72BD] {
        border-color: ${d.primaryColor||n} !important;
      }

      .ant-switch-checked {
        background-color: ${d.primaryColor||n} !important;
      }

      .ant-checkbox-checked .ant-checkbox-inner {
        background-color: ${d.primaryColor||n} !important;
        border-color: ${d.primaryColor||n} !important;
      }

      .ant-pagination-item-active {
        border-color: ${d.primaryColor||n} !important;
      }

      .ant-pagination-item-active a {
        color: ${d.primaryColor||n} !important;
      }

      .ant-slider-track {
        background-color: ${d.primaryColor||n} !important;
      }

      .ant-slider-handle::after {
        box-shadow: 0 0 0 2px ${d.primaryColor||n} !important;
      }

      .ant-btn-link {
        color: ${d.primaryColor||n} !important;
      }

      .ant-menu-light .ant-menu-submenu-selected >.ant-menu-submenu-title {
        color: ${d.primaryColor||n} !important;
      }

      .ant-radio-checked .ant-radio-inner {
        border-color: ${d.primaryColor||n} !important;
      }

      .ant-radio-inner::after {
        background-color: ${d.primaryColor||n} !important;
      }

      .ant-tabs-ink-bar {
        background-color: ${d.primaryColor||n} !important;
      }

      .ant-tabs-tab.ant-tabs-tab-active .ant-tabs-tab-btn {
        color: ${d.primaryColor||n} !important;
      }

      .ant-select-item-option-selected:not(.ant-select-item-option-disabled) {
        background-color: rgba(${d.primaryColor?`${parseInt(d.primaryColor.slice(1,3),16)}, ${parseInt(d.primaryColor.slice(3,5),16)}, ${parseInt(d.primaryColor.slice(5,7),16)}`:`${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}`}, 0.1) !important;
      }

      .ant-select-focused .ant-select-selector {
        border-color: ${d.primaryColor||n} !important;
        box-shadow: 0 0 0 2px rgba(${d.primaryColor?`${parseInt(d.primaryColor.slice(1,3),16)}, ${parseInt(d.primaryColor.slice(3,5),16)}, ${parseInt(d.primaryColor.slice(5,7),16)}`:`${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}`}, 0.2) !important;
      }

      .ant-input:focus, 
      .ant-input-focused {
        border-color: ${d.primaryColor||n} !important;
        box-shadow: 0 0 0 2px rgba(${d.primaryColor?`${parseInt(d.primaryColor.slice(1,3),16)}, ${parseInt(d.primaryColor.slice(3,5),16)}, ${parseInt(d.primaryColor.slice(5,7),16)}`:`${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}`}, 0.2) !important;
      }

      .ant-input-affix-wrapper:focus,
      .ant-input-affix-wrapper-focused {
        border-color: ${d.primaryColor||n} !important;
        box-shadow: 0 0 0 2px rgba(${d.primaryColor?`${parseInt(d.primaryColor.slice(1,3),16)}, ${parseInt(d.primaryColor.slice(3,5),16)}, ${parseInt(d.primaryColor.slice(5,7),16)}`:`${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}`}, 0.2) !important;
      }

      .ant-picker-focused {
        border-color: ${d.primaryColor||n} !important;
        box-shadow: 0 0 0 2px rgba(${d.primaryColor?`${parseInt(d.primaryColor.slice(1,3),16)}, ${parseInt(d.primaryColor.slice(3,5),16)}, ${parseInt(d.primaryColor.slice(5,7),16)}`:`${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}`}, 0.2) !important;
      }

      .ant-picker-cell-in-view.ant-picker-cell-selected .ant-picker-cell-inner {
        background-color: ${d.primaryColor||n} !important;
      }

      .ant-tag-blue {
        color: ${d.primaryColor||n} !important;
        background: rgba(${d.primaryColor?`${parseInt(d.primaryColor.slice(1,3),16)}, ${parseInt(d.primaryColor.slice(3,5),16)}, ${parseInt(d.primaryColor.slice(5,7),16)}`:`${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}`}, 0.1) !important;
        border-color: rgba(${d.primaryColor?`${parseInt(d.primaryColor.slice(1,3),16)}, ${parseInt(d.primaryColor.slice(3,5),16)}, ${parseInt(d.primaryColor.slice(5,7),16)}`:`${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}`}, 0.3) !important;
      }

      .ant-progress-bg {
        background-color: ${d.primaryColor||n} !important;
      }

      /* Button hover states */
      .ant-btn:hover {
        border-color: ${d.primaryColor||n} !important;
        color: ${d.primaryColor||n} !important;
      }

      .ant-btn-default:hover {
        border-color: ${d.primaryColor||n} !important;
        color: ${d.primaryColor||n} !important;
      }

      /* Button focus states */
      .ant-btn:focus {
        border-color: ${d.primaryColor||n} !important;
        color: ${d.primaryColor||n} !important;
      }
      
      body {
        font-family: ${d.fontFamily||$}, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
      }
    `,document.querySelectorAll('img[src="/VCARELogo 1.png"]').forEach(G=>{G.src=i})},$e=d=>{s(!0),m(d.primaryColor||n),j(d.secondaryColor||b),y(d.primaryTextColor||c),y(d.secondaryTextColor||N),M(d.accentColor||D),k(d.accentTextColor||p),_(d.fontFamily||$),K(d.darkModeSupport||!1);const g={...d,primaryColor:d.primaryColor||n,secondaryColor:d.secondaryColor||b,primaryTextColor:d.primaryTextColor||c,secondaryTextColor:d.secondaryTextColor||N,accentColor:d.accentColor||D,accentTextColor:d.accentTextColor||p,fontFamily:d.fontFamily||$,darkModeSupport:d.darkModeSupport||f,logoPreview:i};Ve(g),localStorage.setItem("vcare_branding",JSON.stringify(g)),V.success("Branding settings saved and applied successfully"),s(!1),setTimeout(()=>{window.location.reload()},1e3)},T=d=>{const g=new FileReader;return g.onload=L=>{Y(L.target.result),a(d),J(!0)},g.readAsDataURL(d),!1},x=d=>{Te(d.currentTarget);const{width:g,height:L}=d.currentTarget,G=.8,he=g*G,Le=L*G,et=(g-he)/2,tr=(L-Le)/2;se({unit:"px",x:et,y:tr,width:he,height:Le})},W=()=>{if(!E||!ue){V.error("Please select a crop area");return}const d=document.createElement("canvas"),g=ue.naturalWidth/ue.width,L=ue.naturalHeight/ue.height;d.width=E.width,d.height=E.height,d.getContext("2d").drawImage(ue,E.x*g,E.y*L,E.width*g,E.height*L,0,0,E.width,E.height);const he=d.toDataURL("image/png");o(he),J(!1)},Q=()=>{m("#0E72BD"),j("#52c41a"),M("#fa8c16"),K(!1),_("Inter"),o("/VCARELogo 1.png"),t.setFieldsValue({businessName:"VCare Furniture Store",tagline:"Premium Furniture Solutions",primaryColor:"#0E72BD",secondaryColor:"#52c41a",accentColor:"#fa8c16",darkModeSupport:!1,fontFamily:"Inter",emailAddress:"info@vcarefurniture.com",phoneNumber:"(555) 123-4567",address:"123 Main Street, City, State 12345",website:"www.vcarefurniture.com",receiptFooter:"Thank you for your business!",invoiceNotes:"Payment is due within 30 days."}),V.info("Branding settings reset to defaults")},me=()=>{const d={primaryColor:"#333333",primaryTextColor:"#ffffff",secondaryColor:"#666666",secondaryTextColor:"#ffffff",accentColor:"#999999",accentTextColor:"#ffffff",darkModeSupport:!1,fontFamily:"Inter",businessName:"VCare Furniture Store",tagline:"Premium Furniture Solutions",emailAddress:"info@vcarefurniture.com",phoneNumber:"(555) 123-4567",address:"123 Main Street, City, State 12345",website:"www.vcarefurniture.com",receiptFooter:"Thank you for your business!",invoiceNotes:"Payment is due within 30 days.",logoPreview:"/VCARELogo 1.png"};m(d.primaryColor),j(d.secondaryColor),y(d.primaryTextColor),P(d.secondaryTextColor),M(d.accentColor),k(d.accentTextColor),K(d.darkModeSupport),_(d.fontFamily),o(d.logoPreview),t.setFieldsValue(d),Ve(d),document.documentElement.style.setProperty("--primary-color-rgb","51, 51, 51"),localStorage.setItem("vcare_branding",JSON.stringify(d)),V.success("Reset to default black/gray/white theme"),u(!1),setTimeout(()=>{window.location.reload()},1e3)};Ur.useEffect(()=>{const d=localStorage.getItem("vcare_branding");if(d){const g=JSON.parse(d);t.setFieldsValue(g),g.logoPreview&&o(g.logoPreview);const L=(G,he)=>{if(!G)return he;if(typeof G=="string")return G;if(typeof G=="object"){if(G.metaColor&&G.metaColor.originalInput)return G.metaColor.originalInput;if(G.hex)return G.hex}return he};if(g.primaryColor){const G=L(g.primaryColor,"#0E72BD");m(G),document.documentElement.style.setProperty("--primary-color-rgb",`${parseInt(G.slice(1,3),16)}, ${parseInt(G.slice(3,5),16)}, ${parseInt(G.slice(5,7),16)}`)}g.primaryTextColor&&y(L(g.primaryTextColor,"#ffffff")),g.secondaryColor&&j(L(g.secondaryColor,"#52c41a")),g.secondaryTextColor&&P(L(g.secondaryTextColor,"#ffffff")),g.accentColor&&M(L(g.accentColor,"#fa8c16")),g.accentTextColor&&k(L(g.accentTextColor,"#ffffff")),g.fontFamily&&_(g.fontFamily),g.darkModeSupport!==void 0&&K(g.darkModeSupport)}else document.documentElement.style.setProperty("--primary-color-rgb","14, 114, 189")},[t]);const ze=[{key:"general",label:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"business"}),e.jsx("span",{children:"General Branding"})]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(te,{gutter:24,children:[e.jsxs(I,{span:12,children:[e.jsx(w.Item,{name:"businessName",label:"Business Name",initialValue:"VCare Furniture Store",rules:[{required:!0,message:"Please enter business name"}],children:e.jsx(ne,{placeholder:"Enter business name"})}),e.jsx(w.Item,{name:"tagline",label:"Tagline",initialValue:"Premium Furniture Solutions",children:e.jsx(ne,{placeholder:"Enter business tagline"})}),e.jsx(w.Item,{label:"Logo",name:"logo",valuePropName:"fileList",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"border rounded-lg p-4 flex items-center justify-center bg-gray-50",children:e.jsx("img",{src:i,alt:"Business Logo",className:"max-h-24 object-contain"})}),e.jsx(Os,{accept:"image/*",beforeUpload:T,showUploadList:!1,maxCount:1,children:e.jsx(pe,{icon:e.jsx(v,{name:"upload"}),children:"Change Logo"})}),e.jsx(ve,{type:"secondary",className:"text-xs block",children:"Recommended size: 200x200px. PNG or SVG with transparent background."})]})})]}),e.jsxs(I,{span:12,children:[e.jsx(w.Item,{name:"emailAddress",label:"Email Address",initialValue:"info@vcarefurniture.com",children:e.jsx(ne,{placeholder:"Enter business email"})}),e.jsx(w.Item,{name:"phoneNumber",label:"Phone Number",initialValue:"(555) 123-4567",children:e.jsx(ne,{placeholder:"Enter business phone"})}),e.jsx(w.Item,{name:"address",label:"Business Address",initialValue:"123 Main Street, City, State 12345",children:e.jsx(Vt,{rows:3,placeholder:"Enter business address"})}),e.jsx(w.Item,{name:"website",label:"Website",initialValue:"www.vcarefurniture.com",children:e.jsx(ne,{placeholder:"Enter website URL"})})]})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs(ve,{className:"text-sm",children:[e.jsx(v,{name:"info",className:"mr-2 text-blue-600"}),e.jsx("strong",{children:"Note:"})," These details will appear on all invoices, receipts, and other customer-facing documents."]})})]})},{key:"appearance",label:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"palette"}),e.jsx("span",{children:"Colors & Appearance"})]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(te,{gutter:24,children:[e.jsx(I,{span:8,children:e.jsx(w.Item,{label:"Primary Color",name:"primaryColor",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(it,{value:n,onChange:d=>{m(d.toHexString()),document.documentElement.style.setProperty("--primary-color-rgb",`${parseInt(d.toHexString().slice(1,3),16)}, ${parseInt(d.toHexString().slice(3,5),16)}, ${parseInt(d.toHexString().slice(5,7),16)}`)},showText:!0}),e.jsxs("div",{children:[e.jsx(ve,{type:"secondary",className:"text-xs block mb-1",children:"Text Color"}),e.jsx(it,{value:c,onChange:d=>y(d.toHexString()),showText:!1})]})]}),e.jsx("div",{children:e.jsx(ve,{type:"secondary",className:"text-xs block",children:"Used for primary buttons, links, and accents"})})]})})}),e.jsx(I,{span:8,children:e.jsx(w.Item,{label:"Secondary Color",name:"secondaryColor",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(it,{value:b,onChange:d=>{j(d.toHexString())},showText:!0}),e.jsxs("div",{children:[e.jsx(ve,{type:"secondary",className:"text-xs block mb-1",children:"Text Color"}),e.jsx(it,{value:N,onChange:d=>P(d.toHexString()),showText:!1})]})]}),e.jsx("div",{children:e.jsx(ve,{type:"secondary",className:"text-xs block",children:"Used for success states and secondary elements"})})]})})}),e.jsx(I,{span:8,children:e.jsx(w.Item,{label:"Accent Color",name:"accentColor",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(it,{value:D,onChange:d=>{M(d.toHexString())},showText:!0}),e.jsxs("div",{children:[e.jsx(ve,{type:"secondary",className:"text-xs block mb-1",children:"Text Color"}),e.jsx(it,{value:p,onChange:d=>k(d.toHexString()),showText:!1})]})]}),e.jsx("div",{children:e.jsx(ve,{type:"secondary",className:"text-xs block",children:"Used for highlights and tertiary elements"})})]})})})]}),e.jsxs(te,{gutter:24,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{label:"Font Family",name:"fontFamily",children:e.jsxs(ee,{onChange:d=>_(d),children:[e.jsx(St,{value:"Inter",children:"Inter (Default)"}),e.jsx(St,{value:"Roboto",children:"Roboto"}),e.jsx(St,{value:"Open Sans",children:"Open Sans"}),e.jsx(St,{value:"Poppins",children:"Poppins"}),e.jsx(St,{value:"Lato",children:"Lato"})]})})}),e.jsxs(I,{span:12,children:[e.jsx(w.Item,{label:"Dark Mode Support",name:"darkModeSupport",valuePropName:"checked",initialValue:!1,children:e.jsx(ge,{onChange:d=>K(d)})}),e.jsx(ve,{type:"secondary",className:"text-xs block",children:"Enabling dark mode will require a page reload to take full effect"})]})]}),e.jsx(De,{}),e.jsxs("div",{className:"p-6 border rounded-lg",children:[e.jsx(Br,{level:5,className:"mb-4",children:"Preview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white",style:{backgroundColor:n},children:e.jsx(v,{name:"store"})}),e.jsx("div",{children:e.jsxs("div",{style:{fontFamily:$||"Inter"},children:[e.jsx(ve,{strong:!0,className:"text-lg",style:{color:n},children:t.getFieldValue("businessName")||"VCare Furniture Store"}),e.jsx("br",{}),e.jsx(ve,{type:"secondary",children:t.getFieldValue("tagline")||"Premium Furniture Solutions"})]})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(pe,{type:"primary",className:"hover:opacity-90",style:{backgroundColor:n,borderColor:n,color:c},children:"Primary Button"}),e.jsx(pe,{style:{borderColor:n,color:n},className:"hover:opacity-90",children:"Secondary Button"}),e.jsx(pe,{type:"text",style:{color:D},className:"hover:opacity-90",children:"Text Button"})]})]})]})]})},{key:"documents",label:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"description"}),e.jsx("span",{children:"Document Templates"})]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(w.Item,{name:"receiptFooter",label:"Receipt Footer Text",initialValue:"Thank you for your business!",children:e.jsx(Vt,{rows:2,placeholder:"Enter text to appear at the bottom of receipts"})}),e.jsx(w.Item,{name:"invoiceNotes",label:"Default Invoice Notes",initialValue:"Payment is due within 30 days.",children:e.jsx(Vt,{rows:3,placeholder:"Enter default notes for invoices"})}),e.jsx(w.Item,{name:"termsAndConditions",label:"Terms and Conditions",initialValue:"All sales are final. Returns accepted within 30 days with receipt.",children:e.jsx(Vt,{rows:4,placeholder:"Enter terms and conditions for invoices and receipts"})}),e.jsxs(te,{gutter:24,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"showTaxId",label:"Show Tax ID on Documents",valuePropName:"checked",initialValue:!0,children:e.jsx(ge,{})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"taxId",label:"Business Tax ID",initialValue:"TAX-123456789",children:e.jsx(ne,{placeholder:"Enter business tax ID"})})})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs(ve,{className:"text-sm",children:[e.jsx(v,{name:"info",className:"mr-2 text-blue-600"}),e.jsx("strong",{children:"Note:"})," These settings affect how your business information appears on receipts, invoices, and other documents generated by the system."]})})]})}];return e.jsxs(re,{title:e.jsxs(oe,{children:[e.jsx(v,{name:"branding_watermark",className:"text-[#0E72BD]"}),e.jsx(Br,{level:4,className:"m-0",children:"System Branding"})]}),children:[e.jsxs(w,{form:t,layout:"vertical",onFinish:$e,initialValues:{businessName:"VCare Furniture Store",tagline:"Premium Furniture Solutions",primaryColor:"#0E72BD",secondaryColor:"#52c41a",primaryTextColor:"#ffffff",secondaryTextColor:"#ffffff",accentColor:"#fa8c16",accentTextColor:"#ffffff",fontFamily:"Inter",emailAddress:"info@vcarefurniture.com",phoneNumber:"(555) 123-4567",address:"123 Main Street, City, State 12345",website:"www.vcarefurniture.com",receiptFooter:"Thank you for your business!",invoiceNotes:"Payment is due within 30 days."},children:[e.jsx(yr,{items:ze}),e.jsx(De,{}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(pe,{onClick:()=>u(!0),children:"Reset to Defaults"}),e.jsx(pe,{onClick:()=>{const d=t.getFieldsValue();Ve(d),V.success("Applied current settings without saving")},children:"Apply Without Saving"}),e.jsx(pe,{onClick:()=>{window.location.reload(),V.info("Page refreshed to apply all changes")},children:"Refresh Page"}),e.jsx(pe,{type:"primary",htmlType:"submit",loading:r,icon:e.jsx(v,{name:"save"}),className:"bg-primary",children:"Save Branding Settings"})]})]}),e.jsx(Ne,{title:"Crop Logo",open:R,onCancel:()=>J(!1),footer:[e.jsx(pe,{onClick:()=>J(!1),children:"Cancel"},"cancel"),e.jsx(pe,{type:"primary",onClick:W,className:"bg-blue-600",children:"Apply Crop"},"crop")],width:800,children:e.jsxs("div",{className:"text-center",children:[e.jsx(ve,{type:"secondary",className:"mb-4 block",children:"Drag to adjust the crop area for your logo"}),e.jsx("div",{className:"max-h-[60vh] overflow-auto",children:le&&e.jsx(Bs,{crop:E,onChange:d=>se(d),aspect:1,children:e.jsx("img",{src:le,onLoad:x,alt:"Crop preview"})})})]})}),e.jsx(Ne,{title:"Reset Branding Settings",open:C,onCancel:()=>u(!1),footer:[e.jsx(pe,{onClick:()=>u(!1),children:"Cancel"},"cancel"),e.jsx(pe,{onClick:Q,children:"Reset to Original Blue Theme"},"reset-original"),e.jsx(pe,{type:"primary",onClick:me,className:"bg-gray-800",children:"Reset to Black/Gray Theme"},"reset-default")],children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(ve,{children:"Choose a default theme to reset to:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4 cursor-pointer hover:border-blue-500",onClick:Q,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#0E72BD]"}),e.jsx(ve,{strong:!0,children:"Original Blue Theme (Default)"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-2 w-full rounded-full bg-[#0E72BD]"}),e.jsx("div",{className:"h-2 w-3/4 rounded-full bg-[#52c41a]"}),e.jsx("div",{className:"h-2 w-1/2 rounded-full bg-[#fa8c16]"})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 cursor-pointer hover:border-gray-500",onClick:me,children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#333333]"}),e.jsx(ve,{strong:!0,children:"Black/Gray/White Theme"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-2 w-full rounded-full bg-[#333333]"}),e.jsx("div",{className:"h-2 w-3/4 rounded-full bg-[#666666]"}),e.jsx("div",{className:"h-2 w-1/2 rounded-full bg-[#999999]"})]})]})]}),e.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mt-4",children:e.jsxs(ve,{className:"text-sm",children:[e.jsx(v,{name:"warning",className:"mr-2 text-yellow-600"}),e.jsx("strong",{children:"Warning:"})," This will reset all branding settings including colors, logo, and business information. This action cannot be undone."]})})]})})]})}const{Title:ir,Text:Fo}=de,{TextArea:Ec}=ne,{Option:Ye}=ee;function Uo(){const[t,r]=h.useState("general"),[s]=w.useForm(),[l]=w.useForm(),a=[{key:"general",label:"General",icon:e.jsx(v,{name:"settings"})},{key:"branding",label:"Branding",icon:e.jsx(v,{name:"branding_watermark"})},{key:"store",label:"Store Info",icon:e.jsx(v,{name:"store"})},{key:"users",label:"User Management",icon:e.jsx(v,{name:"people"})},{key:"payment",label:"Payment Methods",icon:e.jsx(v,{name:"payment"})},{key:"notifications",label:"Notifications",icon:e.jsx(v,{name:"notifications"})},{key:"security",label:"Security",icon:e.jsx(v,{name:"security"})},{key:"hardware",label:"Hardware",icon:e.jsx(v,{name:"print"})}],i=()=>{V.success("Settings saved successfully!")},o=()=>e.jsxs(w,{form:s,layout:"vertical",onFinish:i,children:[e.jsx(ir,{level:4,children:"General Settings"}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"businessName",label:"Business Name",initialValue:"VCare Furniture Store",children:e.jsx(ne,{})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"currency",label:"Currency",initialValue:"LKR",children:e.jsxs(ee,{children:[e.jsx(Ye,{value:"LKR",children:"LKR (Rs)"}),e.jsx(Ye,{value:"USD",children:"USD ($)"}),e.jsx(Ye,{value:"EUR",children:"EUR (â¬)"}),e.jsx(Ye,{value:"GBP",children:"GBP (Â£)"})]})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"taxRate",label:"Tax Rate (%)",initialValue:8,children:e.jsx(Ce,{min:0,max:100,step:.01,className:"w-full"})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"timezone",label:"Time Zone",initialValue:"UTC+5:30",children:e.jsxs(ee,{children:[e.jsx(Ye,{value:"UTC+5:30",children:"UTC+5:30 (Sri Lanka)"}),e.jsx(Ye,{value:"UTC-5",children:"UTC-5 (Eastern)"}),e.jsx(Ye,{value:"UTC-6",children:"UTC-6 (Central)"}),e.jsx(Ye,{value:"UTC-7",children:"UTC-7 (Mountain)"}),e.jsx(Ye,{value:"UTC-8",children:"UTC-8 (Pacific)"})]})})})]}),e.jsx(A.Primary,{htmlType:"submit",children:"Save Changes"})]}),n=()=>e.jsx(_o,{}),m=()=>{switch(t){case"general":return o();case"branding":return n();default:return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{name:"settings",className:"text-6xl text-gray-300 mb-4"}),e.jsxs(ir,{level:4,type:"secondary",children:[a.find(b=>b.key===t)?.label," settings coming soon"]}),e.jsx(Fo,{type:"secondary",children:"This section is under development"})]})}};return e.jsx(re,{title:e.jsxs(oe,{children:[e.jsx(v,{name:"settings",className:"text-[#0E72BD]"}),e.jsx(ir,{level:4,className:"m-0",children:"Settings"})]}),children:e.jsxs(te,{gutter:24,children:[e.jsx(I,{xs:24,lg:6,children:e.jsx(Fr,{mode:"inline",selectedKeys:[t],onClick:({key:b})=>r(b),items:a.map(b=>({key:b.key,icon:b.icon,label:b.label})),className:"border-none"})}),e.jsx(I,{xs:24,lg:18,children:e.jsx("div",{className:"pl-6",children:m()})})]})})}const Vo=Object.freeze(Object.defineProperty({__proto__:null,SettingsPanel:Uo},Symbol.toStringTag,{value:"Module"})),{Title:$c,Text:wt}=de,{Option:or}=ee,{TextArea:zo}=ne,{RangePicker:Ho}=Yt;function qo(){const t=ke(),r=ie(u=>u.coupons.couponsList)||[],s=ie(u=>u.coupons.loading),l=ie(u=>u.categories.categoriesList)||[],[a,i]=h.useState(""),[o,n]=h.useState(!1),[m,b]=h.useState(null),[j,c]=h.useState(null),[y,N]=h.useState(!1),[P]=w.useForm(),[D,M]=h.useState([]);h.useEffect(()=>{t(ns())},[t]);const p=r.filter(u=>u.code.toLowerCase().includes(a.toLowerCase())||u.description?.toLowerCase().includes(a.toLowerCase())),k=async u=>{try{const f={id:m?.id||`COUPON-${Date.now()}`,code:u.code.toUpperCase(),description:u.description,discountType:u.discountType,discountPercent:u.discountPercent,discountAmount:u.discountAmount,minimumAmount:u.minimumAmount||0,maxDiscount:u.maxDiscount,usageLimit:u.usageLimit,usedCount:m?.usedCount||0,validFrom:u.dateRange?u.dateRange[0].toDate():new Date,validTo:u.dateRange?u.dateRange[1].toDate():null,isActive:u.isActive!==!1,applicableCategories:u.applicableCategories||[],createdAt:m?.createdAt||new Date};m?(t(mr(f)),V.success("Coupon update requested")):(t(is(f)),V.success("Coupon creation requested")),n(!1),b(null),P.resetFields()}catch{V.error("Please fill in all required fields")}},$=u=>{b(u),P.setFieldsValue({...u,dateRange:u.validFrom&&u.validTo?[be(u.validFrom),be(u.validTo)]:null}),n(!0)},_=u=>{t(pr({id:u})),V.success("Coupon delete requested")},R=u=>{u.forEach(f=>{t(pr({id:f}))}),V.success(`${u.length} coupon delete requests sent`),M([])},J=u=>{const f={...u,isActive:!u.isActive};t(mr(f)),V.success(`Coupon ${f.isActive?"activate":"deactivate"} requested`)},le=u=>{c(u),N(!0)},Y=()=>{const u="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let f="";for(let K=0;K<8;K++)f+=u.charAt(Math.floor(Math.random()*u.length));P.setFieldsValue({code:f})},C=[{title:"Coupon Code",dataIndex:"code",key:"code",fixed:"left",width:150,render:u=>e.jsx(wt,{strong:!0,className:"font-mono",children:u}),sorter:(u,f)=>u.code.localeCompare(f.code)},{title:"Description",dataIndex:"description",key:"description",width:200},{title:"Discount",key:"discount",width:120,render:u=>e.jsx(wt,{strong:!0,children:u.discountType==="percentage"?`${u.discountPercent}%`:`LKR ${u.discountAmount}`})},{title:"Min. Amount",dataIndex:"minimumAmount",key:"minimumAmount",width:120,render:u=>u>0?`LKR ${u.toFixed(2)}`:"No minimum"},{title:"Usage",key:"usage",width:100,render:u=>e.jsxs("div",{children:[e.jsx(wt,{children:u.usedCount||0}),u.usageLimit&&e.jsxs(wt,{type:"secondary",children:[" / ",u.usageLimit]})]})},{title:"Valid Until",key:"validTo",width:120,render:u=>e.jsx(wt,{children:u.validTo?new Date(u.validTo).toLocaleDateString():"No expiry"}),sorter:(u,f)=>!u.validTo&&!f.validTo?0:u.validTo?f.validTo?new Date(u.validTo)-new Date(f.validTo):-1:1},{title:"Status",key:"status",width:100,render:u=>{const f=u.validTo&&new Date(u.validTo)<new Date,K=u.usageLimit&&u.usedCount>=u.usageLimit;let E="Active",se="green";return u.isActive?f?(E="Expired",se="orange"):K&&(E="Used Up",se="orange"):(E="Inactive",se="red"),e.jsx(Z,{color:se,children:E})},filters:[{text:"Active",value:"active"},{text:"Inactive",value:"inactive"},{text:"Expired",value:"expired"},{text:"Used Up",value:"used-up"}],onFilter:(u,f)=>{const K=f.validTo&&new Date(f.validTo)<new Date,E=f.usageLimit&&f.usedCount>=f.usageLimit;return u==="active"?f.isActive&&!K&&!E:u==="inactive"?!f.isActive:u==="expired"?K:u==="used-up"?E:!0}},{title:"Actions",key:"actions",fixed:"right",width:120,render:u=>e.jsxs(oe,{children:[e.jsx(fe,{title:"Edit",children:e.jsx(A.Text,{icon:"edit",onClick:f=>{f.stopPropagation(),$(u)},className:"text-blue-600"})}),e.jsx(fe,{title:u.isActive?"Deactivate":"Activate",children:e.jsx(ge,{size:"small",checked:u.isActive,onChange:(f,K)=>{K?.stopPropagation(),J(u)},onClick:(f,K)=>K.stopPropagation()})}),e.jsx(fe,{title:"Delete",children:e.jsx(Dt,{title:"Delete this coupon?",onConfirm:f=>{f?.stopPropagation(),_(u.id)},okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},children:e.jsx(A.Text,{icon:"delete",danger:!0,onClick:f=>f.stopPropagation()})})})]})}];return s?e.jsx(ft,{type:"table"}):e.jsxs(e.Fragment,{children:[e.jsx(st,{title:"Coupon Management",icon:"local_offer",columns:C,dataSource:p,rowKey:"id",rowSelection:{type:"checkbox",onChange:u=>M(u)},onDelete:R,onRow:u=>({onClick:()=>le(u),className:"cursor-pointer hover:bg-blue-50"}),searchFields:["code","description"],searchPlaceholder:"Search coupons...",extra:e.jsx(A.Primary,{icon:"add",onClick:()=>n(!0),children:"Create Coupon"}),emptyDescription:"No coupons found",emptyImage:e.jsx(v,{name:"local_offer",className:"text-6xl text-gray-300"})}),e.jsx(Ne,{title:m?"Edit Coupon":"Create New Coupon",open:o,onCancel:()=>{n(!1),b(null),P.resetFields()},footer:null,width:800,destroyOnClose:!0,children:e.jsxs(w,{form:P,layout:"vertical",onFinish:k,className:"mt-4",children:[e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"code",label:"Coupon Code",rules:[{required:!0,message:"Please enter coupon code"}],children:e.jsx(ne,{placeholder:"Enter coupon code",className:"font-mono",addonAfter:e.jsx(pe,{type:"text",size:"small",onClick:Y,icon:e.jsx(v,{name:"refresh",size:"text-sm"})})})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"discountType",label:"Discount Type",rules:[{required:!0,message:"Please select discount type"}],initialValue:"percentage",children:e.jsxs(ee,{children:[e.jsx(or,{value:"percentage",children:"Percentage"}),e.jsx(or,{value:"fixed",children:"Fixed Amount"})]})})})]}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"discountPercent",label:"Discount Percentage (%)",rules:[{required:!0,message:"Please enter discount percentage"}],children:e.jsx(Ce,{min:0,max:100,step:1,placeholder:"0",className:"w-full"})})}),e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"maxDiscount",label:"Maximum Discount (LKR)",children:e.jsx(Ce,{min:0,step:100,placeholder:"0.00",className:"w-full",formatter:u=>`LKR ${u}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:u=>u.replace(/LKR\s?|(,*)/g,"")})})}),e.jsx(I,{span:8,children:e.jsx(w.Item,{name:"minimumAmount",label:"Minimum Order Amount (LKR)",children:e.jsx(Ce,{min:0,step:100,placeholder:"0.00",className:"w-full",formatter:u=>`LKR ${u}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:u=>u.replace(/LKR\s?|(,*)/g,"")})})})]}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"usageLimit",label:"Usage Limit",children:e.jsx(Ce,{min:1,placeholder:"Unlimited",className:"w-full"})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"dateRange",label:"Valid Period",children:e.jsx(Ho,{className:"w-full",showTime:!0,format:"YYYY-MM-DD HH:mm"})})})]}),e.jsx(w.Item,{name:"applicableCategories",label:"Applicable Categories",children:e.jsx(ee,{mode:"multiple",placeholder:"Select categories (leave empty for all)",children:l.filter(u=>u.isActive).map(u=>e.jsx(or,{value:u.name,children:u.name},u.id))})}),e.jsx(w.Item,{name:"description",label:"Description",children:e.jsx(zo,{rows:3,placeholder:"Enter coupon description"})}),e.jsx(w.Item,{name:"isActive",label:"Active",valuePropName:"checked",initialValue:!0,children:e.jsx(ge,{})}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx(A,{onClick:()=>n(!1),children:"Cancel"}),e.jsxs(A.Primary,{htmlType:"submit",loading:s,children:[m?"Update":"Create"," Coupon"]})]})]})}),e.jsx(jt,{open:y,onClose:()=>{N(!1),c(null)},title:`Coupon Details - ${j?.code}`,icon:"local_offer",data:j,type:"coupon",actions:[e.jsx(A,{icon:"edit",onClick:()=>{N(!1),$(j)},children:"Edit Coupon"},"edit")]})]})}const Jo=Object.freeze(Object.defineProperty({__proto__:null,CouponManagement:qo},Symbol.toStringTag,{value:"Module"})),{Title:Lc,Text:Pe}=de,{Option:Yo}=ee,{TextArea:Ko}=ne;function Qo(){const t=ke(),r=ie(T=>T.taxes.taxesList)||[],s=ie(T=>T.categories.categoriesList)?.filter(T=>T.isActive)||[],l=ie(T=>T.products.productsList)||[],a=ie(T=>T.taxes.loading),[i,o]=h.useState(""),[n,m]=h.useState(!1),[b,j]=h.useState(null),[c,y]=h.useState(null),[N,P]=h.useState(!1),[D]=w.useForm(),[M,p]=h.useState("full_bill"),[k,$]=h.useState(!1),[_,R]=h.useState(!0),[J,le]=h.useState([]);h.useEffect(()=>{t(cs()),t(es()),t(br())},[t]);const Y=r.filter(T=>T.name.toLowerCase().includes(i.toLowerCase())||T.description?.toLowerCase().includes(i.toLowerCase())),C=async T=>{try{const x={id:b?.id||`TAX-${Date.now()}`,name:T.name,description:T.description,rate:T.rate,taxType:T.taxType,isActive:T.isActive!==!1,applicableCategories:T.taxType==="category"?T.applicableCategories||[]:[],createdAt:b?.createdAt||new Date};b?(t(kt(x)),V.success("Tax updated successfully")):(t(ds(x)),V.success("Tax added successfully")),m(!1),j(null),D.resetFields(),p("full_bill")}catch{V.error("Please fill in all required fields")}},u=T=>{j(T),p(T.taxType||"full_bill"),D.setFieldsValue({...T,taxType:T.taxType||"full_bill"}),m(!0)},f=T=>{t(hr(T)),V.success("Tax deleted successfully")},K=T=>{T.forEach(x=>{t(hr(x))}),V.success(`${T.length} taxes deleted successfully`),le([])},E=T=>{const x={...T,isActive:!T.isActive};t(kt(x)),V.success(`Tax ${x.isActive?"activated":"deactivated"}`)},se=T=>{y(T),P(!0)},ue=T=>{const x=T.target.value;p(x),x==="full_bill"&&D.setFieldsValue({applicableCategories:[]})},Te=()=>{if(!_)r.map(x=>({...x,isActive:!1})).forEach(x=>{t(kt(x))}),V.success("All taxes have been disabled");else if(r.every(T=>!T.isActive))if(r.length>0){const T=r[0],x={...T,isActive:!0};t(kt(x)),V.success(`${T.name} has been activated`)}else V.info("No taxes available to activate. Please create a tax first.");else V.success("Taxes have been enabled");$(!1)},Ve=[{title:"Tax Name",dataIndex:"name",key:"name",fixed:"left",width:200,render:T=>e.jsx(Pe,{strong:!0,children:T}),sorter:(T,x)=>T.name.localeCompare(x.name)},{title:"Rate",dataIndex:"rate",key:"rate",width:100,render:T=>e.jsxs(Pe,{strong:!0,children:[T,"%"]}),sorter:(T,x)=>T.rate-x.rate},{title:"Type",dataIndex:"taxType",key:"taxType",width:120,render:T=>e.jsx(Z,{color:T==="full_bill"?"green":"orange",children:T==="full_bill"?"Full Bill":"Category"}),filters:[{text:"Full Bill",value:"full_bill"},{text:"Category",value:"category"}],onFilter:(T,x)=>x.taxType===T},{title:"Applicable To",key:"applicableTo",width:200,render:T=>e.jsx("div",{children:T.taxType==="full_bill"?e.jsx(Z,{color:"green",children:"All Products"}):e.jsxs("div",{className:"flex flex-wrap gap-1",children:[T.applicableCategories&&T.applicableCategories.length>0?T.applicableCategories.slice(0,2).map(x=>e.jsx(Z,{color:"blue",children:x},x)):e.jsx(Pe,{type:"secondary",className:"text-xs",children:"No categories"}),T.applicableCategories&&T.applicableCategories.length>2&&e.jsxs(Z,{children:["+",T.applicableCategories.length-2," more"]})]})})},{title:"Status",key:"status",width:100,render:T=>e.jsx(ge,{checked:T.isActive,onChange:(x,W)=>{W?.stopPropagation(),E(T)},size:"small",onClick:(x,W)=>W.stopPropagation()}),filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:(T,x)=>x.isActive===T},{title:"Actions",key:"actions",fixed:"right",width:120,render:T=>e.jsxs(oe,{children:[e.jsx(fe,{title:"Edit",children:e.jsx(A.Text,{icon:"edit",onClick:x=>{x.stopPropagation(),u(T)},className:"text-blue-600"})}),e.jsx(fe,{title:"Delete",children:e.jsx(Dt,{title:"Delete this tax?",onConfirm:x=>{x?.stopPropagation(),f(T.id)},okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},children:e.jsx(A.Text,{icon:"delete",danger:!0,onClick:x=>x.stopPropagation()})})})]})}],$e=r.every(T=>!T.isActive);return a?e.jsx(ft,{type:"table"}):e.jsxs(e.Fragment,{children:[e.jsx(st,{title:"Tax Management",icon:"receipt",subtitle:$e?"All taxes are currently disabled":"Manage tax rates and settings",columns:Ve,dataSource:Y,rowKey:"id",rowSelection:{type:"checkbox",onChange:T=>le(T)},onDelete:K,onRow:T=>({onClick:()=>se(T),className:"cursor-pointer hover:bg-blue-50"}),searchFields:["name","description"],searchPlaceholder:"Search taxes...",extra:e.jsxs(oe,{children:[e.jsx(A,{icon:$e?"toggle_off":"toggle_on",onClick:()=>{R(!$e),$(!0)},children:$e?"Enable Taxes":"Disable All Taxes"}),e.jsx(A.Primary,{icon:"add",onClick:()=>m(!0),children:"Add Tax"})]}),emptyDescription:"No taxes found",emptyImage:e.jsx(v,{name:"receipt",className:"text-6xl text-gray-300"})}),e.jsxs(xo,{title:b?"Edit Tax":"Add New Tax",open:n,onCancel:()=>{m(!1),j(null),p("full_bill"),D.resetFields()},onSubmit:C,form:D,width:700,submitText:b?"Update Tax":"Add Tax",loading:a,children:[e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"name",label:"Tax Name",rules:[{required:!0,message:"Please enter tax name"}],children:e.jsx(ne,{placeholder:"e.g., Sales Tax, VAT"})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"rate",label:"Tax Rate (%)",rules:[{required:!0,message:"Please enter tax rate"}],children:e.jsx(Ce,{min:0,max:100,step:.01,placeholder:"0.00",className:"w-full"})})})]}),e.jsx(w.Item,{name:"taxType",label:"Tax Type",rules:[{required:!0,message:"Please select tax type"}],initialValue:"full_bill",children:e.jsx(rt.Group,{onChange:ue,value:M,children:e.jsxs(oe,{direction:"vertical",children:[e.jsx(rt,{value:"full_bill",children:e.jsxs("div",{children:[e.jsx(Pe,{strong:!0,children:"Full Bill Tax"}),e.jsx("br",{}),e.jsx(Pe,{type:"secondary",className:"text-sm",children:"Applied to the entire order total (after discounts)"})]})}),e.jsx(rt,{value:"category",children:e.jsxs("div",{children:[e.jsx(Pe,{strong:!0,children:"Category Tax"}),e.jsx("br",{}),e.jsx(Pe,{type:"secondary",className:"text-sm",children:"Applied only to specific product categories"})]})})]})})}),M==="category"&&e.jsx(w.Item,{name:"applicableCategories",label:"Applicable Categories",rules:[{required:M==="category",message:"Please select at least one category for category tax"}],children:e.jsx(ee,{mode:"multiple",placeholder:"Select categories this tax applies to",showSearch:!0,filterOption:(T,x)=>x.children.toLowerCase().includes(T.toLowerCase()),children:s.map(T=>e.jsx(Yo,{value:T.name,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:T.name}),e.jsxs(Pe,{type:"secondary",className:"text-xs ml-2",children:[l.filter(x=>x.category===T.name).length," products"]})]})},T.id))})}),e.jsx(w.Item,{name:"description",label:"Description",children:e.jsx(Ko,{rows:3,placeholder:"Enter tax description"})}),e.jsx(w.Item,{name:"isActive",label:"Active Status",valuePropName:"checked",initialValue:!0,children:e.jsx(ge,{})}),M==="full_bill"&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsxs(Pe,{className:"text-sm",children:[e.jsx(v,{name:"info",className:"mr-2 text-blue-500"}),e.jsx("strong",{children:"Full Bill Tax:"})," This tax will be applied to the entire order total after any discounts are applied."]})}),M==="category"&&e.jsx("div",{className:"bg-orange-50 p-3 rounded-lg",children:e.jsxs(Pe,{className:"text-sm",children:[e.jsx(v,{name:"info",className:"mr-2 text-orange-500"}),e.jsx("strong",{children:"Category Tax:"})," This tax will be applied only to products in the selected categories. The tax is calculated on individual product prices."]})})]}),e.jsx(Ne,{title:e.jsxs(oe,{children:[e.jsx(v,{name:_?"toggle_on":"toggle_off",className:_?"text-green-600":"text-red-600"}),e.jsxs("span",{children:[_?"Enable":"Disable"," All Taxes"]})]}),open:k,onCancel:()=>$(!1),footer:[e.jsx(A,{onClick:()=>$(!1),children:"Cancel"},"cancel"),e.jsx(A.Primary,{onClick:Te,children:_?"Enable Taxes":"Disable All Taxes"},"save")],width:500,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(mt,{message:_?"Enable Tax Collection":"Disable All Taxes",description:_?"This will enable tax collection based on your configured tax rules.":"This will disable ALL taxes in the system. No taxes will be applied to any orders.",type:_?"info":"warning",showIcon:!0}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(Pe,{strong:!0,children:"Tax Collection"}),e.jsx("br",{}),e.jsx(Pe,{type:"secondary",children:_?"Taxes will be applied to orders according to your tax rules":"No taxes will be applied to any orders"})]}),e.jsx(ge,{checked:_,onChange:R,size:"default"})]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs(Pe,{className:"text-sm",children:[e.jsx(v,{name:"info",className:"mr-2 text-blue-600"}),e.jsx("strong",{children:"Note:"})," ",_?"Individual taxes can still be enabled or disabled in the tax management table.":"This will override individual tax settings and disable all taxes in the system."]})})]})}),e.jsx(jt,{open:N,onClose:()=>{P(!1),y(null)},title:`Tax Details - ${c?.name}`,icon:"receipt",data:c,type:"tax",actions:[e.jsx(A,{icon:"edit",onClick:()=>{P(!1),u(c)},children:"Edit Tax"},"edit")]})]})}const Go=Object.freeze(Object.defineProperty({__proto__:null,TaxManagement:Qo},Symbol.toStringTag,{value:"Module"})),{Title:_r,Text:Oe}=de,{Option:cr}=ee,Wo={pos:"Point of Sale",products:"Product Management","raw-materials":"Raw Materials",transactions:"Orders & Transactions",reports:"Reports & Analytics",coupons:"Coupon Management",tax:"Tax Management",settings:"System Settings","user-management":"User Management","audit-trail":"Audit Trail"},zt={admin:{pos:{view:!0,edit:!0,delete:!0},products:{view:!0,edit:!0,delete:!0},"raw-materials":{view:!0,edit:!0,delete:!0},transactions:{view:!0,edit:!0,delete:!0},reports:{view:!0,edit:!0,delete:!0},coupons:{view:!0,edit:!0,delete:!0},tax:{view:!0,edit:!0,delete:!0},settings:{view:!0,edit:!0,delete:!0},"user-management":{view:!0,edit:!0,delete:!0},"audit-trail":{view:!0,edit:!0,delete:!0}},manager:{pos:{view:!0,edit:!0,delete:!0},products:{view:!0,edit:!0,delete:!0},"raw-materials":{view:!0,edit:!0,delete:!1},transactions:{view:!0,edit:!0,delete:!1},reports:{view:!0,edit:!1,delete:!1},coupons:{view:!0,edit:!0,delete:!0},tax:{view:!0,edit:!0,delete:!1},settings:{view:!0,edit:!1,delete:!1},"user-management":{view:!0,edit:!1,delete:!1},"audit-trail":{view:!0,edit:!1,delete:!1}},cashier:{pos:{view:!0,edit:!0,delete:!1},products:{view:!0,edit:!1,delete:!1},"raw-materials":{view:!1,edit:!1,delete:!1},transactions:{view:!0,edit:!1,delete:!1},reports:{view:!1,edit:!1,delete:!1},coupons:{view:!0,edit:!1,delete:!1},tax:{view:!1,edit:!1,delete:!1},settings:{view:!1,edit:!1,delete:!1},"user-management":{view:!1,edit:!1,delete:!1},"audit-trail":{view:!1,edit:!1,delete:!1}}};function Xo({open:t,onClose:r,editingUser:s}){const l=ke(),a=ie(p=>p.users.usersList),i=ie(p=>p.users.loading),{hasPermission:o}=Ge(),[n]=w.useForm(),[m,b]=h.useState({}),[j,c]=h.useState("cashier");h.useEffect(()=>{s&&t?(n.setFieldsValue({firstName:s.firstName,lastName:s.lastName,username:s.username,email:s.email,role:s.role,isActive:s.isActive}),b(s.permissions),c(s.role)):t&&!s&&(n.resetFields(),c("cashier"),b(zt.cashier))},[s,t,n]);const y=p=>{c(p),b(zt[p]),n.setFieldsValue({role:p})},N=(p,k,$)=>{b(_=>({..._,[p]:{..._[p],[k]:$}}))},P=async p=>{try{if(a.find(R=>R.username===p.username&&R.id!==s?.id)){V.error("Username already exists");return}if(a.find(R=>R.email===p.email&&R.id!==s?.id)){V.error("Email already exists");return}const _={...p,permissions:m,isActive:p.isActive!==!1};s?(l(vr({id:s.id,userData:{...s,..._}})),V.success("User updated successfully")):(l(Xr({userData:_})),V.success("User created successfully")),r(),n.resetFields(),b({})}catch{V.error("Please fill in all required fields")}},D=(p,k)=>e.jsxs(re,{size:"small",className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(Oe,{strong:!0,children:Wo[p]}),e.jsx(ge,{checked:k.view,onChange:$=>{$?N(p,"view",!0):(N(p,"view",!1),N(p,"edit",!1),N(p,"delete",!1))},size:"small"})]}),k.view&&e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:8,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Oe,{className:"text-sm",children:"View"}),e.jsx(ge,{checked:k.view,disabled:!0,size:"small"})]})}),e.jsx(I,{span:8,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Oe,{className:"text-sm",children:"Edit"}),e.jsx(ge,{checked:k.edit,onChange:$=>N(p,"edit",$),size:"small"})]})}),e.jsx(I,{span:8,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Oe,{className:"text-sm",children:"Delete"}),e.jsx(ge,{checked:k.delete,onChange:$=>N(p,"delete",$),size:"small"})]})})]})]},p),M=[{key:"basic",label:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"person"}),e.jsx("span",{children:"Basic Information"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"firstName",label:"First Name",rules:[{required:!0,message:"Please enter first name"}],children:e.jsx(ne,{placeholder:"Enter first name"})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"lastName",label:"Last Name",rules:[{required:!0,message:"Please enter last name"}],children:e.jsx(ne,{placeholder:"Enter last name"})})})]}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please enter username"},{min:3,message:"Username must be at least 3 characters"},{pattern:/^[a-zA-Z0-9_]+$/,message:"Username can only contain letters, numbers, and underscores"}],children:e.jsx(ne,{placeholder:"Enter username"})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(ne,{placeholder:"Enter email address"})})})]}),!s&&e.jsx(w.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter password"},{min:6,message:"Password must be at least 6 characters"}],children:e.jsx(ne.Password,{placeholder:"Enter password"})}),e.jsxs(te,{gutter:16,children:[e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please select role"}],children:e.jsxs(ee,{placeholder:"Select role",onChange:y,children:[e.jsx(cr,{value:"admin",children:"Administrator"}),e.jsx(cr,{value:"manager",children:"Manager"}),e.jsx(cr,{value:"cashier",children:"Cashier"})]})})}),e.jsx(I,{span:12,children:e.jsx(w.Item,{name:"isActive",label:"Active User",valuePropName:"checked",initialValue:!0,children:e.jsx(ge,{})})})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx(_r,{level:5,className:"mb-2",children:"Role Descriptions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(Oe,{strong:!0,children:"Administrator:"}),e.jsx(Oe,{type:"secondary",className:"ml-2",children:"Full system access including user management"})]}),e.jsxs("div",{children:[e.jsx(Oe,{strong:!0,children:"Manager:"}),e.jsx(Oe,{type:"secondary",className:"ml-2",children:"Business operations access with limited admin functions"})]}),e.jsxs("div",{children:[e.jsx(Oe,{strong:!0,children:"Cashier:"}),e.jsx(Oe,{type:"secondary",className:"ml-2",children:"POS and basic product viewing access only"})]})]})]})]})},{key:"permissions",label:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:"security"}),e.jsx("span",{children:"Permissions"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx(_r,{level:5,className:"mb-1",children:"Module Permissions"}),e.jsx(Oe,{type:"secondary",children:"Configure access levels for each system module"})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(A,{size:"small",onClick:()=>b(zt.admin),children:"Grant All"}),e.jsx(A,{size:"small",onClick:()=>b(zt.cashier),children:"Minimal Access"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(m).map(([p,k])=>D(p,k))}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsxs(Oe,{className:"text-sm",children:[e.jsx(v,{name:"info",className:"mr-2 text-yellow-600"}),e.jsx("strong",{children:"Permission Levels:"})," View allows reading data, Edit allows modifications, Delete allows removal of records. Disabling View will automatically disable Edit and Delete permissions."]})})]})}];return o("user-management","edit")?e.jsx(Ne,{title:s?"Edit User":"Add New User",open:t,onCancel:r,width:800,footer:null,destroyOnClose:!0,children:e.jsxs(w,{form:n,layout:"vertical",onFinish:P,className:"mt-4",children:[e.jsx(yr,{items:M}),e.jsx(De,{}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(A,{onClick:r,children:"Cancel"}),e.jsx(A.Primary,{htmlType:"submit",loading:i,icon:s?"save":"person_add",children:s?"Update User":"Create User"})]})]})}):null}const{Title:Rc,Text:Ct}=de;function Zo(){const t=ke(),{currentUser:r,hasPermission:s}=Ge(),l=ie(C=>C.users.usersList),a=ie(C=>C.users.loading),[i,o]=h.useState(""),[n,m]=h.useState(!1),[b,j]=h.useState(null),[c,y]=h.useState(null),[N,P]=h.useState(!1),[D,M]=h.useState([]);h.useEffect(()=>{r?.role==="admin"&&t(Wr())},[r,t]);const p=l.filter(C=>C.firstName.toLowerCase().includes(i.toLowerCase())||C.lastName.toLowerCase().includes(i.toLowerCase())||C.username.toLowerCase().includes(i.toLowerCase())||C.email.toLowerCase().includes(i.toLowerCase())||C.role.toLowerCase().includes(i.toLowerCase())),k=C=>{if(!s("user-management","edit")){V.error("You do not have permission to edit users");return}j(C),m(!0)},$=C=>{if(!s("user-management","delete")){V.error("You do not have permission to delete users");return}if(C===r?.id){V.error("You cannot delete your own account");return}t(ur({userId:C})),V.success("User deleted successfully")},_=C=>{if(!s("user-management","delete")){V.error("You do not have permission to delete users");return}const u=C.filter(f=>f!==r?.id);u.length!==C.length&&V.warning("Your own account was excluded from deletion"),u.length!==0&&(u.forEach(f=>{t(ur({userId:f}))}),V.success(`${u.length} users deleted successfully`),M([]))},R=C=>{if(!s("user-management","edit")){V.error("You do not have permission to modify users");return}if(C.id===r?.id){V.error("You cannot deactivate your own account");return}const u={...C,isActive:!C.isActive};t(vr({id:u.id,userData:u})),V.success(`User ${u.isActive?"activated":"deactivated"}`)},J=C=>{y(C),P(!0)},le=C=>{switch(C){case"admin":return"red";case"manager":return"blue";case"cashier":return"green";default:return"default"}},Y=[{title:"User",key:"user",fixed:"left",width:250,render:C=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(xr,{size:40,style:{background:C.isActive?"#0E72BD":"#d9d9d9",color:"white"},children:[C.firstName[0],C.lastName[0]]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Ct,{strong:!0,children:[C.firstName," ",C.lastName]}),C.id===r?.id&&e.jsx(Z,{color:"blue",size:"small",children:"You"})]}),e.jsxs(Ct,{type:"secondary",className:"text-sm",children:["@",C.username]})]})]})},{title:"Email",dataIndex:"email",key:"email",width:200},{title:"Role",dataIndex:"role",key:"role",width:120,render:C=>e.jsx(Z,{color:le(C),className:"capitalize",children:C}),filters:[{text:"Admin",value:"admin"},{text:"Manager",value:"manager"},{text:"Cashier",value:"cashier"}],onFilter:(C,u)=>u.role===C},{title:"Status",key:"status",width:120,render:C=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{checked:C.isActive,onChange:()=>R(C),size:"small",disabled:C.id===r?.id||!s("user-management","edit"),onClick:(u,f)=>f.stopPropagation()}),e.jsx(Ct,{className:"text-sm",children:C.isActive?"Active":"Inactive"})]}),filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:(C,u)=>u.isActive===C},{title:"Last Login",dataIndex:"lastLogin",key:"lastLogin",width:150,sorter:(C,u)=>new Date(C.lastLogin||0)-new Date(u.lastLogin||0),render:C=>e.jsx("div",{children:C?e.jsx(Ct,{className:"text-sm",children:new Date(C).toLocaleDateString()}):e.jsx(Ct,{type:"secondary",className:"text-sm",children:"Never"})})},{title:"Actions",key:"actions",fixed:"right",width:120,render:C=>e.jsxs(oe,{children:[e.jsx(fe,{title:s("user-management","edit")?"Edit User":"No permission",children:e.jsx(A.Text,{icon:"edit",onClick:u=>{u.stopPropagation(),k(C)},disabled:!s("user-management","edit"),className:"text-blue-600"})}),e.jsx(fe,{title:s("user-management","delete")?C.id===r?.id?"Cannot delete own account":"Delete User":"No permission",children:e.jsx(Dt,{title:"Delete this user?",description:"This action cannot be undone.",onConfirm:u=>{u?.stopPropagation(),$(C.id)},okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},disabled:C.id===r?.id||!s("user-management","delete"),children:e.jsx(A.Text,{icon:"delete",danger:!0,disabled:C.id===r?.id||!s("user-management","delete"),onClick:u=>u.stopPropagation()})})})]})}];return s("user-management","view")?a?e.jsx(ft,{type:"table"}):e.jsxs(e.Fragment,{children:[e.jsxs(re,{children:[e.jsxs(te,{gutter:16,className:"mb-6",children:[e.jsx(I,{span:6,children:e.jsxs(re,{size:"small",className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Users"})]})}),e.jsx(I,{span:6,children:e.jsxs(re,{size:"small",className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.filter(C=>C.isActive).length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active Users"})]})}),e.jsx(I,{span:6,children:e.jsxs(re,{size:"small",className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.filter(C=>C.role==="admin").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Administrators"})]})}),e.jsx(I,{span:6,children:e.jsxs(re,{size:"small",className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.filter(C=>C.lastLogin&&new Date(C.lastLogin)>new Date(Date.now()-24*60*60*1e3)).length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active Today"})]})})]}),e.jsx(st,{title:"User Management",icon:"people",columns:Y,dataSource:p,rowKey:"id",rowSelection:s("user-management","delete")?{type:"checkbox",onChange:C=>M(C),getCheckboxProps:C=>({disabled:C.id===r?.id})}:null,onDelete:_,onRow:C=>({onClick:()=>J(C),className:"cursor-pointer hover:bg-blue-50"}),searchFields:["firstName","lastName","username","email","role"],searchPlaceholder:"Search users...",showSearch:!0,extra:s("user-management","edit")&&e.jsx(A.Primary,{icon:"person_add",onClick:()=>m(!0),children:"Add User"}),emptyDescription:"No users found",emptyImage:e.jsx(v,{name:"people",className:"text-6xl text-gray-300"})})]}),e.jsx(Xo,{open:n,onClose:()=>{m(!1),j(null)},editingUser:b}),e.jsx(jt,{open:N,onClose:()=>{P(!1),y(null)},title:`User Details - ${c?.firstName} ${c?.lastName}`,icon:"person",data:c,type:"user",actions:[s("user-management","edit")&&e.jsx(A,{icon:"edit",onClick:()=>{P(!1),k(c)},children:"Edit User"},"edit")].filter(Boolean)})]}):e.jsx(re,{children:e.jsx(wr,{icon:"lock",title:"Access Denied",description:"You do not have permission to view user management."})})}const ec=Object.freeze(Object.defineProperty({__proto__:null,UserManagement:Zo},Symbol.toStringTag,{value:"Module"})),{Title:Mc,Text:Nt}=de,{Option:Ht}=ee,{RangePicker:tc}=Yt;function rc(){const{hasPermission:t}=Ge(),r=ke(),s=ie(f=>f.audit.auditList),l=ie(f=>f.audit.loading),[a,i]=h.useState(""),[o,n]=h.useState("all"),[m,b]=h.useState("all"),[j,c]=h.useState(null),[y,N]=h.useState(null),[P,D]=h.useState(!1),[M,p]=h.useState([]);h.useEffect(()=>{t("audit-trail","view")&&r(gs())},[r]);const k=s.filter(f=>{const K=f.description.toLowerCase().includes(a.toLowerCase())||f.userName.toLowerCase().includes(a.toLowerCase())||f.module.toLowerCase().includes(a.toLowerCase()),E=o==="all"||f.action===o,se=m==="all"||f.module===m;let ue=!0;if(j&&j.length===2){const Te=be(f.timestamp);ue=Te.isAfter(j[0].startOf("day"))&&Te.isBefore(j[1].endOf("day"))}return K&&E&&se&&ue}),$=f=>{switch(f){case"CREATE":return"green";case"UPDATE":return"blue";case"DELETE":return"red";case"LOGIN":return"purple";case"LOGOUT":return"orange";default:return"default"}},_=f=>{switch(f){case"CREATE":return"add_circle";case"UPDATE":return"edit";case"DELETE":return"delete";case"LOGIN":return"login";case"LOGOUT":return"logout";default:return"info"}},R=f=>{switch(f){case"products":return"inventory_2";case"raw-materials":return"category";case"transactions":return"receipt_long";case"user-management":return"people";case"authentication":return"security";case"settings":return"settings";case"coupons":return"local_offer";case"tax":return"receipt";default:return"info"}},J=f=>{N(f),D(!0)},le=f=>{N(f),D(!0)},Y=[{title:"Time",dataIndex:"timestamp",key:"timestamp",width:120,fixed:"left",render:f=>e.jsxs(Nt,{className:"text-sm",children:[new Date(f).toLocaleDateString(),e.jsx("br",{}),new Date(f).toLocaleTimeString()]}),sorter:(f,K)=>new Date(f.timestamp)-new Date(K.timestamp)},{title:"User",key:"user",width:200,render:f=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xr,{size:32,style:{backgroundColor:"#0E72BD"},children:f.userName.split(" ").map(K=>K[0]).join("")}),e.jsx(Nt,{strong:!0,className:"text-sm",children:f.userName})]}),sorter:(f,K)=>f.userName.localeCompare(K.userName)},{title:"Action",dataIndex:"action",key:"action",width:120,render:f=>e.jsx(Z,{color:$(f),icon:e.jsx(v,{name:_(f),size:"text-xs"}),children:f}),filters:[{text:"CREATE",value:"CREATE"},{text:"UPDATE",value:"UPDATE"},{text:"DELETE",value:"DELETE"},{text:"LOGIN",value:"LOGIN"},{text:"LOGOUT",value:"LOGOUT"}],onFilter:(f,K)=>K.action===f},{title:"Module",dataIndex:"module",key:"module",width:160,render:f=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{name:R(f),className:"text-gray-500"}),e.jsx(Nt,{className:"capitalize",children:f.replace("-"," ")})]}),filters:[...new Set((s||[]).map(f=>f.module))].map(f=>({text:f.replace("-"," ").replace(/\b\w/g,K=>K.toUpperCase()),value:f})),onFilter:(f,K)=>K.module===f},{title:"Description",dataIndex:"description",key:"description",render:f=>e.jsx(Nt,{className:"text-sm",children:f})},{title:"IP Address",dataIndex:"ipAddress",key:"ipAddress",width:200,render:f=>e.jsx(Nt,{code:!0,className:"text-xs",children:f})},{title:"Actions",key:"actions",fixed:"right",width:150,render:f=>e.jsx(fe,{title:"View Details",children:e.jsx(A.Text,{icon:"visibility",onClick:K=>{K.stopPropagation(),J(f)},className:"text-blue-600"})})}],C=[...new Set((s||[]).map(f=>f.module))],u=[...new Set((s||[]).map(f=>f.action))];return t("audit-trail","view")?l?e.jsx(ft,{type:"table"}):e.jsxs(e.Fragment,{children:[e.jsx(st,{title:"Audit Trail",icon:"history",columns:Y,dataSource:k,rowKey:"id",onRow:f=>({onClick:()=>le(f),className:"cursor-pointer hover:bg-blue-50"}),searchFields:["description","userName","module"],searchPlaceholder:"Search activities...",extra:e.jsxs(oe,{children:[e.jsxs(ee,{value:o,onChange:n,className:"w-32",placeholder:"Action",children:[e.jsx(Ht,{value:"all",children:"All Actions"}),u.map(f=>e.jsx(Ht,{value:f,children:f},f))]}),e.jsxs(ee,{value:m,onChange:b,className:"w-40",placeholder:"Module",children:[e.jsx(Ht,{value:"all",children:"All Modules"}),C.map(f=>e.jsx(Ht,{value:f,children:f.replace("-"," ").replace(/\b\w/g,K=>K.toUpperCase())},f))]}),e.jsx(tc,{value:j,onChange:c,placeholder:["Start Date","End Date"]})]}),emptyDescription:"No audit trail entries found",emptyImage:e.jsx(v,{name:"history",className:"text-6xl text-gray-300"})}),e.jsxs(te,{gutter:16,className:"mb-6 mt-4",children:[e.jsx(I,{span:6,children:e.jsxs(re,{size:"small",className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Activities"})]})}),e.jsx(I,{span:6,children:e.jsxs(re,{size:"small",className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.filter(f=>f.action==="CREATE").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Created"})]})}),e.jsx(I,{span:6,children:e.jsxs(re,{size:"small",className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.filter(f=>f.action==="UPDATE").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Updated"})]})}),e.jsx(I,{span:6,children:e.jsxs(re,{size:"small",className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.filter(f=>f.action==="DELETE").length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Deleted"})]})})]}),e.jsx(jt,{open:P,onClose:()=>{D(!1),N(null)},title:`Activity Details - ${y?.id}`,icon:"history",data:y,type:"auditEntry"})]}):e.jsx(re,{children:e.jsx(wr,{icon:"lock",title:"Access Denied",description:"You do not have permission to view the audit trail."})})}const sc=Object.freeze(Object.defineProperty({__proto__:null,AuditTrail:rc},Symbol.toStringTag,{value:"Module"}));export{A,Ga as B,Ka as C,jt as D,wc as E,xo as F,Dl as G,Ll as H,v as I,$l as J,Rl as K,ft as L,ss as M,Dc as N,Ac as O,Sc as P,Nc as S,Be as _,fc as a,br as b,es as c,wr as d,Wr as e,Sr as f,mo as g,ho as h,ll as i,vc as j,jr as k,cs as l,ns as m,bc as n,Ba as o,Oa as p,_a as q,jc as r,kc as s,va as t,Ge as u,st as v,ba as w,ja as x,Ja as y,Qa as z};
